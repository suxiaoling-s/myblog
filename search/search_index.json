{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u6b22\u8fce\u6765\u5230\u6211\u7684\u535a\u5ba2 \ud83d\udc4b","text":"<p>\u4f60\u597d\uff0c\u6211\u662f suxiaoling\uff0c\u4e00\u540d\u5f00\u53d1\u8005\u3002</p> <p>\u8fd9\u4e2a\u535a\u5ba2\u8bb0\u5f55\u6211\u5728\u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u5b66\u4e60\u603b\u7ed3\u3001\u6280\u672f\u601d\u8003\u548c\u5f00\u53d1\u7ecf\u9a8c\u3002\u5e0c\u671b\u901a\u8fc7\u5206\u4eab\uff0c\u4e0e\u5927\u5bb6\u4e00\u8d77\u6210\u957f\u3002</p>"},{"location":"#_2","title":"\ud83d\udcd6 \u5185\u5bb9\u5206\u7c7b","text":""},{"location":"#_3","title":"\ud83d\ude80 \u9879\u76ee","text":"<p>\u8bb0\u5f55\u6211\u53c2\u4e0e\u6216\u4e3b\u5bfc\u7684\u9879\u76ee\uff0c\u5305\u62ec\u67b6\u6784\u8bbe\u8ba1\u3001\u6280\u672f\u9009\u578b\u548c\u5f00\u53d1\u5fc3\u5f97\u3002</p> <ul> <li>RadarLive-CN - \u96f7\u8fbe\u6570\u636e\u5b9e\u65f6\u5c55\u793a\u7cfb\u7edf</li> </ul>"},{"location":"#_4","title":"\ud83d\udcda \u6280\u672f\u6808\u5b66\u4e60","text":"<p>\u5404\u79cd\u6280\u672f\u6808\u7684\u5b66\u4e60\u7b14\u8bb0\u548c\u5b9e\u8df5\u7ecf\u9a8c\uff0c\u5305\u62ec\u524d\u7aef\u3001\u540e\u7aef\u3001\u6570\u636e\u5e93\u7b49\u3002</p>"},{"location":"#_5","title":"\ud83d\udca1 \u5f00\u53d1\u7ecf\u9a8c","text":"<p>\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\u3001\u89e3\u51b3\u65b9\u6848\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"#_6","title":"\ud83d\udc64 \u5173\u4e8e\u6211","text":"<p>\u66f4\u591a\u5173\u4e8e\u6211\u7684\u4fe1\u606f\uff0c\u8bf7\u67e5\u770b \u5173\u4e8e \u9875\u9762\u3002</p>"},{"location":"#_7","title":"\ud83d\udd17 \u8054\u7cfb\u65b9\u5f0f","text":"<ul> <li>GitHub: @suxiaoling-s</li> </ul> <p>\u6700\u540e\u66f4\u65b0: November 18, 2025</p>"},{"location":"about/","title":"\u5173\u4e8e","text":"<p>\u8fd9\u4e2a\u535a\u5ba2\u8bb0\u5f55\u6211\u5728\u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u5b66\u4e60\u603b\u7ed3\u3001\u6280\u672f\u601d\u8003\u3002\u5305\u62ec\uff1a</p> <ul> <li>\ud83d\udcda \u9879\u76ee\u6587\u6863 - \u5404\u4e2a\u9879\u76ee\u7684\u6280\u672f\u6587\u6863\u548c\u67b6\u6784\u8bbe\u8ba1</li> <li>\ud83d\udcd6 \u5b66\u4e60\u603b\u7ed3 - \u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6536\u83b7\u548c\u5fc3\u5f97</li> <li>\ud83d\udca1 \u6280\u672f\u6808\u5b66\u4e60 - \u5404\u79cd\u6280\u672f\u6808\u7684\u5b66\u4e60\u7b14\u8bb0</li> <li>\ud83d\udee0\ufe0f \u5f00\u53d1\u7ecf\u9a8c - \u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848</li> </ul>"},{"location":"about/#_2","title":"\u8054\u7cfb\u65b9\u5f0f","text":"<ul> <li>GitHub: @suxiaoling-s</li> </ul> <p>\u6301\u7eed\u66f4\u65b0\u4e2d...</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/","title":"\u5f00\u53d1\u7ecf\u9a8c","text":"<p>\u8bb0\u5f55\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\u3001\u89e3\u51b3\u65b9\u6848\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/#_2","title":"\u5185\u5bb9","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/#_3","title":"\u524d\u7aef\u5f00\u53d1","text":"<ul> <li>\u5927\u91cf\u56fe\u7247\u52a0\u8f7d\u4f18\u5316\u65b9\u6848 - \u667a\u80fd\u9884\u52a0\u8f7d\u3001\u7f13\u5b58\u673a\u5236\u3001\u5185\u5b58\u7ba1\u7406</li> <li>Vue 3 \u72b6\u6001\u540c\u6b65\u6700\u4f73\u5b9e\u8df5 - \u5355\u4e00\u6570\u636e\u6e90\u3001\u8ba1\u7b97\u5c5e\u6027\u3001\u54cd\u5e94\u5f0f\u72b6\u6001\u7ba1\u7406</li> <li>\u9632\u6296\u8282\u6d41\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\u7684\u5e94\u7528 - \u4f7f\u7528\u573a\u666f\u3001\u5b9e\u73b0\u65b9\u5f0f\u3001\u6ce8\u610f\u4e8b\u9879</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/#_4","title":"\u540e\u7aef\u5f00\u53d1","text":"<ul> <li>\u8de8\u57df\u95ee\u9898\u5b8c\u6574\u89e3\u51b3\u65b9\u6848 - CORS \u914d\u7f6e\u3001\u524d\u540e\u7aef\u914d\u5408\u3001\u751f\u4ea7\u73af\u5883\u5b9e\u8df5</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/#_5","title":"\u6027\u80fd\u4f18\u5316","text":"<p>\u5f85\u6dfb\u52a0...</p> <p>\u6301\u7eed\u66f4\u65b0\u4e2d...</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/","title":"Vue 3 \u72b6\u6001\u540c\u6b65\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_1","title":"\u95ee\u9898\u80cc\u666f","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u9047\u5230\u4e86\u4e00\u4e2a\u5178\u578b\u7684\u72b6\u6001\u7ba1\u7406\u95ee\u9898\uff1a\u591a\u4e2a\u7ec4\u4ef6\uff08\u65f6\u95f4\u5217\u8868\u3001\u6ed1\u5757\u3001\u64ad\u653e\u63a7\u5236\u3001\u56fe\u50cf\u663e\u793a\uff09\u9700\u8981\u540c\u6b65\u5f53\u524d\u65f6\u95f4\u7d22\u5f15\uff0c\u5982\u679c\u72b6\u6001\u7ba1\u7406\u4e0d\u5f53\uff0c\u4f1a\u5bfc\u81f4\uff1a</p> <ul> <li>\u7ec4\u4ef6\u95f4\u72b6\u6001\u4e0d\u540c\u6b65</li> <li>\u9700\u8981\u624b\u52a8\u7ef4\u62a4\u591a\u4e2a\u72b6\u6001</li> <li>\u4ee3\u7801\u590d\u6742\uff0c\u96be\u4ee5\u7ef4\u62a4</li> <li>\u5bb9\u6613\u51fa\u73b0 bug</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_2","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u4f7f\u7528 Vue 3 \u7684\u54cd\u5e94\u5f0f\u7cfb\u7edf\u548c\u8ba1\u7b97\u5c5e\u6027\uff0c\u5b9e\u73b0\u5355\u4e00\u6570\u636e\u6e90\uff08Single Source of Truth\uff09\u7684\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_3","title":"\u6838\u5fc3\u601d\u8def","text":"<ol> <li>\u5355\u4e00\u6570\u636e\u6e90 - \u4f7f\u7528\u4e00\u4e2a <code>ref</code> \u7edf\u4e00\u7ba1\u7406\u5f53\u524d\u7d22\u5f15</li> <li>\u8ba1\u7b97\u5c5e\u6027 - \u4f7f\u7528 <code>computed</code> \u81ea\u52a8\u8ba1\u7b97\u6d3e\u751f\u72b6\u6001</li> <li>\u54cd\u5e94\u5f0f\u66f4\u65b0 - \u6240\u6709\u7ec4\u4ef6\u81ea\u52a8\u54cd\u5e94\u72b6\u6001\u53d8\u5316</li> <li>\u96c6\u4e2d\u7ba1\u7406 - \u6240\u6709\u72b6\u6001\u64cd\u4f5c\u90fd\u5728\u4e00\u4e2a\u5730\u65b9</li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_4","title":"\u5b8c\u6574\u5b9e\u73b0","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#1","title":"1. \u7edf\u4e00\u7684\u72b6\u6001\u7ba1\u7406","text":"<pre><code>import { ref, computed, watch } from 'vue'\n\nexport default {\n  setup() {\n    // \u5355\u4e00\u6570\u636e\u6e90\uff1a\u5f53\u524d\u7d22\u5f15\n    const imageList = ref([])\n    const currentIndex = ref(0)\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u81ea\u52a8\u4ece\u7d22\u5f15\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\n    const currentImage = computed(() =&gt; {\n      if (imageList.value.length === 0) return null\n      return imageList.value[currentIndex.value]\n    })\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u65f6\u95f4\u5217\u8868\u9879\uff08\u81ea\u52a8\u540c\u6b65\uff09\n    const timeListItems = computed(() =&gt; {\n      return imageList.value.map((item, index) =&gt; ({\n        key: `${item.timestamp}-${index}`,\n        index,\n        timestamp: item.timestamp,\n        display: formatTimestamp(item.timestamp)\n      })).reverse()\n    })\n\n    return {\n      imageList,\n      currentIndex,      // \u5355\u4e00\u6570\u636e\u6e90\n      currentImage,      // \u81ea\u52a8\u8ba1\u7b97\n      timeListItems     // \u81ea\u52a8\u8ba1\u7b97\n    }\n  }\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#2","title":"2. \u7ec4\u4ef6\u64cd\u4f5c\u65b9\u6cd5","text":"<pre><code>// \u65f6\u95f4\u8f74\u6ed1\u5757\u53d8\u5316 \u2192 \u66f4\u65b0\u7d22\u5f15\nconst handleSliderChange = (value) =&gt; {\n  currentIndex.value = value\n}\n\n// \u65f6\u95f4\u5217\u8868\u70b9\u51fb \u2192 \u66f4\u65b0\u7d22\u5f15\nconst handleTimelineItemClick = (index) =&gt; {\n  currentIndex.value = index\n}\n\n// \u64ad\u653e\u63a7\u5236 \u2192 \u66f4\u65b0\u7d22\u5f15\nconst nextImage = () =&gt; {\n  if (currentIndex.value &lt; imageList.value.length - 1) {\n    currentIndex.value++\n  }\n}\n\nconst previousImage = () =&gt; {\n  if (currentIndex.value &gt; 0) {\n    currentIndex.value--\n  }\n}\n\n// \u81ea\u52a8\u64ad\u653e\u65f6\u81ea\u52a8\u66f4\u65b0\u7d22\u5f15\nconst startAutoPlay = () =&gt; {\n  playInterval.value = setInterval(() =&gt; {\n    if (currentIndex.value &lt; imageList.value.length - 1) {\n      currentIndex.value++\n    } else if (loopEnabled.value) {\n      currentIndex.value = 0  // \u5faa\u73af\u64ad\u653e\n    } else {\n      stopAutoPlay()\n    }\n  }, playbackIntervalMs.value)\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#3","title":"3. \u6a21\u677f\u4e2d\u7684\u4f7f\u7528","text":"<pre><code>&lt;template&gt;\n  &lt;!-- \u65f6\u95f4\u5217\u8868\uff1a\u81ea\u52a8\u9ad8\u4eae\u5f53\u524d\u9879 --&gt;\n  &lt;div class=\"time-list\"&gt;\n    &lt;button\n      v-for=\"item in timeListItems\"\n      :key=\"item.key\"\n      :class=\"{ active: item.index === currentIndex }\"\n      @click=\"handleTimelineItemClick(item.index)\"\n    &gt;\n      {{ item.display }}\n    &lt;/button&gt;\n  &lt;/div&gt;\n\n  &lt;!-- \u65f6\u95f4\u8f74\u6ed1\u5757\uff1a\u53cc\u5411\u7ed1\u5b9a --&gt;\n  &lt;el-slider\n    v-model=\"currentIndex\"\n    :max=\"imageList.length - 1\"\n    @change=\"handleSliderChange\"\n  /&gt;\n\n  &lt;!-- \u5f53\u524d\u56fe\u50cf\uff1a\u81ea\u52a8\u66f4\u65b0 --&gt;\n  &lt;div class=\"image-container\"&gt;\n    &lt;img v-if=\"currentImage\" :src=\"currentImage.url\" /&gt;\n  &lt;/div&gt;\n\n  &lt;!-- \u64ad\u653e\u63a7\u5236\uff1a\u64cd\u4f5c\u7d22\u5f15 --&gt;\n  &lt;div class=\"playback-controls\"&gt;\n    &lt;button @click=\"previousImage\"&gt;\u4e0a\u4e00\u5e27&lt;/button&gt;\n    &lt;button @click=\"nextImage\"&gt;\u4e0b\u4e00\u5e27&lt;/button&gt;\n    &lt;button @click=\"startAutoPlay\"&gt;\u64ad\u653e&lt;/button&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#4","title":"4. \u81ea\u52a8\u540c\u6b65\u673a\u5236","text":"<pre><code>// \u76d1\u542c\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\nwatch(currentIndex, (newIndex) =&gt; {\n  preloadNearbyFrames(newIndex)\n})\n\n// \u6240\u6709\u7ec4\u4ef6\u81ea\u52a8\u54cd\u5e94 currentIndex \u7684\u53d8\u5316\n// - \u65f6\u95f4\u5217\u8868\u81ea\u52a8\u9ad8\u4eae\u5f53\u524d\u9879\n// - \u6ed1\u5757\u81ea\u52a8\u79fb\u52a8\u5230\u5f53\u524d\u4f4d\u7f6e\n// - \u56fe\u50cf\u81ea\u52a8\u66f4\u65b0\n// - \u64ad\u653e\u63a7\u5236\u81ea\u52a8\u66f4\u65b0\u72b6\u6001\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_5","title":"\u4f18\u52bf","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#1_1","title":"1. \u72b6\u6001\u540c\u6b65\u96f6\u5ef6\u8fdf","text":"<p>\u6240\u6709\u7ec4\u4ef6\u90fd\u57fa\u4e8e\u540c\u4e00\u4e2a <code>currentIndex</code>\uff0c\u72b6\u6001\u53d8\u5316\u7acb\u5373\u540c\u6b65\u5230\u6240\u6709\u7ec4\u4ef6\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#2_1","title":"2. \u4ee3\u7801\u7b80\u6d01","text":"<p>\u4e0d\u9700\u8981\u624b\u52a8\u540c\u6b65\u591a\u4e2a\u72b6\u6001\uff0c\u6240\u6709\u903b\u8f91\u96c6\u4e2d\u5728 <code>setup</code> \u51fd\u6570\u4e2d\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#3_1","title":"3. \u6613\u4e8e\u7ef4\u62a4","text":"<p>\u5355\u4e00\u6570\u636e\u6e90\u8ba9\u72b6\u6001\u7ba1\u7406\u53d8\u5f97\u7b80\u5355\uff0c\u4fee\u6539\u72b6\u6001\u53ea\u9700\u8981\u4fee\u6539\u4e00\u4e2a\u5730\u65b9\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#4_1","title":"4. \u7c7b\u578b\u5b89\u5168","text":"<p>\u4f7f\u7528 TypeScript \u65f6\uff0c\u7c7b\u578b\u63a8\u5bfc\u66f4\u51c6\u786e\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_6","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#1_2","title":"1. \u5355\u4e00\u6570\u636e\u6e90\u539f\u5219","text":"<ul> <li>\u4e00\u4e2a\u72b6\u6001\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u5b9a\u4e49</li> <li>\u6240\u6709\u7ec4\u4ef6\u90fd\u4ece\u8fd9\u4e2a\u6570\u636e\u6e90\u8bfb\u53d6</li> <li>\u6240\u6709\u4fee\u6539\u90fd\u901a\u8fc7\u8fd9\u4e2a\u6570\u636e\u6e90</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#2_2","title":"2. \u8ba1\u7b97\u5c5e\u6027\u7684\u4f7f\u7528","text":"<ul> <li>\u6d3e\u751f\u72b6\u6001\u4f7f\u7528 <code>computed</code>\uff0c\u81ea\u52a8\u7f13\u5b58</li> <li>\u907f\u514d\u5728\u6a21\u677f\u4e2d\u8fdb\u884c\u590d\u6742\u8ba1\u7b97</li> <li>\u8ba1\u7b97\u5c5e\u6027\u4f1a\u81ea\u52a8\u8ffd\u8e2a\u4f9d\u8d56</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#3_2","title":"3. \u54cd\u5e94\u5f0f\u66f4\u65b0","text":"<ul> <li>\u4f7f\u7528 <code>ref</code> \u548c <code>reactive</code> \u521b\u5efa\u54cd\u5e94\u5f0f\u72b6\u6001</li> <li>\u6240\u6709\u4f9d\u8d56\u8fd9\u4e2a\u72b6\u6001\u7684\u7ec4\u4ef6\u4f1a\u81ea\u52a8\u66f4\u65b0</li> <li>\u4e0d\u9700\u8981\u624b\u52a8\u89e6\u53d1\u66f4\u65b0</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#4_2","title":"4. \u72b6\u6001\u64cd\u4f5c\u96c6\u4e2d","text":"<ul> <li>\u6240\u6709\u72b6\u6001\u64cd\u4f5c\u65b9\u6cd5\u90fd\u5728 <code>setup</code> \u4e2d\u5b9a\u4e49</li> <li>\u901a\u8fc7 <code>return</code> \u66b4\u9732\u7ed9\u6a21\u677f\u4f7f\u7528</li> <li>\u4fdd\u6301\u903b\u8f91\u6e05\u6670\uff0c\u6613\u4e8e\u7406\u89e3</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_7","title":"\u9002\u7528\u573a\u666f","text":"<p>\u8fd9\u79cd\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f\u9002\u7528\u4e8e\uff1a</p> <ul> <li>\u591a\u4e2a\u7ec4\u4ef6\u9700\u8981\u5171\u4eab\u72b6\u6001</li> <li>\u72b6\u6001\u4e4b\u95f4\u6709\u4f9d\u8d56\u5173\u7cfb</li> <li>\u9700\u8981\u81ea\u52a8\u540c\u6b65\u7684\u573a\u666f</li> <li>\u590d\u6742\u7684\u72b6\u6001\u7ba1\u7406\u9700\u6c42</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/Vue3%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/#_8","title":"\u603b\u7ed3","text":"<p>\u901a\u8fc7\u5355\u4e00\u6570\u636e\u6e90\u548c\u8ba1\u7b97\u5c5e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u4f18\u96c5\u7684\u72b6\u6001\u540c\u6b65\uff1a</p> <ul> <li>\u2705 \u4f7f\u7528 <code>ref</code> \u521b\u5efa\u5355\u4e00\u6570\u636e\u6e90</li> <li>\u2705 \u4f7f\u7528 <code>computed</code> \u8ba1\u7b97\u6d3e\u751f\u72b6\u6001</li> <li>\u2705 \u6240\u6709\u7ec4\u4ef6\u81ea\u52a8\u54cd\u5e94\u72b6\u6001\u53d8\u5316</li> <li>\u2705 \u4ee3\u7801\u7b80\u6d01\uff0c\u6613\u4e8e\u7ef4\u62a4</li> </ul> <p>\u8fd9\u79cd\u65b9\u5f0f\u8ba9\u72b6\u6001\u7ba1\u7406\u53d8\u5f97\u7b80\u5355\u800c\u5f3a\u5927\u3002</p> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/","title":"\u5927\u91cf\u56fe\u7247\u52a0\u8f7d\u4f18\u5316\u65b9\u6848","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_2","title":"\u95ee\u9898\u80cc\u666f","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u9047\u5230\u4e86\u4e00\u4e2a\u5178\u578b\u7684\u6027\u80fd\u95ee\u9898\uff1a\u96f7\u8fbe\u6570\u636e\u53ef\u80fd\u6709\u6570\u5343\u751a\u81f3\u4e0a\u4e07\u5f20\u56fe\u7247\uff0c\u5982\u679c\u4e00\u6b21\u6027\u52a0\u8f7d\u4f1a\u5bfc\u81f4\uff1a</p> <ul> <li>\u6d4f\u89c8\u5668\u5361\u987f\uff0c\u7528\u6237\u4f53\u9a8c\u5dee</li> <li>\u5185\u5b58\u5360\u7528\u8fc7\u9ad8\uff0c\u53ef\u80fd\u5bfc\u81f4\u6d4f\u89c8\u5668\u5d29\u6e83</li> <li>\u9996\u6b21\u52a0\u8f7d\u65f6\u95f4\u8fc7\u957f</li> <li>\u7f51\u7edc\u8bf7\u6c42\u8fc7\u591a\uff0c\u670d\u52a1\u5668\u538b\u529b\u5927</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u7ecf\u8fc7\u5b9e\u8df5\uff0c\u6211\u603b\u7ed3\u51fa\u4e00\u5957\u5b8c\u6574\u7684\u56fe\u7247\u52a0\u8f7d\u4f18\u5316\u65b9\u6848\uff0c\u5305\u62ec\u667a\u80fd\u9884\u52a0\u8f7d\u3001\u7f13\u5b58\u673a\u5236\u3001\u6279\u91cf\u52a0\u8f7d\u7b49\u7b56\u7565\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_4","title":"\u6838\u5fc3\u601d\u8def","text":"<ol> <li>\u53ea\u9884\u52a0\u8f7d\u5f53\u524d\u5e27\u9644\u8fd1\u7684\u56fe\u7247 - \u4e0d\u4e00\u6b21\u6027\u52a0\u8f7d\u6240\u6709\u56fe\u7247</li> <li>\u6839\u636e\u64ad\u653e\u72b6\u6001\u52a8\u6001\u8c03\u6574\u9884\u52a0\u8f7d\u8303\u56f4 - \u64ad\u653e\u65f6\u8303\u56f4\u66f4\u5927\uff0c\u6682\u505c\u65f6\u8303\u56f4\u66f4\u5c0f</li> <li>\u4f7f\u7528 Map \u7f13\u5b58\u5df2\u52a0\u8f7d\u7684\u56fe\u7247\u5bf9\u8c61 - \u907f\u514d\u91cd\u590d\u52a0\u8f7d</li> <li>\u6279\u91cf\u52a0\u8f7d\uff0c\u63a7\u5236\u5e76\u53d1\u6570\u91cf - \u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b</li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_5","title":"\u5b8c\u6574\u5b9e\u73b0","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#1","title":"1. \u56fe\u7247\u7f13\u5b58\u673a\u5236","text":"<pre><code>// \u4f7f\u7528 Map \u5b58\u50a8\u5df2\u52a0\u8f7d\u7684\u56fe\u7247\u5bf9\u8c61\nconst imageCache = ref(new Map())\n\n// \u9884\u52a0\u8f7d\u5355\u5f20\u56fe\u7247\uff08\u5e26\u91cd\u8bd5\u673a\u5236\uff09\nconst preloadImage = (url, retryCount = 0) =&gt; {\n  return new Promise((resolve, reject) =&gt; {\n    // \u68c0\u67e5\u7f13\u5b58\n    if (imageCache.value.has(url)) {\n      resolve(imageCache.value.get(url))\n      return\n    }\n\n    const img = new Image()\n    img.onload = () =&gt; {\n      imageCache.value.set(url, img)  // \u5b58\u5165\u7f13\u5b58\n      resolve(img)\n    }\n    img.onerror = (error) =&gt; {\n      // \u5931\u8d25\u91cd\u8bd5\uff0c\u6700\u591a\u91cd\u8bd52\u6b21\n      if (retryCount &lt; 2) {\n        setTimeout(() =&gt; {\n          preloadImage(url, retryCount + 1).then(resolve).catch(reject)\n        }, 1000 * (retryCount + 1))\n      } else {\n        reject(error)\n      }\n    }\n    img.src = url\n  })\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#2","title":"2. \u667a\u80fd\u9884\u52a0\u8f7d\u7b56\u7565","text":"<pre><code>// \u667a\u80fd\u9884\u52a0\u8f7d\u9644\u8fd1\u5e27\uff08\u6839\u636e\u6570\u636e\u91cf\u52a8\u6001\u8c03\u6574\uff09\nconst preloadNearbyFrames = async (index) =&gt; {\n  if (imageList.value.length === 0) return\n\n  const totalImages = imageList.value.length\n  let range, batchSize, delay\n\n  // \u6839\u636e\u6570\u636e\u91cf\u548c\u64ad\u653e\u72b6\u6001\u8c03\u6574\u7b56\u7565\n  if (isPlaying.value) {\n    // \u64ad\u653e\u65f6\uff1a\u66f4\u5927\u8303\u56f4\uff0c\u66f4\u5feb\u901f\u5ea6\n    if (totalImages &gt; 10000) { \n      range = 30; batchSize = 15; delay = 30 \n    } else if (totalImages &gt; 5000) { \n      range = 40; batchSize = 20; delay = 25 \n    } else { \n      range = 60; batchSize = 30; delay = 15 \n    }\n  } else {\n    // \u6682\u505c\u65f6\uff1a\u8f83\u5c0f\u8303\u56f4\uff0c\u8f83\u6162\u901f\u5ea6\n    if (totalImages &gt; 10000) { \n      range = 30; batchSize = 8; delay = 100 \n    } else if (totalImages &gt; 5000) { \n      range = 40; batchSize = 10; delay = 80 \n    } else { \n      range = 60; batchSize = 15; delay = 50 \n    }\n  }\n\n  // \u8ba1\u7b97\u9884\u52a0\u8f7d\u8303\u56f4\n  const playMultiplier = isPlaying.value ? 3 : 1\n  const effectiveRange = Math.min(range * playMultiplier, totalImages)\n  const startIndex = Math.max(0, index - effectiveRange)\n  const endIndex = Math.min(totalImages - 1, index + effectiveRange)\n\n  // \u5206\u6279\u52a0\u8f7d\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\n  for (let i = startIndex; i &lt;= endIndex; i += batchSize) {\n    const batchEnd = Math.min(i + batchSize - 1, endIndex)\n    const batch = []\n\n    for (let j = i; j &lt;= batchEnd; j++) {\n      if (imageList.value[j]?.url &amp;&amp; !imageCache.value.has(imageList.value[j].url)) {\n        batch.push(preloadImage(imageList.value[j].url).catch(() =&gt; {}))\n      }\n    }\n\n    if (batch.length &gt; 0) {\n      await Promise.allSettled(batch)\n      // \u5ef6\u8fdf\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\n      if (i + batchSize &lt;= endIndex) {\n        await new Promise(resolve =&gt; setTimeout(resolve, delay))\n      }\n    }\n  }\n}\n\n// \u76d1\u542c\u5f53\u524d\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\nwatch(currentIndex, (newIndex) =&gt; {\n  preloadNearbyFrames(newIndex)\n})\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#3","title":"3. \u6570\u636e\u7f13\u5b58\u673a\u5236","text":"<pre><code>// \u6570\u636e\u7f13\u5b58\uff08Map + localStorage\uff09\nconst CACHE_TTL = 15 * 60 * 1000  // 15\u5206\u949f\nconst dataCache = ref(new Map())\n\nconst cacheData = (key, data) =&gt; {\n  const item = { data, timestamp: Date.now(), ttl: CACHE_TTL }\n  dataCache.value.set(key, item)\n  try {\n    localStorage.setItem(`radar-cache-${key}`, JSON.stringify(item))\n  } catch (e) {\n    // localStorage \u53ef\u80fd\u5df2\u6ee1\uff0c\u5ffd\u7565\u9519\u8bef\n  }\n}\n\nconst getCachedData = (key) =&gt; {\n  // \u5148\u68c0\u67e5\u5185\u5b58\u7f13\u5b58\n  if (dataCache.value.has(key)) {\n    const item = dataCache.value.get(key)\n    if (Date.now() - item.timestamp &lt; item.ttl) {\n      return item.data\n    }\n    dataCache.value.delete(key)\n  }\n\n  // \u518d\u68c0\u67e5 localStorage\n  try {\n    const stored = localStorage.getItem(`radar-cache-${key}`)\n    if (stored) {\n      const item = JSON.parse(stored)\n      if (Date.now() - item.timestamp &lt; item.ttl) {\n        dataCache.value.set(key, item)\n        return item.data\n      } else {\n        localStorage.removeItem(`radar-cache-${key}`)\n      }\n    }\n  } catch (e) {\n    // \u89e3\u6790\u5931\u8d25\uff0c\u5ffd\u7565\n  }\n  return null\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_6","title":"\u4f18\u5316\u6548\u679c","text":"<p>\u5728 RadarLive-CN \u9879\u76ee\u4e2d\u5e94\u7528\u8fd9\u4e9b\u4f18\u5316\u540e\uff1a</p> <ul> <li>\u2705 \u5185\u5b58\u5360\u7528\u964d\u4f4e 80%+ - \u901a\u8fc7\u667a\u80fd\u9884\u52a0\u8f7d\uff0c\u53ea\u52a0\u8f7d\u5fc5\u8981\u7684\u56fe\u7247</li> <li>\u2705 \u64ad\u653e\u6d41\u7545\u5ea6\u63d0\u5347 - \u65e0\u660e\u663e\u5361\u987f\uff0c\u64ad\u653e\u4f53\u9a8c\u6d41\u7545</li> <li>\u2705 \u9996\u6b21\u52a0\u8f7d\u65f6\u95f4\u7f29\u77ed - \u901a\u8fc7\u7f13\u5b58\u673a\u5236\uff0c\u91cd\u590d\u8bbf\u95ee\u66f4\u5feb</li> <li>\u2705 \u7f51\u7edc\u8bf7\u6c42\u51cf\u5c11 - \u901a\u8fc7\u7f13\u5b58\u548c\u9884\u52a0\u8f7d\u7b56\u7565\uff0c\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u8bf7\u6c42</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_7","title":"\u5173\u952e\u8981\u70b9","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#1_1","title":"1. \u9884\u52a0\u8f7d\u8303\u56f4\u7684\u9009\u62e9","text":"<ul> <li>\u64ad\u653e\u65f6\uff1a\u9700\u8981\u66f4\u5927\u7684\u9884\u52a0\u8f7d\u8303\u56f4\uff0c\u786e\u4fdd\u64ad\u653e\u6d41\u7545</li> <li>\u6682\u505c\u65f6\uff1a\u53ef\u4ee5\u51cf\u5c0f\u8303\u56f4\uff0c\u8282\u7701\u8d44\u6e90</li> <li>\u6570\u636e\u91cf\u5927\u65f6\uff1a\u9700\u8981\u66f4\u4fdd\u5b88\u7684\u7b56\u7565\uff0c\u907f\u514d\u5185\u5b58\u6ea2\u51fa</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#2_1","title":"2. \u6279\u91cf\u52a0\u8f7d\u7b56\u7565","text":"<ul> <li>\u4f7f\u7528 <code>Promise.allSettled</code> \u6279\u91cf\u52a0\u8f7d\uff0c\u63d0\u9ad8\u6548\u7387</li> <li>\u63a7\u5236\u6bcf\u6279\u7684\u6570\u91cf\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b</li> <li>\u5728\u6279\u6b21\u4e4b\u95f4\u6dfb\u52a0\u5ef6\u8fdf\uff0c\u7ed9\u4e3b\u7ebf\u7a0b\u5598\u606f\u673a\u4f1a</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#3_1","title":"3. \u7f13\u5b58\u7b56\u7565","text":"<ul> <li>\u5185\u5b58\u7f13\u5b58\uff1a\u5feb\u901f\u8bbf\u95ee\uff0c\u4f46\u5237\u65b0\u540e\u4e22\u5931</li> <li>localStorage \u7f13\u5b58\uff1a\u6301\u4e45\u5316\uff0c\u4f46\u5bb9\u91cf\u6709\u9650</li> <li>TTL \u673a\u5236\uff1a\u81ea\u52a8\u6e05\u7406\u8fc7\u671f\u7f13\u5b58\uff0c\u4fdd\u6301\u6570\u636e\u65b0\u9c9c\u5ea6</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#4","title":"4. \u9519\u8bef\u5904\u7406","text":"<ul> <li>\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\u65f6\u81ea\u52a8\u91cd\u8bd5</li> <li>\u7f13\u5b58\u8bbf\u95ee\u5931\u8d25\u65f6\u4f18\u96c5\u964d\u7ea7</li> <li>\u907f\u514d\u56e0\u5355\u4e2a\u56fe\u7247\u52a0\u8f7d\u5931\u8d25\u5f71\u54cd\u6574\u4f53\u4f53\u9a8c</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_8","title":"\u9002\u7528\u573a\u666f","text":"<p>\u8fd9\u5957\u4f18\u5316\u65b9\u6848\u9002\u7528\u4e8e\uff1a</p> <ul> <li>\u56fe\u7247\u6570\u91cf\u591a\uff08\u6570\u767e\u5230\u6570\u4e07\u5f20\uff09</li> <li>\u9700\u8981\u6d41\u7545\u64ad\u653e\u7684\u573a\u666f</li> <li>\u5185\u5b58\u53d7\u9650\u7684\u73af\u5883</li> <li>\u9700\u8981\u5feb\u901f\u54cd\u5e94\u7684\u5e94\u7528</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E5%A4%A7%E9%87%8F%E5%9B%BE%E7%89%87%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/#_9","title":"\u603b\u7ed3","text":"<p>\u901a\u8fc7\u667a\u80fd\u9884\u52a0\u8f7d\u3001\u7f13\u5b58\u673a\u5236\u548c\u6279\u91cf\u52a0\u8f7d\u7b56\u7565\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u6548\u89e3\u51b3\u5927\u91cf\u56fe\u7247\u52a0\u8f7d\u7684\u6027\u80fd\u95ee\u9898\u3002\u5173\u952e\u662f\u8981\uff1a</p> <ul> <li>\u2705 \u6839\u636e\u5b9e\u9645\u573a\u666f\u8c03\u6574\u9884\u52a0\u8f7d\u8303\u56f4</li> <li>\u2705 \u5408\u7406\u4f7f\u7528\u7f13\u5b58\uff0c\u5e73\u8861\u5185\u5b58\u548c\u6027\u80fd</li> <li>\u2705 \u63a7\u5236\u5e76\u53d1\u6570\u91cf\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b</li> <li>\u2705 \u76d1\u63a7\u6027\u80fd\u6307\u6807\uff0c\u6301\u7eed\u4f18\u5316</li> </ul> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","title":"\u8de8\u57df\u95ee\u9898\u5b8c\u6574\u89e3\u51b3\u65b9\u6848","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_2","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u9047\u5230\u4e86\u5178\u578b\u7684\u8de8\u57df\u95ee\u9898\uff1a\u524d\u7aef\u8fd0\u884c\u5728 <code>http://localhost:3000</code>\uff0c\u540e\u7aef\u8fd0\u884c\u5728 <code>http://localhost:8000</code>\uff0c\u6d4f\u89c8\u5668\u963b\u6b62\u8de8\u57df\u8bf7\u6c42\u3002\u672c\u6587\u5206\u4eab\u5b8c\u6574\u7684\u8de8\u57df\u89e3\u51b3\u65b9\u6848\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_3","title":"\u4ec0\u4e48\u662f\u8de8\u57df","text":"<p>\u8de8\u57df\u662f\u6307\u6d4f\u89c8\u5668\u963b\u6b62\u4ece\u4e00\u4e2a\u57df\u540d\u7684\u7f51\u9875\u5411\u53e6\u4e00\u4e2a\u57df\u540d\u7684\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\u3002\u8fd9\u662f\u6d4f\u89c8\u5668\u7684\u540c\u6e90\u7b56\u7565\uff08Same-Origin Policy\uff09\u5bfc\u81f4\u7684\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_4","title":"\u540c\u6e90\u7b56\u7565","text":"<p>\u540c\u6e90\u662f\u6307\u534f\u8bae\u3001\u57df\u540d\u3001\u7aef\u53e3\u90fd\u76f8\u540c\u3002\u4ee5\u4e0b\u60c5\u51b5\u5c5e\u4e8e\u8de8\u57df\uff1a</p> <ul> <li><code>http://localhost:3000</code> \u2192 <code>http://localhost:8000</code> \u274c</li> <li><code>https://example.com</code> \u2192 <code>http://example.com</code> \u274c</li> <li><code>http://example.com:3000</code> \u2192 <code>http://example.com:8000</code> \u274c</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#cors","title":"\u89e3\u51b3\u65b9\u6848\uff1aCORS","text":"<p>CORS\uff08Cross-Origin Resource Sharing\uff09\u662f W3C \u6807\u51c6\uff0c\u5141\u8bb8\u670d\u52a1\u5668\u58f0\u660e\u54ea\u4e9b\u6e90\u53ef\u4ee5\u8bbf\u95ee\u8d44\u6e90\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#fastapi-cors","title":"FastAPI CORS \u914d\u7f6e","text":"<pre><code>from fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\nimport os\n\napp = FastAPI(title=\"Radar Live CN API\", version=\"1.0.0\")\n\n# CORS \u914d\u7f6e\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=os.getenv(\"CORS_ORIGINS\", \"*\").split(\",\"),  # \u5141\u8bb8\u7684\u6e90\n    allow_credentials=True,                                    # \u5141\u8bb8\u643a\u5e26\u51ed\u8bc1\n    allow_methods=[\"*\"],                                       # \u5141\u8bb8\u6240\u6709HTTP\u65b9\u6cd5\n    allow_headers=[\"*\"],                                       # \u5141\u8bb8\u6240\u6709\u8bf7\u6c42\u5934\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_5","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<p>\u5f00\u53d1\u73af\u5883\uff08<code>.env</code> \u6216 <code>docker-compose.yml</code>\uff09\uff1a</p> <pre><code># \u5141\u8bb8\u6240\u6709\u6e90\nCORS_ORIGINS: \"*\"\n</code></pre> <p>\u751f\u4ea7\u73af\u5883\uff1a</p> <pre><code># \u53ea\u5141\u8bb8\u7279\u5b9a\u57df\u540d\nCORS_ORIGINS: \"https://yourdomain.com,https://www.yourdomain.com\"\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_6","title":"\u524d\u7aef\u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#axios","title":"Axios \u5b9e\u4f8b\u914d\u7f6e","text":"<pre><code>import axios from 'axios'\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api'\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 60000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#token","title":"\u8bf7\u6c42\u62e6\u622a\u5668\uff08\u81ea\u52a8\u6dfb\u52a0 Token\uff09","text":"<pre><code>apiClient.interceptors.request.use(\n  config =&gt; {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  },\n  error =&gt; Promise.reject(error)\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#token_1","title":"\u54cd\u5e94\u62e6\u622a\u5668\uff08Token \u5237\u65b0\uff09","text":"<pre><code>apiClient.interceptors.response.use(\n  response =&gt; response.data,\n  async error =&gt; {\n    // 401 \u9519\u8bef\u65f6\u5c1d\u8bd5\u5237\u65b0 Token\n    const originalRequest = error.config\n    if (error.response?.status === 401 &amp;&amp; !originalRequest._retry) {\n      const refreshToken = localStorage.getItem('refresh_token')\n      if (refreshToken) {\n        try {\n          const resp = await axios.post(`${API_BASE_URL}/refresh`, { \n            refresh_token: refreshToken \n          })\n          const newAccess = resp.data?.access_token\n          localStorage.setItem('auth_token', newAccess)\n          originalRequest.headers.Authorization = `Bearer ${newAccess}`\n          return apiClient(originalRequest)\n        } catch (refreshErr) {\n          // \u5237\u65b0\u5931\u8d25\uff0c\u8df3\u8f6c\u767b\u5f55\n          localStorage.clear()\n          window.location.reload()\n        }\n      }\n    }\n    return Promise.reject(error)\n  }\n)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_7","title":"\u4e0d\u540c\u573a\u666f\u7684\u914d\u7f6e","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#1","title":"1. \u5f00\u53d1\u73af\u5883","text":"<pre><code># \u5141\u8bb8\u6240\u6709\u6e90\uff0c\u65b9\u4fbf\u5f00\u53d1\u8c03\u8bd5\nallow_origins=[\"*\"]\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#2","title":"2. \u751f\u4ea7\u73af\u5883","text":"<pre><code># \u53ea\u5141\u8bb8\u7279\u5b9a\u57df\u540d\uff0c\u63d0\u9ad8\u5b89\u5168\u6027\nallow_origins=[\n    \"https://yourdomain.com\",\n    \"https://www.yourdomain.com\"\n]\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#3","title":"3. \u643a\u5e26\u51ed\u8bc1","text":"<pre><code># \u5141\u8bb8\u643a\u5e26 Cookie \u7b49\u51ed\u8bc1\nallow_credentials=True\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#4","title":"4. \u9884\u68c0\u8bf7\u6c42","text":"<p>\u5bf9\u4e8e\u590d\u6742\u8bf7\u6c42\uff08\u5982 PUT\u3001DELETE\uff09\uff0c\u6d4f\u89c8\u5668\u4f1a\u5148\u53d1\u9001 OPTIONS \u9884\u68c0\u8bf7\u6c42\u3002FastAPI \u7684 CORS \u4e2d\u95f4\u4ef6\u4f1a\u81ea\u52a8\u5904\u7406\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_8","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#1_1","title":"1. \u9884\u68c0\u8bf7\u6c42\u5931\u8d25","text":"<p>\u95ee\u9898\uff1aOPTIONS \u8bf7\u6c42\u8fd4\u56de 405 \u6216 404</p> <p>\u89e3\u51b3\uff1a\u786e\u4fdd CORS \u4e2d\u95f4\u4ef6\u6b63\u786e\u914d\u7f6e\uff0c\u5141\u8bb8 OPTIONS \u65b9\u6cd5</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#2_1","title":"2. \u51ed\u8bc1\u65e0\u6cd5\u643a\u5e26","text":"<p>\u95ee\u9898\uff1a\u8bbe\u7f6e\u4e86 <code>allow_credentials=True</code>\uff0c\u4f46 Cookie \u65e0\u6cd5\u643a\u5e26</p> <p>\u89e3\u51b3\uff1a - \u786e\u4fdd <code>allow_origins</code> \u4e0d\u80fd\u662f <code>[\"*\"]</code>\uff0c\u5fc5\u987b\u6307\u5b9a\u5177\u4f53\u57df\u540d - \u524d\u7aef\u8bf7\u6c42\u9700\u8981\u8bbe\u7f6e <code>withCredentials: true</code></p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#3_1","title":"3. \u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u88ab\u963b\u6b62","text":"<p>\u95ee\u9898\uff1a\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\uff08\u5982 <code>X-Custom-Header</code>\uff09\u88ab\u963b\u6b62</p> <p>\u89e3\u51b3\uff1a\u5728 <code>allow_headers</code> \u4e2d\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_9","title":"\u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#1_2","title":"1. \u751f\u4ea7\u73af\u5883\u9650\u5236\u6e90","text":"<pre><code># \u751f\u4ea7\u73af\u5883\uff1a\u53ea\u5141\u8bb8\u7279\u5b9a\u57df\u540d\nallow_origins=[\n    \"https://yourdomain.com\",\n    \"https://www.yourdomain.com\"\n]\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#2-http","title":"2. \u9650\u5236 HTTP \u65b9\u6cd5","text":"<pre><code># \u53ea\u5141\u8bb8\u5fc5\u8981\u7684 HTTP \u65b9\u6cd5\nallow_methods=[\"GET\", \"POST\", \"PUT\", \"DELETE\"]\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#3_2","title":"3. \u9650\u5236\u8bf7\u6c42\u5934","text":"<pre><code># \u53ea\u5141\u8bb8\u5fc5\u8981\u7684\u8bf7\u6c42\u5934\nallow_headers=[\"Content-Type\", \"Authorization\"]\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E5%AE%8C%E6%95%B4%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#_10","title":"\u603b\u7ed3","text":"<p>\u8de8\u57df\u95ee\u9898\u7684\u5b8c\u6574\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u2705 \u4f7f\u7528 CORS \u4e2d\u95f4\u4ef6\u914d\u7f6e\u5141\u8bb8\u7684\u6e90</li> <li>\u2705 \u5f00\u53d1\u73af\u5883\u5141\u8bb8\u6240\u6709\u6e90\uff0c\u751f\u4ea7\u73af\u5883\u9650\u5236\u7279\u5b9a\u57df\u540d</li> <li>\u2705 \u5408\u7406\u914d\u7f6e\u51ed\u8bc1\u3001\u65b9\u6cd5\u3001\u8bf7\u6c42\u5934</li> <li>\u2705 \u524d\u7aef\u6b63\u786e\u914d\u7f6e\u8bf7\u6c42\u62e6\u622a\u5668\u548c\u54cd\u5e94\u62e6\u622a\u5668</li> </ul> <p>\u901a\u8fc7\u5408\u7406\u7684 CORS \u914d\u7f6e\uff0c\u6211\u4eec\u53ef\u4ee5\u5b89\u5168\u5730\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u3002</p> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/","title":"\u9632\u6296\u8282\u6d41\u5728\u524d\u7aef\u5f00\u53d1\u4e2d\u7684\u5e94\u7528","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_2","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u6df1\u5165\u5b66\u4e60\u4e86\u9632\u6296\uff08debounce\uff09\u548c\u8282\u6d41\uff08throttle\uff09\u7684\u4f7f\u7528\u3002\u901a\u8fc7\u5408\u7406\u5e94\u7528\u8fd9\u4e9b\u6280\u5de7\uff0c\u663e\u8457\u63d0\u5347\u4e86\u7528\u6237\u4f53\u9a8c\u548c\u6027\u80fd\u3002\u672c\u6587\u5206\u4eab\u6211\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u7ecf\u9a8c\u548c\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_3","title":"\u4ec0\u4e48\u662f\u9632\u6296\u548c\u8282\u6d41","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#debounce","title":"\u9632\u6296\uff08Debounce\uff09","text":"<p>\u9632\u6296\u662f\u6307\u5728\u4e8b\u4ef6\u88ab\u89e6\u53d1 n \u79d2\u540e\u518d\u6267\u884c\u56de\u8c03\uff0c\u5982\u679c\u5728\u8fd9 n \u79d2\u5185\u53c8\u88ab\u89e6\u53d1\uff0c\u5219\u91cd\u65b0\u8ba1\u65f6\u3002</p> <p>\u9002\u7528\u573a\u666f\uff1a - \u641c\u7d22\u6846\u8f93\u5165 - \u7a97\u53e3 resize - \u8868\u5355\u9a8c\u8bc1</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#throttle","title":"\u8282\u6d41\uff08Throttle\uff09","text":"<p>\u8282\u6d41\u662f\u6307\u89c4\u5b9a\u5728\u4e00\u4e2a\u5355\u4f4d\u65f6\u95f4\u5185\uff0c\u53ea\u80fd\u89e6\u53d1\u4e00\u6b21\u51fd\u6570\u3002\u5982\u679c\u8fd9\u4e2a\u5355\u4f4d\u65f6\u95f4\u5185\u89e6\u53d1\u591a\u6b21\u51fd\u6570\uff0c\u53ea\u6709\u4e00\u6b21\u751f\u6548\u3002</p> <p>\u9002\u7528\u573a\u666f\uff1a - \u6eda\u52a8\u4e8b\u4ef6 - \u9f20\u6807\u79fb\u52a8 - \u9891\u7e41\u70b9\u51fb</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_4","title":"\u9879\u76ee\u4e2d\u7684\u5b9e\u9645\u5e94\u7528","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#1","title":"1. \u7ad9\u70b9\u5207\u6362\u9632\u6296","text":"<pre><code>let stationChangeTimer = null\n\nconst scheduleStationChange = (nextStation) =&gt; {\n  // \u6e05\u9664\u4e4b\u524d\u7684\u5b9a\u65f6\u5668\n  clearStationChangeTimer()\n  // \u53d6\u6d88\u4e4b\u524d\u7684\u8bf7\u6c42\n  cancelStationRequests()\n\n  // \u8bbe\u7f6e\u65b0\u7684\u5b9a\u65f6\u5668\n  stationChangeTimer = setTimeout(() =&gt; {\n    stationChangeTimer = null\n    runStationChange(nextStation)  // \u6267\u884c\u5207\u6362\n  }, 300)  // 300ms \u9632\u6296\u5ef6\u8fdf\n}\n\nconst clearStationChangeTimer = () =&gt; {\n  if (stationChangeTimer) {\n    clearTimeout(stationChangeTimer)\n    stationChangeTimer = null\n  }\n}\n</code></pre> <p>\u6548\u679c\uff1a - \u7528\u6237\u5feb\u901f\u5207\u6362\u7ad9\u70b9\u65f6\uff0c\u53ea\u6267\u884c\u6700\u540e\u4e00\u6b21\u5207\u6362 - \u51cf\u5c11\u4e0d\u5fc5\u8981\u7684 API \u8bf7\u6c42 - \u63d0\u5347\u7528\u6237\u4f53\u9a8c</p>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#2","title":"2. \u533a\u57df\u5207\u6362\u9632\u6296","text":"<pre><code>let regionChangeTimer = null\n\nconst scheduleRegionChange = (nextRegion) =&gt; {\n  clearRegionChangeTimer()\n  regionChangeTimer = setTimeout(() =&gt; {\n    regionChangeTimer = null\n    runRegionChange(nextRegion)\n  }, 300)\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#3","title":"3. \u8bf7\u6c42\u53d6\u6d88\u673a\u5236","text":"<pre><code>const activeStationController = ref(null)\n\nconst cancelStationRequests = () =&gt; {\n  if (activeStationController.value) {\n    activeStationController.value.abort()  // \u53d6\u6d88\u8bf7\u6c42\n    activeStationController.value = null\n  }\n}\n\nconst runStationChange = async (nextStation) =&gt; {\n  const controller = new AbortController()\n  activeStationController.value = controller\n\n  try {\n    await onStationChange(nextStation, requestId, controller)\n  } catch (error) {\n    if (!isAbortError(error)) {\n      console.error('\u7ad9\u70b9\u5207\u6362\u5931\u8d25:', error)\n    }\n  }\n}\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_5","title":"\u901a\u7528\u9632\u6296\u51fd\u6570\u5b9e\u73b0","text":"<pre><code>function debounce(func, wait) {\n  let timeout\n  return function executedFunction(...args) {\n    const later = () =&gt; {\n      clearTimeout(timeout)\n      func(...args)\n    }\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n  }\n}\n\n// \u4f7f\u7528\nconst handleSearch = debounce((query) =&gt; {\n  // \u6267\u884c\u641c\u7d22\n  searchAPI(query)\n}, 300)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_6","title":"\u901a\u7528\u8282\u6d41\u51fd\u6570\u5b9e\u73b0","text":"<pre><code>function throttle(func, limit) {\n  let inThrottle\n  return function executedFunction(...args) {\n    if (!inThrottle) {\n      func(...args)\n      inThrottle = true\n      setTimeout(() =&gt; inThrottle = false, limit)\n    }\n  }\n}\n\n// \u4f7f\u7528\nconst handleScroll = throttle(() =&gt; {\n  // \u5904\u7406\u6eda\u52a8\n  updateScrollPosition()\n}, 100)\n</code></pre>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_7","title":"\u4f7f\u7528\u573a\u666f\u603b\u7ed3","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_8","title":"\u9632\u6296\u9002\u7528\u573a\u666f","text":"<ol> <li>\u641c\u7d22\u6846\u8f93\u5165\uff1a\u7528\u6237\u8f93\u5165\u505c\u6b62\u540e\u624d\u53d1\u9001\u8bf7\u6c42</li> <li>\u8868\u5355\u9a8c\u8bc1\uff1a\u7528\u6237\u8f93\u5165\u505c\u6b62\u540e\u624d\u9a8c\u8bc1</li> <li>\u7a97\u53e3 resize\uff1a\u7a97\u53e3\u5927\u5c0f\u8c03\u6574\u505c\u6b62\u540e\u624d\u8ba1\u7b97\u5e03\u5c40</li> <li>\u6309\u94ae\u70b9\u51fb\uff1a\u9632\u6b62\u91cd\u590d\u63d0\u4ea4</li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_9","title":"\u8282\u6d41\u9002\u7528\u573a\u666f","text":"<ol> <li>\u6eda\u52a8\u4e8b\u4ef6\uff1a\u9650\u5236\u6eda\u52a8\u5904\u7406\u9891\u7387</li> <li>\u9f20\u6807\u79fb\u52a8\uff1a\u9650\u5236\u9f20\u6807\u79fb\u52a8\u5904\u7406\u9891\u7387</li> <li>\u9891\u7e41\u70b9\u51fb\uff1a\u9650\u5236\u70b9\u51fb\u5904\u7406\u9891\u7387</li> <li>\u5b9e\u65f6\u6570\u636e\u66f4\u65b0\uff1a\u9650\u5236\u66f4\u65b0\u9891\u7387</li> </ol>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_10","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#1_1","title":"1. \u5ef6\u8fdf\u65f6\u95f4\u7684\u9009\u62e9","text":"<ul> <li>\u9632\u6296\uff1a\u901a\u5e38 200-500ms\uff0c\u6839\u636e\u7528\u6237\u64cd\u4f5c\u4e60\u60ef\u8c03\u6574</li> <li>\u8282\u6d41\uff1a\u901a\u5e38 100-300ms\uff0c\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#2_1","title":"2. \u7ed3\u5408\u8bf7\u6c42\u53d6\u6d88","text":"<ul> <li>\u4f7f\u7528 <code>AbortController</code> \u53d6\u6d88\u8fc7\u65f6\u8bf7\u6c42</li> <li>\u907f\u514d\u8d44\u6e90\u6d6a\u8d39</li> <li>\u63d0\u5347\u7528\u6237\u4f53\u9a8c</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#3_1","title":"3. \u6e05\u7406\u673a\u5236","text":"<ul> <li>\u7ec4\u4ef6\u5378\u8f7d\u65f6\u6e05\u7406\u5b9a\u65f6\u5668</li> <li>\u907f\u514d\u5185\u5b58\u6cc4\u6f0f</li> <li>\u4f7f\u7528 <code>onUnmounted</code> \u94a9\u5b50</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#4","title":"4. \u6027\u80fd\u76d1\u63a7","text":"<ul> <li>\u76d1\u63a7\u9632\u6296/\u8282\u6d41\u6548\u679c</li> <li>\u6839\u636e\u5b9e\u9645\u6570\u636e\u8c03\u6574\u53c2\u6570</li> <li>\u6301\u7eed\u4f18\u5316</li> </ul>"},{"location":"%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/%E9%98%B2%E6%8A%96%E8%8A%82%E6%B5%81%E5%9C%A8%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/#_11","title":"\u603b\u7ed3","text":"<p>\u9632\u6296\u548c\u8282\u6d41\u662f\u524d\u7aef\u6027\u80fd\u4f18\u5316\u7684\u91cd\u8981\u6280\u5de7\uff1a</p> <ul> <li>\u2705 \u9632\u6296\uff1a\u5ef6\u8fdf\u6267\u884c\uff0c\u9002\u5408\u641c\u7d22\u3001\u9a8c\u8bc1\u7b49\u573a\u666f</li> <li>\u2705 \u8282\u6d41\uff1a\u9650\u5236\u9891\u7387\uff0c\u9002\u5408\u6eda\u52a8\u3001\u79fb\u52a8\u7b49\u573a\u666f</li> <li>\u2705 \u7ed3\u5408\u8bf7\u6c42\u53d6\u6d88\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c</li> <li>\u2705 \u5408\u7406\u9009\u62e9\u5ef6\u8fdf\u65f6\u95f4\uff0c\u5e73\u8861\u6027\u80fd\u548c\u4f53\u9a8c</li> </ul> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/","title":"\u6280\u672f\u6808\u5b66\u4e60","text":"<p>\u8bb0\u5f55\u5404\u79cd\u6280\u672f\u6808\u7684\u5b66\u4e60\u7b14\u8bb0\u548c\u5b9e\u8df5\u7ecf\u9a8c\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/#_2","title":"\u5185\u5bb9","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/#_3","title":"\u524d\u7aef\u6280\u672f","text":"<ul> <li>Vue 3 \u7ec4\u5408\u5f0f API \u6df1\u5165\u7406\u89e3 - \u4ece\u9879\u76ee\u5b9e\u6218\u4e2d\u5b66\u4e60\u7ec4\u5408\u5f0f API \u7684\u4f7f\u7528</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/#_4","title":"\u540e\u7aef\u6280\u672f","text":"<ul> <li>FastAPI \u5f02\u6b65\u7f16\u7a0b\u5b9e\u8df5 - \u5f02\u6b65 API \u5f00\u53d1\u4e0e\u6027\u80fd\u4f18\u5316</li> <li>PostgreSQL \u7d22\u5f15\u4f18\u5316\u5b9e\u6218 - \u6570\u636e\u5e93\u7d22\u5f15\u8bbe\u8ba1\u4e0e\u67e5\u8be2\u4f18\u5316</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/#_5","title":"\u90e8\u7f72\u8fd0\u7ef4","text":"<ul> <li>Docker \u5bb9\u5668\u5316\u90e8\u7f72\u6307\u5357 - \u591a\u9636\u6bb5\u6784\u5efa\u3001\u7f51\u7edc\u914d\u7f6e\u3001\u751f\u4ea7\u73af\u5883\u5b9e\u8df5</li> </ul> <p>\u6301\u7eed\u66f4\u65b0\u4e2d...</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/","title":"Docker \u5bb9\u5668\u5316\u90e8\u7f72\u6307\u5357","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_1","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u6df1\u5165\u5b66\u4e60\u4e86 Docker \u548c Docker Compose \u7684\u4f7f\u7528\u3002\u901a\u8fc7\u5bb9\u5668\u5316\u90e8\u7f72\uff0c\u5b9e\u73b0\u4e86\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u7684\u4e00\u81f4\u6027\u3002\u672c\u6587\u5206\u4eab\u6211\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u5bb9\u5668\u5316\u5b9e\u8df5\u548c\u90e8\u7f72\u5fc3\u5f97\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#docker_1","title":"Docker \u57fa\u7840","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#docker_2","title":"\u4ec0\u4e48\u662f Docker","text":"<p>Docker \u662f\u4e00\u4e2a\u5bb9\u5668\u5316\u5e73\u53f0\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u53ca\u5176\u4f9d\u8d56\u6253\u5305\u6210\u5bb9\u5668\uff0c\u5b9e\u73b0\"\u4e00\u6b21\u6784\u5efa\uff0c\u5230\u5904\u8fd0\u884c\"\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#docker_3","title":"Docker \u6838\u5fc3\u6982\u5ff5","text":"<ul> <li>\u955c\u50cf\uff08Image\uff09\uff1a\u5e94\u7528\u7684\u53ea\u8bfb\u6a21\u677f</li> <li>\u5bb9\u5668\uff08Container\uff09\uff1a\u955c\u50cf\u7684\u8fd0\u884c\u5b9e\u4f8b</li> <li>Dockerfile\uff1a\u6784\u5efa\u955c\u50cf\u7684\u6307\u4ee4\u6587\u4ef6</li> <li>Docker Compose\uff1a\u591a\u5bb9\u5668\u5e94\u7528\u7f16\u6392\u5de5\u5177</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#docker_4","title":"\u9879\u76ee\u4e2d\u7684 Docker \u5b9e\u8df5","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#dockerfile","title":"\u540e\u7aef Dockerfile","text":"<pre><code>FROM python:3.11-slim\n\nWORKDIR /app\n\n# \u5b89\u88c5\u4f9d\u8d56\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# \u590d\u5236\u4ee3\u7801\nCOPY . .\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 8000\n\n# \u542f\u52a8\u547d\u4ee4\nCMD [\"uvicorn\", \"main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#dockerfile_1","title":"\u524d\u7aef Dockerfile\uff08\u591a\u9636\u6bb5\u6784\u5efa\uff09","text":"<pre><code># \u6784\u5efa\u9636\u6bb5\nFROM node:18-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm install\nCOPY . .\nRUN npm run build\n\n# \u8fd0\u884c\u9636\u6bb5\nFROM nginx:alpine\nCOPY --from=builder /app/dist /usr/share/nginx/html\nEXPOSE 80\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#docker-compose","title":"Docker Compose \u914d\u7f6e","text":"<pre><code>services:\n  backend:\n    build: ./backend\n    environment:\n      DATABASE_URL: postgresql+asyncpg://postgres:password@db:5432/postgres\n      RADAR_DATA_PATH: /mnt/data/radar/china/MOSAIC\n    volumes:\n      - /mnt/data/radar/china/MOSAIC:/mnt/data/radar/china/MOSAIC:ro\n    ports:\n      - \"8020:8000\"\n    networks:\n      - radarlive-net\n    depends_on:\n      - db\n\n  frontend:\n    build: ./frontend\n    ports:\n      - \"3000:80\"\n    depends_on:\n      - backend\n    networks:\n      - radarlive-net\n\n  db:\n    image: postgres:15-alpine\n    environment:\n      POSTGRES_USER: postgres\n      POSTGRES_PASSWORD: password\n      POSTGRES_DB: postgres\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n    networks:\n      - radarlive-net\n\nnetworks:\n  radarlive-net:\n    driver: bridge\n\nvolumes:\n  postgres_data:\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_2","title":"\u591a\u9636\u6bb5\u6784\u5efa\u7684\u4f18\u52bf","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_3","title":"\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef","text":"<ul> <li>\u6784\u5efa\u9636\u6bb5\uff1a\u5305\u542b\u6784\u5efa\u5de5\u5177\u548c\u4f9d\u8d56</li> <li>\u8fd0\u884c\u9636\u6bb5\uff1a\u53ea\u5305\u542b\u8fd0\u884c\u65f6\u9700\u8981\u7684\u6587\u4ef6</li> <li>\u6700\u7ec8\u955c\u50cf\u4f53\u79ef\u51cf\u5c0f 70%+</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_4","title":"\u63d0\u9ad8\u5b89\u5168\u6027","text":"<ul> <li>\u8fd0\u884c\u9636\u6bb5\u4e0d\u5305\u542b\u6784\u5efa\u5de5\u5177</li> <li>\u51cf\u5c11\u653b\u51fb\u9762</li> <li>\u66f4\u7b26\u5408\u6700\u5c0f\u6743\u9650\u539f\u5219</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_5","title":"\u90e8\u7f72\u4f18\u52bf","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#1","title":"1. \u73af\u5883\u4e00\u81f4\u6027","text":"<ul> <li>\u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u5b8c\u5168\u4e00\u81f4</li> <li>\u907f\u514d\"\u5728\u6211\u673a\u5668\u4e0a\u80fd\u8dd1\"\u7684\u95ee\u9898</li> <li>\u51cf\u5c11\u73af\u5883\u914d\u7f6e\u65f6\u95f4</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#2","title":"2. \u5feb\u901f\u90e8\u7f72","text":"<ul> <li>\u4e00\u6761\u547d\u4ee4\u542f\u52a8\u6574\u4e2a\u5e94\u7528\u6808</li> <li>\u5feb\u901f\u6269\u5c55\u548c\u56de\u6eda</li> <li>\u6613\u4e8e\u7ef4\u62a4</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#3","title":"3. \u8d44\u6e90\u9694\u79bb","text":"<ul> <li>\u6bcf\u4e2a\u670d\u52a1\u8fd0\u884c\u5728\u72ec\u7acb\u5bb9\u5668\u4e2d</li> <li>\u4e92\u4e0d\u5e72\u6270</li> <li>\u8d44\u6e90\u4f7f\u7528\u53ef\u63a7</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_6","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#1_1","title":"1. \u591a\u9636\u6bb5\u6784\u5efa","text":"<ul> <li>\u6784\u5efa\u9636\u6bb5\u5b89\u88c5\u4f9d\u8d56\uff0c\u6784\u5efa\u9879\u76ee</li> <li>\u8fd0\u884c\u9636\u6bb5\u53ea\u4fdd\u7559\u5fc5\u8981\u6587\u4ef6</li> <li>\u5927\u5e45\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#2_1","title":"2. \u73af\u5883\u53d8\u91cf\u7ba1\u7406","text":"<ul> <li>\u901a\u8fc7 <code>docker-compose.yml</code> \u7edf\u4e00\u7ba1\u7406</li> <li>\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u5206\u79bb</li> <li>\u654f\u611f\u4fe1\u606f\u4f7f\u7528 secrets</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#3_1","title":"3. \u6570\u636e\u5377\u6302\u8f7d","text":"<ul> <li>\u6570\u636e\u6587\u4ef6\u901a\u8fc7\u6570\u636e\u5377\u6302\u8f7d</li> <li>\u907f\u514d\u6570\u636e\u4e22\u5931</li> <li>\u65b9\u4fbf\u5907\u4efd\u548c\u8fc1\u79fb</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#4","title":"4. \u7f51\u7edc\u914d\u7f6e","text":"<ul> <li>\u4f7f\u7528 Docker \u7f51\u7edc\u8ba9\u5bb9\u5668\u95f4\u901a\u4fe1</li> <li>\u9694\u79bb\u5916\u90e8\u8bbf\u95ee</li> <li>\u63d0\u9ad8\u5b89\u5168\u6027</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Docker%E5%AE%B9%E5%99%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E6%8C%87%E5%8D%97/#_7","title":"\u603b\u7ed3","text":"<p>Docker \u5bb9\u5668\u5316\u90e8\u7f72\u8ba9\u5e94\u7528\u90e8\u7f72\u53d8\u5f97\u7b80\u5355\u800c\u53ef\u9760\uff1a</p> <ul> <li>\u2705 \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef</li> <li>\u2705 \u901a\u8fc7 Docker Compose \u7ba1\u7406\u591a\u5bb9\u5668\u5e94\u7528</li> <li>\u2705 \u5b9e\u73b0\u73af\u5883\u4e00\u81f4\u6027</li> <li>\u2705 \u63d0\u9ad8\u90e8\u7f72\u6548\u7387</li> </ul> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/","title":"FastAPI \u5f02\u6b65\u7f16\u7a0b\u5b9e\u8df5","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_1","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u6df1\u5165\u5b66\u4e60\u4e86 FastAPI \u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u5f0f\u3002\u901a\u8fc7\u4f7f\u7528 <code>async/await</code> \u8bed\u6cd5\u548c\u5f02\u6b65\u6570\u636e\u5e93\u9a71\u52a8\uff0c\u663e\u8457\u63d0\u5347\u4e86\u5e94\u7528\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u3002\u672c\u6587\u5206\u4eab\u6211\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u7ecf\u9a8c\u548c\u6027\u80fd\u4f18\u5316\u5fc3\u5f97\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_2","title":"\u4ec0\u4e48\u662f\u5f02\u6b65\u7f16\u7a0b","text":"<p>\u5f02\u6b65\u7f16\u7a0b\u5141\u8bb8\u7a0b\u5e8f\u5728\u7b49\u5f85 I/O \u64cd\u4f5c\uff08\u5982\u6570\u636e\u5e93\u67e5\u8be2\u3001\u7f51\u7edc\u8bf7\u6c42\uff09\u65f6\u7ee7\u7eed\u5904\u7406\u5176\u4ed6\u4efb\u52a1\uff0c\u800c\u4e0d\u662f\u963b\u585e\u7b49\u5f85\u3002\u8fd9\u5bf9\u4e8e\u9ad8\u5e76\u53d1\u7684 Web \u5e94\u7528\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#fastapi_1","title":"FastAPI \u5f02\u6b65\u57fa\u7840","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_3","title":"\u57fa\u672c\u8bed\u6cd5","text":"<pre><code>from fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get(\"/radar/latest\")\nasync def get_latest_radar():\n    \"\"\"\u5f02\u6b65 API \u7aef\u70b9\"\"\"\n    scanner = get_scanner()\n    latest = await scanner.get_latest_image()  # \u5f02\u6b65\u6570\u636e\u5e93\u67e5\u8be2\n    return latest\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_4","title":"\u5f02\u6b65\u6570\u636e\u5e93\u64cd\u4f5c","text":"<p>\u4f7f\u7528 <code>asyncpg</code> \u4f5c\u4e3a PostgreSQL \u7684\u5f02\u6b65\u9a71\u52a8\uff1a</p> <pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\n# \u521b\u5efa\u5f02\u6b65\u5f15\u64ce\nengine = create_async_engine(\n    \"postgresql+asyncpg://user:password@localhost/dbname\",\n    pool_pre_ping=True,\n    pool_size=10,\n    max_overflow=20\n)\n\n# \u521b\u5efa\u5f02\u6b65\u4f1a\u8bdd\u5de5\u5382\nAsyncSessionLocal = sessionmaker(\n    engine,\n    class_=AsyncSession,\n    expire_on_commit=False\n)\n\n# \u5728\u8def\u7531\u4e2d\u4f7f\u7528\n@app.get(\"/radar/latest\")\nasync def get_latest_radar():\n    async with AsyncSessionLocal() as session:\n        stmt = select(RadarImageModel).order_by(RadarImageModel.timestamp.desc())\n        result = await session.execute(stmt)\n        latest = result.scalar_one_or_none()\n        return latest\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_5","title":"\u5b9e\u9645\u9879\u76ee\u6848\u4f8b","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#api","title":"\u5b8c\u6574\u7684\u5f02\u6b65 API \u5b9e\u73b0","text":"<pre><code>from fastapi import FastAPI, HTTPException, status\nfrom sqlalchemy.exc import SQLAlchemyError\nfrom loguru import logger\n\n@radar_router.get(\"/radar/latest\")\nasync def get_latest_radar():\n    \"\"\"\u83b7\u53d6\u6700\u65b0\u96f7\u8fbe\u56fe\u50cf\uff08\u5f02\u6b65\uff09\"\"\"\n    try:\n        scanner = get_scanner()\n        latest = await scanner.get_latest_image()  # \u5f02\u6b65\u6570\u636e\u5e93\u67e5\u8be2\n        if not latest:\n            raise HTTPException(\n                status_code=status.HTTP_404_NOT_FOUND,\n                detail=\"No radar images found\"\n            )\n        return latest\n    except SQLAlchemyError as e:\n        logger.error(f\"Database error: {str(e)}\")\n        raise HTTPException(\n            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n            detail=f\"Database error: {str(e)}\"\n        )\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_6","title":"\u5f02\u6b65\u4e1a\u52a1\u903b\u8f91\u670d\u52a1","text":"<pre><code>class RadarScanner:\n    async def get_latest_image(self):\n        \"\"\"\u5f02\u6b65\u83b7\u53d6\u6700\u65b0\u56fe\u50cf\"\"\"\n        async with AsyncSessionLocal() as session:\n            stmt = (\n                select(RadarImageModel)\n                .order_by(RadarImageModel.timestamp.desc())\n                .limit(1)\n            )\n            result = await session.execute(stmt)\n            image = result.scalar_one_or_none()\n\n            if image:\n                return self._image_to_dict(image)\n            return None\n\n    async def get_image_list(self, start_time=None, end_time=None, \n                            region=None, page=1, page_size=100):\n        \"\"\"\u5f02\u6b65\u83b7\u53d6\u56fe\u50cf\u5217\u8868\uff08\u652f\u6301\u5206\u9875\u548c\u7b5b\u9009\uff09\"\"\"\n        async with AsyncSessionLocal() as session:\n            stmt = select(RadarImageModel)\n\n            # \u6dfb\u52a0\u7b5b\u9009\u6761\u4ef6\n            if start_time:\n                stmt = stmt.where(RadarImageModel.timestamp &gt;= start_time)\n            if end_time:\n                stmt = stmt.where(RadarImageModel.timestamp &lt;= end_time)\n            if region:\n                stmt = stmt.where(RadarImageModel.region == region)\n\n            # \u5206\u9875\n            stmt = stmt.order_by(RadarImageModel.timestamp.desc())\n            stmt = stmt.offset((page - 1) * page_size).limit(page_size)\n\n            result = await session.execute(stmt)\n            images = result.scalars().all()\n\n            return [self._image_to_dict(img) for img in images]\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_7","title":"\u6027\u80fd\u4f18\u5316","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_8","title":"\u8fde\u63a5\u6c60\u914d\u7f6e","text":"<pre><code>engine = create_async_engine(\n    DATABASE_URL,\n    pool_pre_ping=True,      # \u8fde\u63a5\u524d\u68c0\u67e5\u8fde\u63a5\u662f\u5426\u6709\u6548\n    pool_size=10,            # \u8fde\u63a5\u6c60\u5927\u5c0f\n    max_overflow=20,         # \u6700\u5927\u6ea2\u51fa\u8fde\u63a5\u6570\n    pool_recycle=3600        # \u8fde\u63a5\u56de\u6536\u65f6\u95f4\uff08\u79d2\uff09\n)\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_9","title":"\u6027\u80fd\u63d0\u5347\u6570\u636e","text":"<p>\u5728 RadarLive-CN \u9879\u76ee\u4e2d\uff0c\u4f7f\u7528\u5f02\u6b65 API \u540e\uff1a</p> <ul> <li>\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff1a\u76f8\u6bd4\u540c\u6b65\u7248\u672c\uff0c\u53ef\u4ee5\u540c\u65f6\u5904\u7406\u66f4\u591a\u5e76\u53d1\u8bf7\u6c42</li> <li>\u54cd\u5e94\u65f6\u95f4\uff1a\u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u964d\u4f4e\u7ea6 30-40%</li> <li>\u8d44\u6e90\u5229\u7528\uff1a\u6570\u636e\u5e93\u67e5\u8be2\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u8bf7\u6c42\u7684\u5904\u7406</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_10","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#1","title":"1. \u5f02\u6b65\u4e0a\u4e0b\u6587\u7ba1\u7406","text":"<ul> <li>\u4f7f\u7528 <code>async with</code> \u786e\u4fdd\u6570\u636e\u5e93\u4f1a\u8bdd\u6b63\u786e\u5173\u95ed</li> <li>\u907f\u514d\u5728\u5f02\u6b65\u51fd\u6570\u4e2d\u4f7f\u7528\u540c\u6b65\u6570\u636e\u5e93\u64cd\u4f5c</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#2","title":"2. \u9519\u8bef\u5904\u7406","text":"<ul> <li>\u6355\u83b7 <code>SQLAlchemyError</code> \u7b49\u6570\u636e\u5e93\u5f02\u5e38</li> <li>\u8bb0\u5f55\u8be6\u7ec6\u9519\u8bef\u65e5\u5fd7</li> <li>\u8fd4\u56de\u53cb\u597d\u7684\u9519\u8bef\u4fe1\u606f\u7ed9\u5ba2\u6237\u7aef</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#3","title":"3. \u8fde\u63a5\u6c60\u914d\u7f6e","text":"<ul> <li>\u6839\u636e\u5b9e\u9645\u5e76\u53d1\u91cf\u8c03\u6574 <code>pool_size</code> \u548c <code>max_overflow</code></li> <li>\u4f7f\u7528 <code>pool_pre_ping</code> \u68c0\u6d4b\u8fde\u63a5\u6709\u6548\u6027</li> <li>\u8bbe\u7f6e\u5408\u7406\u7684 <code>pool_recycle</code> \u65f6\u95f4</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#4","title":"4. \u6027\u80fd\u76d1\u63a7","text":"<ul> <li>\u76d1\u63a7\u6570\u636e\u5e93\u67e5\u8be2\u65f6\u95f4</li> <li>\u76d1\u63a7\u8fde\u63a5\u6c60\u4f7f\u7528\u60c5\u51b5</li> <li>\u6839\u636e\u5b9e\u9645\u6570\u636e\u8c03\u6574\u914d\u7f6e</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/FastAPI%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%E5%AE%9E%E8%B7%B5/#_11","title":"\u603b\u7ed3","text":"<p>FastAPI \u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u5f0f\u8ba9\u5e94\u7528\u80fd\u591f\u9ad8\u6548\u5904\u7406\u5e76\u53d1\u8bf7\u6c42\u3002\u901a\u8fc7\uff1a</p> <ul> <li>\u2705 \u4f7f\u7528 <code>async/await</code> \u8bed\u6cd5</li> <li>\u2705 \u4f7f\u7528\u5f02\u6b65\u6570\u636e\u5e93\u9a71\u52a8\uff08asyncpg\uff09</li> <li>\u2705 \u5408\u7406\u914d\u7f6e\u8fde\u63a5\u6c60</li> <li>\u2705 \u6b63\u786e\u5904\u7406\u9519\u8bef\u548c\u5f02\u5e38</li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u51fa\u9ad8\u6027\u80fd\u3001\u9ad8\u5e76\u53d1\u7684 Web API \u670d\u52a1\u3002</p> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/","title":"PostgreSQL \u7d22\u5f15\u4f18\u5316\u5b9e\u6218","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_1","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u6df1\u5165\u5b66\u4e60\u4e86 PostgreSQL \u7684\u7d22\u5f15\u4f18\u5316\u3002\u901a\u8fc7\u5408\u7406\u8bbe\u8ba1\u7d22\u5f15\uff0c\u663e\u8457\u63d0\u5347\u4e86\u6570\u636e\u5e93\u67e5\u8be2\u6027\u80fd\u3002\u672c\u6587\u5206\u4eab\u6211\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u7d22\u5f15\u8bbe\u8ba1\u7ecf\u9a8c\u548c\u4f18\u5316\u5fc3\u5f97\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_2","title":"\u7d22\u5f15\u57fa\u7840","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_3","title":"\u4ec0\u4e48\u662f\u7d22\u5f15","text":"<p>\u7d22\u5f15\u662f\u6570\u636e\u5e93\u4e2d\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u6570\u636e\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7c7b\u4f3c\u4e8e\u4e66\u7c4d\u7684\u76ee\u5f55\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_4","title":"\u7d22\u5f15\u7c7b\u578b","text":"<ul> <li>B-tree \u7d22\u5f15\uff1a\u6700\u5e38\u7528\u7684\u7d22\u5f15\u7c7b\u578b\uff0c\u9002\u5408\u7b49\u503c\u67e5\u8be2\u548c\u8303\u56f4\u67e5\u8be2</li> <li>\u590d\u5408\u7d22\u5f15\uff1a\u591a\u4e2a\u5217\u7ec4\u5408\u7684\u7d22\u5f15</li> <li>\u90e8\u5206\u7d22\u5f15\uff1a\u53ea\u5bf9\u6ee1\u8db3\u6761\u4ef6\u7684\u884c\u5efa\u7acb\u7d22\u5f15</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_5","title":"\u9879\u76ee\u4e2d\u7684\u7d22\u5f15\u8bbe\u8ba1","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_6","title":"\u96f7\u8fbe\u62fc\u56fe\u56fe\u50cf\u8868\u7d22\u5f15","text":"<pre><code>class RadarImageModel(Base):\n    __tablename__ = \"radar_images\"\n\n    id = Column(Integer, primary_key=True)\n    filename = Column(String(255), unique=True, nullable=False, index=True)\n    timestamp = Column(DateTime(timezone=True), nullable=False, index=True)\n    region = Column(String(50), nullable=True, index=True)\n\n    # \u590d\u5408\u7d22\u5f15\n    __table_args__ = (\n        Index('idx_timestamp_filename', 'timestamp', 'filename'),\n        Index('idx_region_timestamp', 'region', 'timestamp'),\n        Index('idx_region_timestamp_desc', 'region', 'timestamp', \n              postgresql_ops={'timestamp': 'DESC'}),\n    )\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_7","title":"\u5355\u7ad9\u96f7\u8fbe\u56fe\u50cf\u8868\u7d22\u5f15","text":"<pre><code>class SingleRadarImageModel(Base):\n    __tablename__ = \"single_radar_images\"\n\n    station_code = Column(String(50), nullable=False, index=True)\n    timestamp = Column(DateTime(timezone=True), nullable=False, index=True)\n    province = Column(String(100), nullable=True, index=True)\n    city = Column(String(100), nullable=True, index=True)\n\n    __table_args__ = (\n        Index('idx_single_station_timestamp', 'station_code', 'timestamp'),\n        Index('idx_single_province_city', 'province', 'city'),\n    )\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_8","title":"\u7d22\u5f15\u8bbe\u8ba1\u539f\u5219","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#1","title":"1. \u6839\u636e\u67e5\u8be2\u6a21\u5f0f\u8bbe\u8ba1","text":"<ul> <li>\u7ecf\u5e38\u7528\u4e8e WHERE \u6761\u4ef6\u7684\u5217 \u2192 \u5efa\u7acb\u7d22\u5f15</li> <li>\u7ecf\u5e38\u7528\u4e8e ORDER BY \u7684\u5217 \u2192 \u5efa\u7acb\u7d22\u5f15</li> <li>\u7ecf\u5e38\u7528\u4e8e JOIN \u7684\u5217 \u2192 \u5efa\u7acb\u7d22\u5f15</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#2","title":"2. \u590d\u5408\u7d22\u5f15\u7684\u5217\u987a\u5e8f","text":"<ul> <li>\u6700\u5e38\u7528\u7684\u5217\u653e\u5728\u524d\u9762</li> <li>\u9009\u62e9\u6027\u9ad8\u7684\u5217\u653e\u5728\u524d\u9762</li> <li>\u8003\u8651\u67e5\u8be2\u6a21\u5f0f</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#3","title":"3. \u907f\u514d\u8fc7\u5ea6\u7d22\u5f15","text":"<ul> <li>\u7d22\u5f15\u4f1a\u5360\u7528\u5b58\u50a8\u7a7a\u95f4</li> <li>\u7d22\u5f15\u4f1a\u964d\u4f4e\u5199\u5165\u6027\u80fd</li> <li>\u53ea\u5bf9\u5fc5\u8981\u7684\u5217\u5efa\u7acb\u7d22\u5f15</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_9","title":"\u6027\u80fd\u4f18\u5316\u6548\u679c","text":"<p>\u901a\u8fc7\u5408\u7406\u7684\u7d22\u5f15\u8bbe\u8ba1\uff1a</p> <ul> <li>\u2705 \u67e5\u8be2\u901f\u5ea6\u63d0\u5347 10-100 \u500d</li> <li>\u2705 \u6392\u5e8f\u64cd\u4f5c\u66f4\u5feb</li> <li>\u2705 \u51cf\u5c11\u5168\u8868\u626b\u63cf</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_10","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#1_1","title":"1. \u5206\u6790\u67e5\u8be2\u6a21\u5f0f","text":"<ul> <li>\u4f7f\u7528 <code>EXPLAIN ANALYZE</code> \u5206\u6790\u67e5\u8be2\u8ba1\u5212</li> <li>\u8bc6\u522b\u6162\u67e5\u8be2</li> <li>\u6839\u636e\u5b9e\u9645\u67e5\u8be2\u4f18\u5316\u7d22\u5f15</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#2_1","title":"2. \u76d1\u63a7\u7d22\u5f15\u4f7f\u7528","text":"<ul> <li>\u5b9a\u671f\u68c0\u67e5\u7d22\u5f15\u4f7f\u7528\u60c5\u51b5</li> <li>\u5220\u9664\u672a\u4f7f\u7528\u7684\u7d22\u5f15</li> <li>\u4f18\u5316\u7d22\u5f15\u7ed3\u6784</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#3_1","title":"3. \u6d4b\u8bd5\u548c\u9a8c\u8bc1","text":"<ul> <li>\u5728\u6d4b\u8bd5\u73af\u5883\u9a8c\u8bc1\u7d22\u5f15\u6548\u679c</li> <li>\u5bf9\u6bd4\u4f18\u5316\u524d\u540e\u7684\u6027\u80fd</li> <li>\u6301\u7eed\u4f18\u5316</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/PostgreSQL%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E5%AE%9E%E6%88%98/#_11","title":"\u603b\u7ed3","text":"<p>\u5408\u7406\u7684\u7d22\u5f15\u8bbe\u8ba1\u662f\u6570\u636e\u5e93\u6027\u80fd\u4f18\u5316\u7684\u5173\u952e\uff1a</p> <ul> <li>\u2705 \u6839\u636e\u67e5\u8be2\u6a21\u5f0f\u8bbe\u8ba1\u7d22\u5f15</li> <li>\u2705 \u5408\u7406\u4f7f\u7528\u590d\u5408\u7d22\u5f15</li> <li>\u2705 \u907f\u514d\u8fc7\u5ea6\u7d22\u5f15</li> <li>\u2705 \u6301\u7eed\u76d1\u63a7\u548c\u4f18\u5316</li> </ul> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/","title":"Vue 3 \u7ec4\u5408\u5f0f API \u6df1\u5165\u7406\u89e3","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#_1","title":"\u524d\u8a00","text":"<p>\u5728\u5f00\u53d1 RadarLive-CN \u9879\u76ee\u65f6\uff0c\u6211\u6df1\u5165\u4f7f\u7528\u4e86 Vue 3 \u7684\u7ec4\u5408\u5f0f API\uff08Composition API\uff09\u3002\u76f8\u6bd4\u4f20\u7edf\u7684\u9009\u9879\u5f0f API\uff0c\u7ec4\u5408\u5f0f API \u8ba9\u4ee3\u7801\u7ec4\u7ec7\u66f4\u52a0\u7075\u6d3b\uff0c\u903b\u8f91\u590d\u7528\u66f4\u5bb9\u6613\u3002\u672c\u6587\u5206\u4eab\u6211\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u7ecf\u9a8c\u548c\u5fc3\u5f97\u4f53\u4f1a\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#api","title":"\u4ec0\u4e48\u662f\u7ec4\u5408\u5f0f API","text":"<p>\u7ec4\u5408\u5f0f API \u662f Vue 3 \u5f15\u5165\u7684\u65b0\u7279\u6027\uff0c\u5b83\u5141\u8bb8\u6211\u4eec\u4f7f\u7528\u51fd\u6570\u5f0f\u7684\u65b9\u5f0f\u6765\u7ec4\u7ec7\u7ec4\u4ef6\u903b\u8f91\u3002\u6838\u5fc3\u601d\u60f3\u662f\uff1a\u5c06\u76f8\u5173\u7684\u903b\u8f91\u7ec4\u7ec7\u5728\u4e00\u8d77\uff0c\u800c\u4e0d\u662f\u5206\u6563\u5728\u4e0d\u540c\u7684\u9009\u9879\u4e2d\u3002</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#api_1","title":"\u4f20\u7edf\u9009\u9879\u5f0f API \u7684\u95ee\u9898","text":"<p>\u5728 Vue 2 \u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u9009\u9879\u5f0f API\uff1a</p> <pre><code>export default {\n  data() {\n    return {\n      imageList: [],\n      currentIndex: 0,\n      isPlaying: false\n    }\n  },\n  computed: {\n    currentImage() {\n      return this.imageList[this.currentIndex]\n    }\n  },\n  methods: {\n    loadData() {\n      // \u52a0\u8f7d\u6570\u636e\n    },\n    nextImage() {\n      // \u4e0b\u4e00\u5f20\n    }\n  },\n  watch: {\n    currentIndex(newVal) {\n      // \u76d1\u542c\u53d8\u5316\n    }\n  }\n}\n</code></pre> <p>\u95ee\u9898\uff1a - \u76f8\u5173\u903b\u8f91\u5206\u6563\u5728 <code>data</code>\u3001<code>computed</code>\u3001<code>methods</code>\u3001<code>watch</code> \u4e2d - \u5927\u578b\u7ec4\u4ef6\u4e2d\uff0c\u67e5\u627e\u76f8\u5173\u4ee3\u7801\u9700\u8981\u4e0a\u4e0b\u6eda\u52a8 - \u903b\u8f91\u590d\u7528\u56f0\u96be\uff0c\u9700\u8981\u4f7f\u7528 mixins\uff08\u5bb9\u6613\u547d\u540d\u51b2\u7a81\uff09</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#api_2","title":"\u7ec4\u5408\u5f0f API \u7684\u4f18\u52bf","text":"<pre><code>import { ref, computed, watch, onMounted } from 'vue'\n\nexport default {\n  setup() {\n    // \u6240\u6709\u76f8\u5173\u903b\u8f91\u90fd\u5728\u8fd9\u91cc\n    const imageList = ref([])\n    const currentIndex = ref(0)\n    const isPlaying = ref(false)\n\n    const currentImage = computed(() =&gt; {\n      return imageList.value[currentIndex.value]\n    })\n\n    const loadData = async () =&gt; {\n      // \u52a0\u8f7d\u6570\u636e\n    }\n\n    watch(currentIndex, (newVal) =&gt; {\n      // \u76d1\u542c\u53d8\u5316\n    })\n\n    onMounted(() =&gt; {\n      loadData()\n    })\n\n    return {\n      imageList,\n      currentIndex,\n      currentImage,\n      isPlaying\n    }\n  }\n}\n</code></pre> <p>\u4f18\u52bf\uff1a - \u76f8\u5173\u903b\u8f91\u96c6\u4e2d\u5728\u4e00\u8d77\uff0c\u6613\u4e8e\u7406\u89e3\u548c\u7ef4\u62a4 - \u903b\u8f91\u590d\u7528\u66f4\u5bb9\u6613\uff08\u63d0\u53d6\u4e3a composables \u51fd\u6570\uff09 - TypeScript \u652f\u6301\u66f4\u597d - \u4ee3\u7801\u7ec4\u7ec7\u66f4\u7075\u6d3b</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#api_3","title":"\u6838\u5fc3 API \u8be6\u89e3","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#ref-vs-reactive","title":"ref vs reactive","text":"<p>ref - \u7528\u4e8e\u57fa\u672c\u7c7b\u578b\u548c\u7b80\u5355\u5bf9\u8c61\uff1a</p> <pre><code>import { ref } from 'vue'\n\n// \u57fa\u672c\u7c7b\u578b\nconst count = ref(0)\nconst name = ref('suxiaoling')\n\n// \u8bbf\u95ee\u503c\u9700\u8981\u4f7f\u7528 .value\ncount.value++  // 1\nname.value = 'new name'\n\n// \u5728\u6a21\u677f\u4e2d\u81ea\u52a8\u89e3\u5305\uff0c\u4e0d\u9700\u8981 .value\n// &lt;div&gt;{{ count }}&lt;/div&gt;\n</code></pre> <p>reactive - \u7528\u4e8e\u590d\u6742\u5bf9\u8c61\uff1a</p> <pre><code>import { reactive } from 'vue'\n\nconst state = reactive({\n  imageList: [],\n  currentIndex: 0,\n  isPlaying: false\n})\n\n// \u76f4\u63a5\u8bbf\u95ee\u5c5e\u6027\uff0c\u4e0d\u9700\u8981 .value\nstate.currentIndex++\nstate.imageList.push(newImage)\n</code></pre> <p>\u9009\u62e9\u5efa\u8bae\uff1a - \u7b80\u5355\u503c\uff08\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5e03\u5c14\u503c\uff09\u2192 \u4f7f\u7528 <code>ref</code> - \u590d\u6742\u5bf9\u8c61\uff08\u5bf9\u8c61\u3001\u6570\u7ec4\uff09\u2192 \u4f7f\u7528 <code>reactive</code> \u6216 <code>ref</code> - \u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u65f6\uff0c<code>ref</code> \u4f1a\u81ea\u52a8\u89e3\u5305\uff0c<code>reactive</code> \u4e0d\u9700\u8981\u89e3\u5305</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#computed-","title":"computed - \u8ba1\u7b97\u5c5e\u6027","text":"<p>\u8ba1\u7b97\u5c5e\u6027\u4f1a\u81ea\u52a8\u7f13\u5b58\uff0c\u53ea\u6709\u4f9d\u8d56\u53d8\u5316\u65f6\u624d\u91cd\u65b0\u8ba1\u7b97\uff1a</p> <pre><code>import { ref, computed } from 'vue'\n\nconst imageList = ref([])\nconst currentIndex = ref(0)\n\n// \u8ba1\u7b97\u5c5e\u6027\uff1a\u81ea\u52a8\u4ece\u7d22\u5f15\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\nconst currentImage = computed(() =&gt; {\n  if (imageList.value.length === 0) return null\n  return imageList.value[currentIndex.value]\n})\n\n// \u8ba1\u7b97\u5c5e\u6027\uff1a\u65f6\u95f4\u5217\u8868\u9879\uff08\u81ea\u52a8\u683c\u5f0f\u5316\uff09\nconst timeListItems = computed(() =&gt; {\n  return imageList.value.map((item, index) =&gt; ({\n    index,\n    timestamp: item.timestamp,\n    display: formatTimestamp(item.timestamp)\n  })).reverse()\n})\n</code></pre> <p>\u7279\u70b9\uff1a - \u81ea\u52a8\u7f13\u5b58\uff0c\u6027\u80fd\u66f4\u597d - \u4f9d\u8d56\u53d8\u5316\u65f6\u81ea\u52a8\u66f4\u65b0 - \u53ef\u4ee5\u8bbe\u7f6e getter \u548c setter</p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#watch-vs-watcheffect","title":"watch vs watchEffect","text":"<p>watch - \u9700\u8981\u660e\u786e\u6307\u5b9a\u76d1\u542c\u6e90\uff1a</p> <pre><code>import { ref, watch } from 'vue'\n\nconst currentIndex = ref(0)\nconst imageList = ref([])\n\n// \u76d1\u542c\u5355\u4e2a\u6e90\nwatch(currentIndex, (newVal, oldVal) =&gt; {\n  console.log(`\u7d22\u5f15\u4ece ${oldVal} \u53d8\u4e3a ${newVal}`)\n  preloadNearbyFrames(newVal)\n})\n\n// \u76d1\u542c\u591a\u4e2a\u6e90\nwatch([currentIndex, imageList], ([newIndex, newList], [oldIndex, oldList]) =&gt; {\n  // \u5904\u7406\u53d8\u5316\n})\n\n// \u6df1\u5ea6\u76d1\u542c\u5bf9\u8c61\nwatch(imageList, (newVal) =&gt; {\n  // \u5904\u7406\u53d8\u5316\n}, { deep: true })\n</code></pre> <p>watchEffect - \u81ea\u52a8\u8ffd\u8e2a\u4f9d\u8d56\uff1a</p> <pre><code>import { ref, watchEffect } from 'vue'\n\nconst currentIndex = ref(0)\nconst imageList = ref([])\n\n// \u81ea\u52a8\u8ffd\u8e2a currentIndex \u548c imageList\nwatchEffect(() =&gt; {\n  if (imageList.value.length &gt; 0 &amp;&amp; currentIndex.value &gt;= 0) {\n    preloadNearbyFrames(currentIndex.value)\n  }\n})\n</code></pre> <p>\u9009\u62e9\u5efa\u8bae\uff1a - \u9700\u8981\u660e\u786e\u77e5\u9053\u76d1\u542c\u4ec0\u4e48 \u2192 \u4f7f\u7528 <code>watch</code> - \u9700\u8981\u81ea\u52a8\u8ffd\u8e2a\u6240\u6709\u4f9d\u8d56 \u2192 \u4f7f\u7528 <code>watchEffect</code> - \u9700\u8981\u8bbf\u95ee\u65e7\u503c \u2192 \u4f7f\u7528 <code>watch</code></p>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#_2","title":"\u5b9e\u9645\u9879\u76ee\u6848\u4f8b","text":"<p>\u5728 RadarLive-CN \u9879\u76ee\u4e2d\uff0c\u6211\u4f7f\u7528\u7ec4\u5408\u5f0f API \u5b9e\u73b0\u4e86\u4e00\u4e2a\u590d\u6742\u7684\u96f7\u8fbe\u5c55\u793a\u7ec4\u4ef6\u3002\u4ee5\u4e0b\u662f\u6838\u5fc3\u72b6\u6001\u7ba1\u7406\u90e8\u5206\uff1a</p> <pre><code>import { ref, computed, watch, onMounted, onUnmounted } from 'vue'\n\nexport default {\n  setup() {\n    // \u6838\u5fc3\u72b6\u6001\n    const imageList = ref([])\n    const currentIndex = ref(0)\n    const radarMode = ref('mosaic')\n    const region = ref('NATIONAL')\n    const selectedStation = ref('')\n    const isPlaying = ref(false)\n    const dateRange = ref(null)\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u81ea\u52a8\u4ece\u7d22\u5f15\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\n    const currentImage = computed(() =&gt; {\n      if (imageList.value.length === 0) return null\n      return imageList.value[currentIndex.value]\n    })\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u65f6\u95f4\u5217\u8868\u9879\uff08\u81ea\u52a8\u683c\u5f0f\u5316\uff09\n    const timeListItems = computed(() =&gt; {\n      return imageList.value.map((item, index) =&gt; ({\n        key: `${item.timestamp}-${index}`,\n        index,\n        timestamp: item.timestamp,\n        display: formatTimestamp(item.timestamp)\n      })).reverse()\n    })\n\n    // \u76d1\u542c\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\n    watch(currentIndex, (newIndex) =&gt; {\n      preloadNearbyFrames(newIndex)\n    })\n\n    // \u64ad\u653e\u63a7\u5236\n    const playInterval = ref(null)\n    const startAutoPlay = () =&gt; {\n      isPlaying.value = true\n      playInterval.value = setInterval(() =&gt; {\n        if (currentIndex.value &lt; imageList.value.length - 1) {\n          currentIndex.value++\n        } else if (loopEnabled.value) {\n          currentIndex.value = 0\n        } else {\n          stopAutoPlay()\n        }\n      }, playbackIntervalMs.value)\n    }\n\n    const stopAutoPlay = () =&gt; {\n      isPlaying.value = false\n      if (playInterval.value) {\n        clearInterval(playInterval.value)\n        playInterval.value = null\n      }\n    }\n\n    // \u7ec4\u4ef6\u6302\u8f7d\u65f6\u52a0\u8f7d\u6570\u636e\n    onMounted(() =&gt; {\n      loadData()\n    })\n\n    // \u7ec4\u4ef6\u5378\u8f7d\u65f6\u6e05\u7406\n    onUnmounted(() =&gt; {\n      stopAutoPlay()\n    })\n\n    return {\n      // \u72b6\u6001\n      imageList,\n      currentIndex,\n      currentImage,\n      timeListItems,\n      radarMode,\n      region,\n      selectedStation,\n      isPlaying,\n      dateRange,\n      // \u65b9\u6cd5\n      startAutoPlay,\n      stopAutoPlay\n    }\n  }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#-composables","title":"\u903b\u8f91\u590d\u7528 - Composables","text":"<p>\u7ec4\u5408\u5f0f API \u6700\u5927\u7684\u4f18\u52bf\u662f\u53ef\u4ee5\u5c06\u903b\u8f91\u63d0\u53d6\u4e3a\u53ef\u590d\u7528\u7684\u51fd\u6570\uff1a</p> <pre><code>// composables/useRadarPlayer.js\nimport { ref, computed, watch } from 'vue'\n\nexport function useRadarPlayer(imageList) {\n  const currentIndex = ref(0)\n  const isPlaying = ref(false)\n  const playbackIntervalMs = ref(100)\n\n  const currentImage = computed(() =&gt; {\n    if (imageList.value.length === 0) return null\n    return imageList.value[currentIndex.value]\n  })\n\n  const nextImage = () =&gt; {\n    if (currentIndex.value &lt; imageList.value.length - 1) {\n      currentIndex.value++\n    }\n  }\n\n  const previousImage = () =&gt; {\n    if (currentIndex.value &gt; 0) {\n      currentIndex.value--\n    }\n  }\n\n  const startAutoPlay = () =&gt; {\n    // \u64ad\u653e\u903b\u8f91\n  }\n\n  return {\n    currentIndex,\n    currentImage,\n    isPlaying,\n    nextImage,\n    previousImage,\n    startAutoPlay\n  }\n}\n</code></pre> <p>\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528\uff1a</p> <pre><code>import { useRadarPlayer } from '@/composables/useRadarPlayer'\n\nexport default {\n  setup() {\n    const imageList = ref([])\n    const { currentIndex, currentImage, startAutoPlay } = useRadarPlayer(imageList)\n\n    return {\n      imageList,\n      currentIndex,\n      currentImage,\n      startAutoPlay\n    }\n  }\n}\n</code></pre>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#_3","title":"\u5b9e\u8df5\u5fc3\u5f97","text":""},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#1-ref-vs-reactive","title":"1. ref vs reactive \u7684\u9009\u62e9","text":"<ul> <li>\u7b80\u5355\u503c\u7528 ref\uff1a\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3001\u5e03\u5c14\u503c</li> <li>\u590d\u6742\u5bf9\u8c61\u7528 reactive\uff1a\u5bf9\u8c61\u3001\u6570\u7ec4\uff08\u4f46\u4e5f\u53ef\u4ee5\u90fd\u7528 ref\uff0c\u770b\u4e2a\u4eba\u4e60\u60ef\uff09</li> <li>\u5728\u6a21\u677f\u4e2d\u4f7f\u7528\u65f6\uff1a<code>ref</code> \u4f1a\u81ea\u52a8\u89e3\u5305\uff0c<code>reactive</code> \u4e0d\u9700\u8981\u89e3\u5305</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#2-computed","title":"2. computed \u7684\u7f13\u5b58\u673a\u5236","text":"<ul> <li>\u8ba1\u7b97\u5c5e\u6027\u4f1a\u81ea\u52a8\u7f13\u5b58\uff0c\u53ea\u6709\u4f9d\u8d56\u53d8\u5316\u65f6\u624d\u91cd\u65b0\u8ba1\u7b97</li> <li>\u9002\u5408\u7528\u4e8e\u6d3e\u751f\u72b6\u6001\uff08\u4ece\u5176\u4ed6\u72b6\u6001\u8ba1\u7b97\u5f97\u51fa\u7684\u72b6\u6001\uff09</li> <li>\u907f\u514d\u5728\u6a21\u677f\u4e2d\u8fdb\u884c\u590d\u6742\u8ba1\u7b97</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#3-watch","title":"3. watch \u7684\u4f7f\u7528\u573a\u666f","text":"<ul> <li>\u9700\u8981\u6267\u884c\u526f\u4f5c\u7528\uff08\u5982 API \u8c03\u7528\u3001DOM \u64cd\u4f5c\uff09\u65f6\u4f7f\u7528 <code>watch</code></li> <li>\u9700\u8981\u8bbf\u95ee\u65e7\u503c\u65f6\u4f7f\u7528 <code>watch</code></li> <li>\u9700\u8981\u7cbe\u786e\u63a7\u5236\u76d1\u542c\u65f6\u673a\u65f6\u4f7f\u7528 <code>watch</code></li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#4","title":"4. \u903b\u8f91\u590d\u7528","text":"<ul> <li>\u5c06\u76f8\u5173\u903b\u8f91\u63d0\u53d6\u4e3a composables \u51fd\u6570</li> <li>\u547d\u540d\u89c4\u8303\uff1a<code>use</code> \u5f00\u5934\uff08\u5982 <code>useRadarPlayer</code>\uff09</li> <li>\u8fd4\u56de\u54cd\u5e94\u5f0f\u72b6\u6001\u548c\u65b9\u6cd5\uff0c\u8ba9\u7ec4\u4ef6\u4f7f\u7528</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#5","title":"5. \u4ee3\u7801\u7ec4\u7ec7","text":"<ul> <li>\u76f8\u5173\u903b\u8f91\u653e\u5728\u4e00\u8d77</li> <li>\u4f7f\u7528\u6ce8\u91ca\u5206\u9694\u4e0d\u540c\u529f\u80fd\u6a21\u5757</li> <li>\u4fdd\u6301 <code>setup</code> \u51fd\u6570\u7b80\u6d01\uff0c\u590d\u6742\u903b\u8f91\u63d0\u53d6\u5230 composables</li> </ul>"},{"location":"%E6%8A%80%E6%9C%AF%E6%A0%88%E5%AD%A6%E4%B9%A0/Vue3%E7%BB%84%E5%90%88%E5%BC%8FAPI%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3/#_4","title":"\u603b\u7ed3","text":"<p>Vue 3 \u7684\u7ec4\u5408\u5f0f API \u8ba9\u4ee3\u7801\u7ec4\u7ec7\u66f4\u52a0\u7075\u6d3b\uff0c\u903b\u8f91\u590d\u7528\u66f4\u5bb9\u6613\u3002\u5728\u5b9e\u9645\u9879\u76ee\u4e2d\uff1a</p> <ul> <li>\u2705 \u4f7f\u7528 <code>ref</code> \u548c <code>reactive</code> \u7ba1\u7406\u72b6\u6001</li> <li>\u2705 \u4f7f\u7528 <code>computed</code> \u8ba1\u7b97\u6d3e\u751f\u72b6\u6001</li> <li>\u2705 \u4f7f\u7528 <code>watch</code> \u76d1\u542c\u53d8\u5316\u5e76\u6267\u884c\u526f\u4f5c\u7528</li> <li>\u2705 \u5c06\u903b\u8f91\u63d0\u53d6\u4e3a composables \u51fd\u6570\uff0c\u63d0\u9ad8\u590d\u7528\u6027</li> <li>\u2705 \u4fdd\u6301\u4ee3\u7801\u7ec4\u7ec7\u6e05\u6670\uff0c\u76f8\u5173\u903b\u8f91\u96c6\u4e2d</li> </ul> <p>\u901a\u8fc7\u7ec4\u5408\u5f0f API\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u66f4\u6e05\u6670\u3001\u66f4\u6613\u7ef4\u62a4\u7684 Vue \u7ec4\u4ef6\u3002</p> <p>\u672c\u6587\u57fa\u4e8e RadarLive-CN \u9879\u76ee\u7684\u5b9e\u9645\u5f00\u53d1\u7ecf\u9a8c\u603b\u7ed3</p>"},{"location":"%E9%A1%B9%E7%9B%AE/","title":"\u9879\u76ee\u6587\u6863","text":"<p>\u8fd9\u91cc\u5b58\u653e\u5404\u4e2a\u9879\u76ee\u7684\u6280\u672f\u6587\u6863\u548c\u5b66\u4e60\u603b\u7ed3\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/#_2","title":"\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>\u9879\u76ee/\n\u251c\u2500\u2500 RadarLive-CN/          # RadarLive-CN \u9879\u76ee\n\u2502   \u251c\u2500\u2500 \u9879\u76ee\u7ed3\u6784\u603b\u89c8.md\n\u2502   \u251c\u2500\u2500 \u540e\u7aef\u67b6\u6784\u8be6\u89e3.md\n\u2502   \u251c\u2500\u2500 \u524d\u7aef\u67b6\u6784\u8be6\u89e3.md\n\u2502   \u251c\u2500\u2500 API\u63a5\u53e3\u6587\u6863.md\n\u2502   \u2514\u2500\u2500 \u5b66\u4e60\u6536\u83b7.md\n\u2514\u2500\u2500 \u9879\u76ee\u540d\u79f0/              # \u65b0\u9879\u76ee\uff08\u6309\u6b64\u7ed3\u6784\u6dfb\u52a0\uff09\n    \u251c\u2500\u2500 \u9879\u76ee\u7ed3\u6784\u603b\u89c8.md\n    \u251c\u2500\u2500 \u6280\u672f\u6587\u6863.md\n    \u2514\u2500\u2500 \u5b66\u4e60\u6536\u83b7.md\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/#_3","title":"\u6dfb\u52a0\u65b0\u9879\u76ee","text":""},{"location":"%E9%A1%B9%E7%9B%AE/#1","title":"\u6b65\u9aa4 1\uff1a\u521b\u5efa\u9879\u76ee\u76ee\u5f55","text":"<p>\u5728 <code>docs/\u9879\u76ee/</code> \u4e0b\u521b\u5efa\u65b0\u9879\u76ee\u6587\u4ef6\u5939\uff0c\u4f8b\u5982\uff1a</p> <pre><code>mkdir -p docs/\u9879\u76ee/\u9879\u76ee\u540d\u79f0\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/#2","title":"\u6b65\u9aa4 2\uff1a\u521b\u5efa\u9879\u76ee\u6587\u6863","text":"<p>\u5728\u65b0\u9879\u76ee\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u6863\u6587\u4ef6\uff0c\u5efa\u8bae\u5305\u542b\uff1a</p> <ul> <li><code>\u9879\u76ee\u7ed3\u6784\u603b\u89c8.md</code> - \u9879\u76ee\u6574\u4f53\u4ecb\u7ecd\u548c\u76ee\u5f55\u7ed3\u6784</li> <li><code>\u6280\u672f\u6587\u6863.md</code> - \u6280\u672f\u5b9e\u73b0\u7ec6\u8282\uff08\u53ef\u6309\u9700\u7ec6\u5206\uff09</li> <li><code>\u5b66\u4e60\u6536\u83b7.md</code> - \u9879\u76ee\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u7684\u6536\u83b7\u548c\u5fc3\u5f97</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/#3","title":"\u6b65\u9aa4 3\uff1a\u66f4\u65b0\u5bfc\u822a\u914d\u7f6e","text":"<p>\u7f16\u8f91 <code>mkdocs.yml</code> \u6587\u4ef6\uff0c\u5728 <code>nav</code> \u90e8\u5206\u7684 <code>\u9879\u76ee:</code> \u4e0b\u6dfb\u52a0\u65b0\u9879\u76ee\uff1a</p> <pre><code>nav:\n  - \u9996\u9875: index.md\n  - \u9879\u76ee:\n    - RadarLive-CN:\n      - \u9879\u76ee\u7ed3\u6784\u603b\u89c8: \u9879\u76ee/RadarLive-CN/\u9879\u76ee\u7ed3\u6784\u603b\u89c8.md\n      # ... \u5176\u4ed6\u6587\u6863\n    - \u65b0\u9879\u76ee\u540d\u79f0:                    # \u6dfb\u52a0\u8fd9\u91cc\n      - \u9879\u76ee\u7ed3\u6784\u603b\u89c8: \u9879\u76ee/\u65b0\u9879\u76ee\u540d\u79f0/\u9879\u76ee\u7ed3\u6784\u603b\u89c8.md\n      - \u6280\u672f\u6587\u6863: \u9879\u76ee/\u65b0\u9879\u76ee\u540d\u79f0/\u6280\u672f\u6587\u6863.md\n      - \u5b66\u4e60\u6536\u83b7: \u9879\u76ee/\u65b0\u9879\u76ee\u540d\u79f0/\u5b66\u4e60\u6536\u83b7.md\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/#4","title":"\u6b65\u9aa4 4\uff1a\u66f4\u65b0\u9996\u9875","text":"<p>\u7f16\u8f91 <code>docs/index.md</code>\uff0c\u5728\u9879\u76ee\u6587\u6863\u90e8\u5206\u6dfb\u52a0\u65b0\u9879\u76ee\u7684\u94fe\u63a5\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/#5","title":"\u6b65\u9aa4 5\uff1a\u63d0\u4ea4\u5e76\u63a8\u9001","text":"<pre><code>git add .\ngit commit -m \"\u6dfb\u52a0\u65b0\u9879\u76ee\uff1a\u9879\u76ee\u540d\u79f0\"\ngit push\n</code></pre> <p>\u6301\u7eed\u66f4\u65b0\u4e2d...</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/","title":"API \u63a5\u53e3\u6587\u6863","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_1","title":"\u57fa\u7840\u4fe1\u606f","text":"<ul> <li>Base URL: <code>http://localhost:8000</code> (\u5f00\u53d1\u73af\u5883)</li> <li>API \u524d\u7f00: <code>/api</code></li> <li>\u8ba4\u8bc1\u65b9\u5f0f: Bearer Token (JWT)</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_2","title":"\u8ba4\u8bc1\u63a5\u53e3","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#1","title":"1. \u7528\u6237\u767b\u5f55","text":"<p>POST <code>/api/login</code></p> <p>\u8bf7\u6c42\u4f53: <pre><code>{\n  \"username\": \"string\",\n  \"password\": \"string\"\n}\n</code></pre></p> <p>\u54cd\u5e94: <pre><code>{\n  \"access_token\": \"string\",\n  \"refresh_token\": \"string\",\n  \"token_type\": \"bearer\",\n  \"username\": \"string\"\n}\n</code></pre></p> <p>\u8bf4\u660e: - access_token \u6709\u6548\u671f: 30\u5206\u949f - refresh_token \u6709\u6548\u671f: 7\u5929 - \u9700\u8981\u5728\u8bf7\u6c42\u5934\u4e2d\u643a\u5e26: <code>Authorization: Bearer {access_token}</code></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#2","title":"2. \u7528\u6237\u6ce8\u518c","text":"<p>POST <code>/api/register</code></p> <p>\u8bf7\u6c42\u4f53: <pre><code>{\n  \"username\": \"string\",      // 3-50\u5b57\u7b26\uff0c\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\u8fde\u5b57\u7b26\n  \"password\": \"string\",      // \u81f3\u5c116\u5b57\u7b26\n  \"captcha_id\": \"string\",\n  \"captcha_text\": \"string\"\n}\n</code></pre></p> <p>\u54cd\u5e94: <pre><code>{\n  \"message\": \"\u6ce8\u518c\u6210\u529f\",\n  \"username\": \"string\"\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#3","title":"3. \u83b7\u53d6\u9a8c\u8bc1\u7801","text":"<p>GET <code>/api/captcha</code></p> <p>\u54cd\u5e94: <pre><code>{\n  \"captcha_id\": \"string\"\n}\n</code></pre></p> <p>\u83b7\u53d6\u9a8c\u8bc1\u7801\u56fe\u7247: <code>GET /api/captcha/{captcha_id}/image</code></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#4","title":"4. \u4fee\u6539\u5bc6\u7801","text":"<p>POST <code>/api/change-password</code> (\u9700\u8981\u8ba4\u8bc1)</p> <p>\u8bf7\u6c42\u4f53: <pre><code>{\n  \"current_password\": \"string\",\n  \"new_password\": \"string\"    // \u81f3\u5c116\u5b57\u7b26\n}\n</code></pre></p> <p>\u54cd\u5e94: <pre><code>{\n  \"message\": \"\u5bc6\u7801\u5df2\u66f4\u65b0\"\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#5-token","title":"5. \u5237\u65b0 Token","text":"<p>POST <code>/api/refresh</code></p> <p>\u8bf7\u6c42\u4f53: <pre><code>{\n  \"refresh_token\": \"string\"\n}\n</code></pre></p> <p>\u54cd\u5e94: <pre><code>{\n  \"access_token\": \"string\",\n  \"token_type\": \"bearer\"\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_3","title":"\u96f7\u8fbe\u62fc\u56fe\u63a5\u53e3","text":"<p>\u6240\u6709\u63a5\u53e3\u90fd\u9700\u8981\u8ba4\u8bc1\uff08Bearer Token\uff09\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#1_1","title":"1. \u83b7\u53d6\u6700\u65b0\u96f7\u8fbe\u56fe\u50cf","text":"<p>GET <code>/api/radar/latest</code></p> <p>\u54cd\u5e94: <pre><code>{\n  \"filename\": \"string\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"url\": \"http://...\",\n  \"size\": 123456,\n  \"region\": \"EAST\"\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#2_1","title":"2. \u83b7\u53d6\u96f7\u8fbe\u56fe\u50cf\u5217\u8868","text":"<p>GET <code>/api/radar/list</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>start_time</code> (\u53ef\u9009): ISO \u683c\u5f0f\u5f00\u59cb\u65f6\u95f4 - <code>end_time</code> (\u53ef\u9009): ISO \u683c\u5f0f\u7ed3\u675f\u65f6\u95f4 - <code>limit</code> (\u53ef\u9009, \u9ed8\u8ba45000): \u6700\u5927\u8fd4\u56de\u6570\u91cf (1-5000) - <code>region</code> (\u53ef\u9009): \u533a\u57df\u4ee3\u7801 (EAST, NORTH, etc.) - <code>page</code> (\u53ef\u9009): \u9875\u7801 (1-based) - <code>page_size</code> (\u53ef\u9009): \u6bcf\u9875\u6570\u91cf (1-200)</p> <p>\u54cd\u5e94: <pre><code>{\n  \"total\": 100,\n  \"images\": [\n    {\n      \"filename\": \"string\",\n      \"timestamp\": \"2024-01-01T12:00:00Z\",\n      \"url\": \"http://...\",\n      \"size\": 123456,\n      \"region\": \"EAST\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#3_1","title":"3. \u83b7\u53d6\u65f6\u95f4\u8f74\u6570\u636e","text":"<p>GET <code>/api/radar/timeline</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>hours</code> (\u53ef\u9009, \u9ed8\u8ba424): \u67e5\u8be2\u6700\u8fd1N\u5c0f\u65f6 (1-168) - <code>region</code> (\u53ef\u9009): \u533a\u57df\u4ee3\u7801</p> <p>\u54cd\u5e94: <pre><code>{\n  \"start_time\": \"2024-01-01T00:00:00Z\",\n  \"end_time\": \"2024-01-01T12:00:00Z\",\n  \"count\": 100,\n  \"images\": [...]\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#4_1","title":"4. \u83b7\u53d6\u6570\u636e\u65f6\u95f4\u8303\u56f4","text":"<p>GET <code>/api/radar/time-range</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>region</code> (\u53ef\u9009): \u533a\u57df\u4ee3\u7801</p> <p>\u54cd\u5e94: <pre><code>{\n  \"earliest\": \"2024-01-01T00:00:00Z\",\n  \"latest\": \"2024-01-01T12:00:00Z\",\n  \"count\": 1000\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#5","title":"5. \u5feb\u901f\u83b7\u53d6\u533a\u57df\u6700\u65b0\u6570\u636e","text":"<p>GET <code>/api/radar/latest-by-region</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>region</code> (\u5fc5\u9700): \u533a\u57df\u4ee3\u7801</p> <p>\u54cd\u5e94: <pre><code>{\n  \"status\": \"success\",\n  \"image\": {\n    \"filename\": \"string\",\n    \"timestamp\": \"2024-01-01T12:00:00Z\",\n    \"url\": \"http://...\",\n    \"size\": 123456,\n    \"region\": \"EAST\"\n  }\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_4","title":"\u5355\u7ad9\u96f7\u8fbe\u63a5\u53e3","text":"<p>\u6240\u6709\u63a5\u53e3\u90fd\u9700\u8981\u8ba4\u8bc1\uff08Bearer Token\uff09\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#1_2","title":"1. \u83b7\u53d6\u5355\u7ad9\u96f7\u8fbe\u7ad9\u70b9\u5217\u8868","text":"<p>GET <code>/api/radar/single/stations</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>province</code> (\u53ef\u9009): \u7701\u4efd\u540d\u79f0 - <code>city</code> (\u53ef\u9009): \u57ce\u5e02\u540d\u79f0</p> <p>\u54cd\u5e94: <pre><code>[\n  {\n    \"station_code\": \"Z9000\",\n    \"province\": \"\u5317\u4eac\",\n    \"city\": \"\u5317\u4eac\",\n    \"latest_timestamp\": \"2024-01-01T12:00:00Z\",\n    \"image_count\": 1000\n  }\n]\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#2_2","title":"2. \u83b7\u53d6\u5355\u7ad9\u96f7\u8fbe\u56fe\u50cf\u5217\u8868","text":"<p>GET <code>/api/radar/single/list</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>station_code</code> (\u5fc5\u9700): \u7ad9\u70b9\u7f16\u7801 - <code>start_time</code> (\u53ef\u9009): ISO \u683c\u5f0f\u5f00\u59cb\u65f6\u95f4 - <code>end_time</code> (\u53ef\u9009): ISO \u683c\u5f0f\u7ed3\u675f\u65f6\u95f4 - <code>limit</code> (\u53ef\u9009, \u9ed8\u8ba4500): \u6700\u5927\u8fd4\u56de\u6570\u91cf (1-5000) - <code>province</code> (\u53ef\u9009): \u7701\u4efd\u8fc7\u6ee4 - <code>city</code> (\u53ef\u9009): \u57ce\u5e02\u8fc7\u6ee4 - <code>page</code> (\u53ef\u9009): \u9875\u7801 - <code>page_size</code> (\u53ef\u9009): \u6bcf\u9875\u6570\u91cf</p> <p>\u54cd\u5e94: <pre><code>{\n  \"total\": 100,\n  \"images\": [\n    {\n      \"filename\": \"string\",\n      \"timestamp\": \"2024-01-01T12:00:00Z\",\n      \"url\": \"http://...\",\n      \"size\": 123456,\n      \"station_code\": \"Z9000\",\n      \"province\": \"\u5317\u4eac\",\n      \"city\": \"\u5317\u4eac\"\n    }\n  ]\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#3_2","title":"3. \u83b7\u53d6\u5355\u7ad9\u6700\u65b0\u56fe\u50cf","text":"<p>GET <code>/api/radar/single/latest</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>station_code</code> (\u5fc5\u9700): \u7ad9\u70b9\u7f16\u7801</p> <p>\u54cd\u5e94: <pre><code>{\n  \"filename\": \"string\",\n  \"timestamp\": \"2024-01-01T12:00:00Z\",\n  \"url\": \"http://...\",\n  \"size\": 123456,\n  \"station_code\": \"Z9000\",\n  \"province\": \"\u5317\u4eac\",\n  \"city\": \"\u5317\u4eac\"\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#4_2","title":"4. \u83b7\u53d6\u5355\u7ad9\u6570\u636e\u65f6\u95f4\u8303\u56f4","text":"<p>GET <code>/api/radar/single/time-range</code></p> <p>\u67e5\u8be2\u53c2\u6570: - <code>station_code</code> (\u5fc5\u9700): \u7ad9\u70b9\u7f16\u7801 - <code>province</code> (\u53ef\u9009): \u7701\u4efd\u8fc7\u6ee4 - <code>city</code> (\u53ef\u9009): \u57ce\u5e02\u8fc7\u6ee4</p> <p>\u54cd\u5e94: <pre><code>{\n  \"earliest\": \"2024-01-01T00:00:00Z\",\n  \"latest\": \"2024-01-01T12:00:00Z\",\n  \"count\": 1000\n}\n</code></pre></p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_5","title":"\u9519\u8bef\u54cd\u5e94","text":"<p>\u6240\u6709\u63a5\u53e3\u5728\u51fa\u9519\u65f6\u8fd4\u56de\u6807\u51c6\u9519\u8bef\u683c\u5f0f\uff1a</p> <pre><code>{\n  \"detail\": \"\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f\"\n}\n</code></pre> <p>HTTP \u72b6\u6001\u7801: - <code>200</code>: \u6210\u529f - <code>400</code>: \u8bf7\u6c42\u53c2\u6570\u9519\u8bef - <code>401</code>: \u672a\u8ba4\u8bc1\u6216 Token \u65e0\u6548 - <code>404</code>: \u8d44\u6e90\u4e0d\u5b58\u5728 - <code>500</code>: \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_6","title":"\u4f7f\u7528\u793a\u4f8b","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#javascript-axios","title":"JavaScript (Axios)","text":"<pre><code>import axios from 'axios';\n\n// \u8bbe\u7f6e\u57fa\u7840 URL\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api'\n});\n\n// \u767b\u5f55\nconst login = async (username, password) =&gt; {\n  const response = await api.post('/login', { username, password });\n  const { access_token } = response.data;\n\n  // \u5b58\u50a8 token\n  localStorage.setItem('auth_token', access_token);\n\n  // \u8bbe\u7f6e\u9ed8\u8ba4\u8bf7\u6c42\u5934\n  api.defaults.headers.common['Authorization'] = `Bearer ${access_token}`;\n\n  return response.data;\n};\n\n// \u83b7\u53d6\u96f7\u8fbe\u5217\u8868\nconst getRadarList = async (region = null) =&gt; {\n  const params = region ? { region } : {};\n  const response = await api.get('/radar/list', { params });\n  return response.data;\n};\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#python-requests","title":"Python (requests)","text":"<pre><code>import requests\n\nBASE_URL = \"http://localhost:8000/api\"\n\n# \u767b\u5f55\ndef login(username, password):\n    response = requests.post(\n        f\"{BASE_URL}/login\",\n        json={\"username\": username, \"password\": password}\n    )\n    data = response.json()\n    token = data[\"access_token\"]\n    return token\n\n# \u83b7\u53d6\u96f7\u8fbe\u5217\u8868\ndef get_radar_list(token, region=None):\n    headers = {\"Authorization\": f\"Bearer {token}\"}\n    params = {\"region\": region} if region else {}\n    response = requests.get(\n        f\"{BASE_URL}/radar/list\",\n        headers=headers,\n        params=params\n    )\n    return response.json()\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/API%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3/#_7","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>Token \u8fc7\u671f: access_token \u8fc7\u671f\u540e\u9700\u8981\u4f7f\u7528 refresh_token \u5237\u65b0</li> <li>\u65f6\u95f4\u683c\u5f0f: \u6240\u6709\u65f6\u95f4\u4f7f\u7528 ISO 8601 \u683c\u5f0f\uff0cUTC \u65f6\u533a</li> <li>\u5206\u9875: \u5927\u6570\u636e\u91cf\u67e5\u8be2\u5efa\u8bae\u4f7f\u7528\u5206\u9875\u53c2\u6570</li> <li>\u9650\u6d41: \uff08\u53ef\u6269\u5c55\uff09\u5efa\u8bae\u5b9e\u73b0\u8bf7\u6c42\u9650\u6d41</li> <li>\u7f13\u5b58: \u5ba2\u6237\u7aef\u53ef\u4ee5\u7f13\u5b58\u9759\u6001\u6570\u636e\uff0c\u51cf\u5c11\u8bf7\u6c42</li> </ol>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/","title":"\u524d\u7aef\u67b6\u6784\u8be6\u89e3","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_2","title":"\u6982\u8ff0","text":"<p>\u524d\u7aef\u91c7\u7528 Vue.js 3 \u7ec4\u5408\u5f0f API \u6784\u5efa\uff0c\u63d0\u4f9b\u73b0\u4ee3\u5316\u7684\u7528\u6237\u754c\u9762\u3002\u4e3b\u8981\u529f\u80fd\u5305\u62ec\uff1a - \u7528\u6237\u767b\u5f55/\u6ce8\u518c - \u96f7\u8fbe\u6570\u636e\u5b9e\u65f6\u5c55\u793a - \u65f6\u95f4\u8f74\u64ad\u653e\u63a7\u5236 - \u533a\u57df\u548c\u7ad9\u70b9\u7b5b\u9009 - \u56fe\u7247\u7f29\u653e\u548c\u9884\u89c8</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_3","title":"\u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#routerindexjs","title":"\u8def\u7531\u914d\u7f6e (<code>router/index.js</code>)","text":"<p>\u4f7f\u7528 Vue Router 4 \u8fdb\u884c\u8def\u7531\u7ba1\u7406\uff0c\u914d\u7f6e\u4e86\u8ba4\u8bc1\u5b88\u536b\u548c\u8def\u7531\u91cd\u5b9a\u5411\u3002</p> <p>\u8def\u7531\u5b9a\u4e49:</p> <pre><code>import { createRouter, createWebHistory } from 'vue-router'\nimport Login from '../Login.vue'\nimport Register from '../Register.vue'\nimport RadarView from '../RadarView.vue'\n\nconst routes = [\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login,\n    meta: { public: true }\n  },\n  {\n    path: '/register',\n    name: 'Register',\n    component: Register,\n    meta: { public: true }\n  },\n  {\n    path: '/radar/mosaic',\n    name: 'RadarMosaic',\n    component: RadarView,\n    props: { viewMode: 'mosaic', allowModeSwitch: false },\n    meta: { requiresAuth: true }\n  },\n  {\n    path: '/radar/single',\n    name: 'RadarSingle',\n    component: RadarView,\n    props: { viewMode: 'single', allowModeSwitch: false },\n    meta: { requiresAuth: true }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n})\n</code></pre> <p>\u8def\u7531\u5b88\u536b:</p> <pre><code>router.beforeEach((to, from, next) =&gt; {\n  const token = localStorage.getItem('auth_token')\n  if (to.meta.requiresAuth &amp;&amp; !token) {\n    next({ path: '/login', query: { redirect: to.fullPath } })\n    return\n  }\n  if (to.path === '/login' &amp;&amp; token) {\n    next({ path: '/' })\n    return\n  }\n  next()\n})\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#appvue","title":"\u4e3b\u5e94\u7528\u7ec4\u4ef6 (<code>App.vue</code>)","text":"<p>\u6839\u7ec4\u4ef6\uff0c\u4f5c\u4e3a\u5e94\u7528\u7684\u5165\u53e3\u5bb9\u5668\uff0c\u8d1f\u8d23\u6e32\u67d3\u8def\u7531\u89c6\u56fe\u3002</p> <pre><code>&lt;template&gt;\n  &lt;div id=\"app\"&gt;\n    &lt;router-view /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'App'\n}\n&lt;/script&gt;\n\n&lt;style&gt;\n/* \u5168\u5c40\u6837\u5f0f\u53ef\u6309\u9700\u6269\u5c55 */\n&lt;/style&gt;\n</code></pre> <p>\u8bf4\u660e: \u8fd9\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u5bb9\u5668\u7ec4\u4ef6\uff0c\u4e3b\u8981\u4f5c\u7528\u662f\uff1a - \u63d0\u4f9b\u5e94\u7528\u6839\u8282\u70b9 - \u6e32\u67d3\u5f53\u524d\u8def\u7531\u5bf9\u5e94\u7684\u7ec4\u4ef6 - \u53ef\u5728\u6b64\u6dfb\u52a0\u5168\u5c40\u5e03\u5c40\uff08\u5982\u5bfc\u822a\u680f\u3001\u4fa7\u8fb9\u680f\u7b49\uff09</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_4","title":"\u767b\u5f55\u548c\u6ce8\u518c\u7ec4\u4ef6","text":"<p>Login.vue \u548c Register.vue \u662f\u76f8\u5bf9\u7b80\u5355\u7684\u8868\u5355\u7ec4\u4ef6\uff0c\u8d1f\u8d23\uff1a - \u7528\u6237\u8f93\u5165\u9a8c\u8bc1 - API \u8c03\u7528 - Token \u5b58\u50a8 - \u9875\u9762\u8df3\u8f6c</p> <p>\u8fd9\u4e24\u4e2a\u7ec4\u4ef6\u7ed3\u6784\u76f8\u4f3c\uff0c\u90fd\u5305\u542b\u8868\u5355\u9a8c\u8bc1\u7801\u6821\u9a8c\u548c\u9519\u8bef\u5904\u7406\u903b\u8f91\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#radarviewvue","title":"\u96f7\u8fbe\u5c55\u793a\u7ec4\u4ef6 (<code>RadarView.vue</code>)","text":"<p>\u8fd9\u662f\u7cfb\u7edf\u7684\u6838\u5fc3\u7ec4\u4ef6\uff0c\u5305\u542b\u6240\u6709\u96f7\u8fbe\u6570\u636e\u5c55\u793a\u548c\u4ea4\u4e92\u529f\u80fd\u3002\u7ec4\u4ef6\u91c7\u7528 Vue 3 \u7ec4\u5408\u5f0f API\uff0c\u4ee3\u7801\u91cf\u7ea6 2000 \u884c\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_5","title":"\u7ec4\u4ef6\u6a21\u677f\u7ed3\u6784","text":"<p>\u7ec4\u4ef6\u6a21\u677f\u5206\u4e3a\u4ee5\u4e0b\u51e0\u4e2a\u4e3b\u8981\u533a\u57df\uff1a</p> <p>\u5bfc\u822a\u680f\u533a\u57df (<code>header</code>): - \u663e\u793a\u6807\u9898\u548c\u526f\u6807\u9898 - \u6a21\u5f0f\u5207\u6362\u6807\u7b7e\uff08\u62fc\u56fe/\u5355\u7ad9\uff09 - \u5f53\u524d\u96f7\u8fbe\u65f6\u95f4\u663e\u793a - \u7528\u6237\u4fe1\u606f\u548c\u64cd\u4f5c\u6309\u94ae\uff08\u4fee\u6539\u5bc6\u7801\u3001\u9000\u51fa\uff09</p> <p>\u63a7\u5236\u9762\u677f\u533a\u57df (<code>control-panel</code>): - \u96f7\u8fbe\u7c7b\u578b\u9009\u62e9\uff08\u62fc\u56fe/\u5355\u7ad9\uff09 - \u7ad9\u70b9\u9009\u62e9\u5668\uff08\u5355\u7ad9\u6a21\u5f0f\uff09\uff1a\u7701\u4efd\u3001\u57ce\u5e02\u3001\u7ad9\u70b9\u4e09\u7ea7\u8054\u52a8 - \u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668 - \u56fe\u7247\u7f29\u653e\u63a7\u5236 - \u6570\u636e\u5237\u65b0\u6309\u94ae</p> <p>\u62fc\u56fe\u5de5\u5177\u680f (<code>mosaic-toolbar</code>): - \u533a\u57df\u9009\u62e9\u4e0b\u62c9\u6846\uff08\u5168\u56fd\u3001\u534e\u5317\u3001\u4e1c\u5317\u7b49\uff09 - \u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668 - \u7f29\u653e\u63a7\u5236</p> <p>\u4e3b\u89c6\u56fe\u533a\u57df (<code>viewer-layout</code>): - \u5de6\u4fa7\u8fb9\u680f: \u65f6\u95f4\u5217\u8868\uff0c\u663e\u793a\u6240\u6709\u53ef\u7528\u65f6\u95f4\u70b9 - \u4e2d\u95f4\u533a\u57df: \u96f7\u8fbe\u56fe\u50cf\u5c55\u793a\u5bb9\u5668 - \u53f3\u4fa7\u8fb9\u680f: \u5feb\u6377\u65f6\u95f4\u6bb5\u9009\u62e9\uff08\u6700\u8fd11-6\u5c0f\u65f6\uff09</p> <p>\u64ad\u653e\u63a7\u5236\u9762\u677f (<code>modern-playback-panel</code>): - \u64ad\u653e\u63a7\u5236\u6309\u94ae\u7ec4\uff08\u5f00\u59cb\u3001\u4e0a\u4e00\u5e27\u3001\u64ad\u653e/\u6682\u505c\u3001\u4e0b\u4e00\u5e27\u3001\u7ed3\u675f\uff09 - \u5f53\u524d\u65f6\u95f4\u663e\u793a - \u64ad\u653e\u901f\u5ea6\u63a7\u5236\uff08\u52a0\u901f/\u51cf\u901f\uff09 - \u5faa\u73af\u64ad\u653e\u5f00\u5173 - \u65f6\u95f4\u8f74\u6ed1\u5757</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_6","title":"\u6838\u5fc3\u529f\u80fd\u5b9e\u73b0","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_7","title":"\u6570\u636e\u52a0\u8f7d","text":"<p>\u96f7\u8fbe\u62fc\u56fe\u6570\u636e\u52a0\u8f7d:</p> <pre><code>const loadRadarData = async (useCache = true, options = {}) =&gt; {\n  loading.value = true\n  try {\n    const cacheKey = `radar-${region.value}-${dateRange.value ? 'range' : 'timeline'}`\n\n    // \u5c1d\u8bd5\u4ece\u7f13\u5b58\u52a0\u8f7d\n    if (useCache) {\n      const cached = getCachedData(cacheKey)\n      if (cached) {\n        imageList.value = cached.images || []\n        if (imageList.value.length &gt; 0) {\n          imageList.value.sort((a, b) =&gt; new Date(a.timestamp) - new Date(b.timestamp))\n          currentIndex.value = imageList.value.length - 1\n          loading.value = false\n          return\n        }\n      }\n    }\n\n    // \u6839\u636e\u65f6\u95f4\u8303\u56f4\u6216\u9ed8\u8ba4\u65f6\u95f4\u52a0\u8f7d\u6570\u636e\n    if (dateRange.value &amp;&amp; dateRange.value.length === 2) {\n      const [startLocal, endLocal] = dateRange.value\n      const startISO = new Date(startLocal).toISOString()\n      const endISO = new Date(endLocal).toISOString()\n\n      // \u9650\u5236\u65f6\u95f4\u8303\u56f4\u4e0d\u8d85\u8fc730\u5929\n      const daysDiff = Math.ceil((new Date(endLocal) - new Date(startLocal)) / (1000 * 60 * 60 * 24))\n      if (daysDiff &gt; 30) {\n        ElMessage.warning(`\u9009\u62e9\u7684\u65f6\u95f4\u8303\u56f4\u8fc7\u957f\uff08${daysDiff}\u5929\uff09\uff0c\u8bf7\u9009\u62e930\u5929\u4ee5\u5185\u7684\u8303\u56f4`)\n        loading.value = false\n        return\n      }\n\n      const resp = await getRadarByRange(startISO, endISO, region.value, null, null)\n      imageList.value = (resp.images || []).map((img) =&gt; ({\n        ...img,\n        width: img.width || 0,\n        height: img.height || 0\n      }))\n    } else {\n      // \u9ed8\u8ba4\u52a0\u8f7d\u6700\u8fd16\u5c0f\u65f6\u6570\u636e\n      const timeRange = await getTimeRange(region.value)\n      if (timeRange.latest) {\n        const latestTime = new Date(timeRange.latest)\n        const startTime = new Date(latestTime.getTime() - 6 * 60 * 60 * 1000)\n        const response = await getRadarByRange(\n          startTime.toISOString(),\n          latestTime.toISOString(),\n          region.value,\n          null,\n          null\n        )\n        imageList.value = (response.images || []).map((img) =&gt; ({\n          ...img,\n          width: img.width || 0,\n          height: img.height || 0\n        }))\n      }\n    }\n\n    // \u6392\u5e8f\u5e76\u8bbe\u7f6e\u5f53\u524d\u7d22\u5f15\n    if (imageList.value.length &gt; 0) {\n      imageList.value.sort((a, b) =&gt; new Date(a.timestamp) - new Date(b.timestamp))\n      currentIndex.value = imageList.value.length - 1\n      cacheData(cacheKey, { images: imageList.value })\n      preloadNearbyFrames(currentIndex.value).catch(() =&gt; {})\n    }\n  } catch (error) {\n    console.error('Failed to load radar data:', error)\n  } finally {\n    loading.value = false\n  }\n}\n</code></pre> <p>\u5355\u7ad9\u96f7\u8fbe\u6570\u636e\u52a0\u8f7d:</p> <p>\u5355\u7ad9\u6a21\u5f0f\u7684\u6570\u636e\u52a0\u8f7d\u903b\u8f91\u7c7b\u4f3c\uff0c\u4f46\u589e\u52a0\u4e86\u7ad9\u70b9\u7b5b\u9009\u548c\u5feb\u901f\u52a0\u8f7d\u673a\u5236\uff1a - \u7ad9\u70b9\u5207\u6362\u65f6\u5148\u5feb\u901f\u52a0\u8f7d\u6700\u65b0\u4e00\u5f20\u56fe\u7247 - \u540e\u53f0\u5f02\u6b65\u52a0\u8f7d\u5b8c\u6574\u6570\u636e - \u667a\u80fd\u5408\u5e76\u65b0\u65e7\u6570\u636e</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_8","title":"\u56fe\u7247\u9884\u52a0\u8f7d\u673a\u5236","text":"<p>\u5355\u5f20\u56fe\u7247\u9884\u52a0\u8f7d\uff08\u5e26\u91cd\u8bd5\uff09:</p> <pre><code>const preloadImage = (url, retryCount = 0) =&gt; {\n  return new Promise((resolve, reject) =&gt; {\n    // \u68c0\u67e5\u7f13\u5b58\n    if (imageCache.value.has(url)) {\n      resolve(imageCache.value.get(url))\n      return\n    }\n\n    const img = new Image()\n    img.onload = () =&gt; {\n      imageCache.value.set(url, img)  // \u5b58\u5165\u7f13\u5b58\n      resolve(img)\n    }\n    img.onerror = (error) =&gt; {\n      // \u5931\u8d25\u91cd\u8bd5\uff0c\u6700\u591a\u91cd\u8bd52\u6b21\n      if (retryCount &lt; 2) {\n        setTimeout(() =&gt; {\n          preloadImage(url, retryCount + 1).then(resolve).catch(reject)\n        }, 1000 * (retryCount + 1))\n      } else {\n        reject(error)\n      }\n    }\n    img.src = url\n  })\n}\n</code></pre> <p>\u667a\u80fd\u9884\u52a0\u8f7d\u9644\u8fd1\u5e27:</p> <pre><code>const preloadNearbyFrames = async (index) =&gt; {\n  if (imageList.value.length === 0) return\n\n  const totalImages = imageList.value.length\n  let range, batchSize, delay\n\n  // \u6839\u636e\u6570\u636e\u91cf\u548c\u64ad\u653e\u72b6\u6001\u52a8\u6001\u8c03\u6574\u7b56\u7565\n  if (isPlaying.value) {\n    // \u64ad\u653e\u65f6\uff1a\u66f4\u5927\u8303\u56f4\uff0c\u66f4\u5feb\u901f\u5ea6\n    if (totalImages &gt; 10000) { range = 30; batchSize = 15; delay = 30 }\n    else if (totalImages &gt; 5000) { range = 40; batchSize = 20; delay = 25 }\n    else { range = 60; batchSize = 30; delay = 15 }\n  } else {\n    // \u6682\u505c\u65f6\uff1a\u8f83\u5c0f\u8303\u56f4\uff0c\u8f83\u6162\u901f\u5ea6\n    if (totalImages &gt; 10000) { range = 30; batchSize = 8; delay = 100 }\n    else if (totalImages &gt; 5000) { range = 40; batchSize = 10; delay = 80 }\n    else { range = 60; batchSize = 15; delay = 50 }\n  }\n\n  // \u8ba1\u7b97\u9884\u52a0\u8f7d\u8303\u56f4\n  const playMultiplier = isPlaying.value ? 3 : 1\n  const effectiveRange = Math.min(range * playMultiplier, totalImages)\n  const startIndex = Math.max(0, index - effectiveRange)\n  const endIndex = Math.min(totalImages - 1, index + effectiveRange)\n\n  // \u5206\u6279\u52a0\u8f7d\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\n  for (let i = startIndex; i &lt;= endIndex; i += batchSize) {\n    const batchEnd = Math.min(i + batchSize - 1, endIndex)\n    const batch = []\n    for (let j = i; j &lt;= batchEnd; j++) {\n      if (imageList.value[j]?.url &amp;&amp; !imageCache.value.has(imageList.value[j].url)) {\n        batch.push(preloadImage(imageList.value[j].url).catch(() =&gt; {}))\n      }\n    }\n    if (batch.length &gt; 0) {\n      await Promise.allSettled(batch)\n      if (i + batchSize &lt;= endIndex) {\n        await new Promise(resolve =&gt; setTimeout(resolve, delay))\n      }\n    }\n  }\n}\n\n// \u76d1\u542c\u5f53\u524d\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\nwatch(currentIndex, (newIndex) =&gt; {\n  preloadNearbyFrames(newIndex)\n})\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_9","title":"\u7f13\u5b58\u673a\u5236","text":"<p>\u6570\u636e\u7f13\u5b58\uff08Map + localStorage\uff09:</p> <pre><code>const CACHE_TTL = 15 * 60 * 1000  // 15\u5206\u949f\nconst dataCache = ref(new Map())\n\nconst cacheData = (key, data) =&gt; {\n  const item = { data, timestamp: Date.now(), ttl: CACHE_TTL }\n  dataCache.value.set(key, item)\n  try {\n    localStorage.setItem(`radar-cache-${key}`, JSON.stringify(item))\n  } catch {}\n}\n\nconst getCachedData = (key) =&gt; {\n  // \u5148\u68c0\u67e5\u5185\u5b58\u7f13\u5b58\n  if (dataCache.value.has(key)) {\n    const item = dataCache.value.get(key)\n    if (Date.now() - item.timestamp &lt; item.ttl) return item.data\n    dataCache.value.delete(key)\n  }\n\n  // \u518d\u68c0\u67e5 localStorage\n  try {\n    const stored = localStorage.getItem(`radar-cache-${key}`)\n    if (stored) {\n      const item = JSON.parse(stored)\n      if (Date.now() - item.timestamp &lt; item.ttl) {\n        dataCache.value.set(key, item)\n        return item.data\n      } else {\n        localStorage.removeItem(`radar-cache-${key}`)\n      }\n    }\n  } catch {}\n  return null\n}\n</code></pre> <p>\u56fe\u7247\u7f13\u5b58:</p> <p>\u4f7f\u7528 <code>Map</code> \u5b58\u50a8\u5df2\u52a0\u8f7d\u7684\u56fe\u7247\u5bf9\u8c61\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d\uff1a</p> <pre><code>const imageCache = ref(new Map())\n\n// \u5728 preloadImage \u4e2d\u81ea\u52a8\u7f13\u5b58\nimg.onload = () =&gt; {\n  imageCache.value.set(url, img)\n  resolve(img)\n}\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_10","title":"\u64ad\u653e\u63a7\u5236","text":"<p>\u81ea\u52a8\u64ad\u653e\u5b9e\u73b0:</p> <pre><code>const playInterval = ref(null)\nconst playbackIntervalMs = ref(100)  // \u9ed8\u8ba4\u7ea610fps\nconst loopEnabled = ref(false)\n\nconst startAutoPlay = () =&gt; {\n  isPlaying.value = true\n  if (playInterval.value) {\n    clearInterval(playInterval.value)\n    playInterval.value = null\n  }\n\n  // \u5982\u679c\u5df2\u5230\u672b\u5c3e\uff0c\u4ece\u5934\u5f00\u59cb\n  if (imageList.value.length &gt; 0 &amp;&amp; currentIndex.value &gt;= imageList.value.length - 1) {\n    currentIndex.value = 0\n  }\n\n  // \u9884\u52a0\u8f7d\u9644\u8fd1\u5e27\n  preloadNearbyFrames(currentIndex.value).catch(() =&gt; {})\n\n  // \u64ad\u653e\u5b9a\u65f6\u5668\n  playInterval.value = setInterval(async () =&gt; {\n    if (currentIndex.value &lt; imageList.value.length - 1) {\n      currentIndex.value++\n      preloadNearbyFrames(currentIndex.value).catch(() =&gt; {})\n    } else {\n      if (loopEnabled.value &amp;&amp; imageList.value.length &gt; 0) {\n        currentIndex.value = 0  // \u5faa\u73af\u64ad\u653e\n      } else {\n        stopAutoPlay()\n      }\n    }\n  }, playbackIntervalMs.value)\n}\n\nconst stopAutoPlay = () =&gt; {\n  isPlaying.value = false\n  if (playInterval.value) {\n    clearInterval(playInterval.value)\n    playInterval.value = null\n  }\n}\n</code></pre> <p>\u64ad\u653e\u901f\u5ea6\u63a7\u5236:</p> <pre><code>const decreaseSpeed = () =&gt; {\n  playbackIntervalMs.value = Math.min(2000, playbackIntervalMs.value + 200)\n  restartIfPlaying()\n  ElMessage.info(`\u901f\u5ea6: ${(1000 / playbackIntervalMs.value).toFixed(1)} fps`)\n}\n\nconst increaseSpeed = () =&gt; {\n  playbackIntervalMs.value = Math.max(100, playbackIntervalMs.value - 100)\n  restartIfPlaying()\n  ElMessage.info(`\u901f\u5ea6: ${(1000 / playbackIntervalMs.value).toFixed(1)} fps`)\n}\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_11","title":"\u54cd\u5e94\u5f0f\u72b6\u6001\u7ba1\u7406","text":"<p>\u4f7f\u7528 Vue 3 \u7ec4\u5408\u5f0f API \u8fdb\u884c\u72b6\u6001\u7ba1\u7406\uff1a</p> <pre><code>import { ref, computed, watch } from 'vue'\n\nexport default {\n  setup() {\n    // \u6838\u5fc3\u72b6\u6001\n    const imageList = ref([])\n    const currentIndex = ref(0)\n    const radarMode = ref('mosaic')\n    const region = ref('NATIONAL')\n    const selectedStation = ref('')\n    const isPlaying = ref(false)\n    const dateRange = ref(null)\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u81ea\u52a8\u4ece\u7d22\u5f15\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\n    const currentImage = computed(() =&gt; {\n      if (imageList.value.length === 0) return null\n      return imageList.value[currentIndex.value]\n    })\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u65f6\u95f4\u5217\u8868\u9879\n    const timeListItems = computed(() =&gt; {\n      return imageList.value.map((item, index) =&gt; ({\n        key: `${item.timestamp}-${index}`,\n        index,\n        timestamp: item.timestamp,\n        display: formatTimestamp(item.timestamp)\n      })).reverse()\n    })\n\n    return {\n      imageList,\n      currentIndex,\n      currentImage,\n      timeListItems,\n      // ... \u5176\u4ed6\u72b6\u6001\u548c\u65b9\u6cd5\n    }\n  }\n}\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_12","title":"\u6027\u80fd\u4f18\u5316\u6280\u5de7","text":"<p>\u9632\u6296\u5904\u7406\uff08\u7ad9\u70b9/\u533a\u57df\u5207\u6362\uff09:</p> <pre><code>let stationChangeTimer = null\n\nconst scheduleStationChange = (nextStation) =&gt; {\n  clearStationChangeTimer()\n  cancelStationRequests()\n\n  stationChangeTimer = setTimeout(() =&gt; {\n    stationChangeTimer = null\n    runStationChange(nextStation)\n  }, 300)  // 300ms \u9632\u6296\u5ef6\u8fdf\n}\n</code></pre> <p>\u8bf7\u6c42\u53d6\u6d88\uff08\u4f7f\u7528 AbortController\uff09:</p> <pre><code>const activeStationController = ref(null)\n\nconst cancelStationRequests = () =&gt; {\n  if (activeStationController.value) {\n    activeStationController.value.abort()\n    activeStationController.value = null\n  }\n}\n\nconst runStationChange = async (nextStation) =&gt; {\n  const controller = new AbortController()\n  activeStationController.value = controller\n\n  try {\n    await onStationChange(nextStation, requestId, controller)\n  } catch (error) {\n    if (!isAbortError(error)) console.error('\u7ad9\u70b9\u5207\u6362\u5931\u8d25:', error)\n  }\n}\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#api-apiradarjs","title":"API \u8c03\u7528\u5c01\u88c5 (<code>api/radar.js</code>)","text":"<p>\u5c01\u88c5\u6240\u6709\u540e\u7aef API \u8c03\u7528\uff0c\u7edf\u4e00\u5904\u7406\u8ba4\u8bc1\u3001\u9519\u8bef\u548c\u8bf7\u6c42\u53d6\u6d88\u3002</p> <p>Axios \u5b9e\u4f8b\u914d\u7f6e:</p> <pre><code>import axios from 'axios'\n\nconst API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api'\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 60000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n</code></pre> <p>\u8bf7\u6c42\u62e6\u622a\u5668\uff08\u81ea\u52a8\u6dfb\u52a0 Token\uff09:</p> <pre><code>apiClient.interceptors.request.use(\n  config =&gt; {\n    const token = localStorage.getItem('auth_token')\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`\n    }\n    return config\n  },\n  error =&gt; Promise.reject(error)\n)\n</code></pre> <p>\u54cd\u5e94\u62e6\u622a\u5668\uff08Token \u5237\u65b0\uff09:</p> <pre><code>apiClient.interceptors.response.use(\n  response =&gt; response.data,\n  async error =&gt; {\n    // 401 \u9519\u8bef\u65f6\u5c1d\u8bd5\u5237\u65b0 Token\n    const originalRequest = error.config\n    if (error.response?.status === 401 &amp;&amp; !originalRequest._retry) {\n      const refreshToken = localStorage.getItem('refresh_token')\n      if (refreshToken) {\n        try {\n          const resp = await axios.post(`${API_BASE_URL}/refresh`, { \n            refresh_token: refreshToken \n          })\n          const newAccess = resp.data?.access_token\n          localStorage.setItem('auth_token', newAccess)\n          originalRequest.headers.Authorization = `Bearer ${newAccess}`\n          return apiClient(originalRequest)\n        } catch (refreshErr) {\n          // \u5237\u65b0\u5931\u8d25\uff0c\u8df3\u8f6c\u767b\u5f55\n          localStorage.clear()\n          window.location.reload()\n        }\n      }\n    }\n    return Promise.reject(error)\n  }\n)\n</code></pre> <p>API \u65b9\u6cd5\u793a\u4f8b:</p> <pre><code>export const getRadarTimeline = (hours = 6, region) =&gt; {\n  const params = { hours }\n  if (region) params.region = region\n  return apiClient.get('/radar/timeline', { params })\n}\n\nexport const getRadarByRange = (startISO, endISO, region, page, pageSize, options = {}) =&gt; {\n  const params = { start_time: startISO, end_time: endISO }\n  if (region) params.region = region\n  if (page) params.page = page\n  if (pageSize) params.page_size = pageSize\n  const config = { params }\n  if (options.signal) config.signal = options.signal  // \u652f\u6301\u8bf7\u6c42\u53d6\u6d88\n  return apiClient.get('/radar/list', config)\n}\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_13","title":"\u72b6\u6001\u7ba1\u7406","text":"<p>\u4f7f\u7528 Vue 3 \u7ec4\u5408\u5f0f API \u8fdb\u884c\u72b6\u6001\u7ba1\u7406\uff1a</p> <ul> <li>\u672c\u5730\u72b6\u6001: \u4f7f\u7528 <code>ref</code> \u548c <code>reactive</code></li> <li>\u8ba1\u7b97\u5c5e\u6027: \u4f7f\u7528 <code>computed</code> \u81ea\u52a8\u8ba1\u7b97\u884d\u751f\u72b6\u6001</li> <li>\u526f\u4f5c\u7528: \u4f7f\u7528 <code>watch</code> \u548c <code>watchEffect</code> \u54cd\u5e94\u72b6\u6001\u53d8\u5316</li> <li>\u751f\u547d\u5468\u671f: \u4f7f\u7528 <code>onMounted</code>\u3001<code>onUnmounted</code> \u5904\u7406\u7ec4\u4ef6\u751f\u547d\u5468\u671f</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_14","title":"\u6837\u5f0f\u8bbe\u8ba1","text":"<p>\u4f7f\u7528 Scoped CSS \u548c\u73b0\u4ee3 CSS \u7279\u6027\uff1a</p> <ul> <li>Flexbox \u5e03\u5c40: \u5b9e\u73b0\u54cd\u5e94\u5f0f\u5e03\u5c40</li> <li>CSS \u53d8\u91cf: \u652f\u6301\u4e3b\u9898\u5207\u6362\uff08\u53ef\u6269\u5c55\uff09</li> <li>\u8fc7\u6e21\u52a8\u753b: \u5e73\u6ed1\u7684\u72b6\u6001\u5207\u6362\u6548\u679c</li> <li>\u54cd\u5e94\u5f0f\u8bbe\u8ba1: \u4f7f\u7528\u5a92\u4f53\u67e5\u8be2\u9002\u914d\u4e0d\u540c\u5c4f\u5e55\u5c3a\u5bf8</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_15","title":"\u6784\u5efa\u548c\u90e8\u7f72","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_16","title":"\u5f00\u53d1\u73af\u5883","text":"<pre><code>npm install\nnpm run dev  # Vite \u5f00\u53d1\u670d\u52a1\u5668\uff0c\u652f\u6301\u70ed\u66f4\u65b0\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_17","title":"\u751f\u4ea7\u6784\u5efa","text":"<pre><code>npm run build  # \u6784\u5efa\u5230 dist/ \u76ee\u5f55\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#docker","title":"Docker \u6784\u5efa","text":"<p>\u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\uff1a 1. \u6784\u5efa\u9636\u6bb5: \u5b89\u88c5\u4f9d\u8d56\uff0c\u4f7f\u7528 Vite \u6784\u5efa\u9879\u76ee 2. \u8fd0\u884c\u9636\u6bb5: \u4f7f\u7528 Nginx \u63d0\u4f9b\u9759\u6001\u6587\u4ef6\u670d\u52a1</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_18","title":"\u6d4f\u89c8\u5668\u517c\u5bb9\u6027","text":"<ul> <li>\u73b0\u4ee3\u6d4f\u89c8\u5668\uff08Chrome\u3001Firefox\u3001Safari\u3001Edge \u6700\u65b0\u7248\u672c\uff09</li> <li>\u652f\u6301 ES6+ \u7279\u6027</li> <li>\u9700\u8981\u652f\u6301 async/await</li> <li>\u9700\u8981\u652f\u6301 Fetch API \u6216 Axios</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_19","title":"\u6027\u80fd\u6307\u6807","text":"<ul> <li>\u9996\u5c4f\u52a0\u8f7d: &lt; 2s\uff08\u53d6\u51b3\u4e8e\u7f51\u7edc\u548c\u670d\u52a1\u5668\uff09</li> <li>\u56fe\u7247\u9884\u52a0\u8f7d: \u667a\u80fd\u5206\u6279\u52a0\u8f7d\uff0c\u4e0d\u963b\u585e\u4e3b\u7ebf\u7a0b</li> <li>\u64ad\u653e\u6d41\u7545\u5ea6: 60fps\uff08\u53d6\u51b3\u4e8e\u6570\u636e\u91cf\u548c\u8bbe\u5907\u6027\u80fd\uff09</li> <li>\u5185\u5b58\u4f7f\u7528: \u56fe\u7247\u7f13\u5b58\u81ea\u52a8\u9650\u5236\uff0c\u5b9a\u671f\u6e05\u7406\u8fc7\u671f\u7f13\u5b58</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/","title":"\u540e\u7aef\u67b6\u6784\u8be6\u89e3","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_2","title":"\u6982\u8ff0","text":"<p>\u540e\u7aef\u91c7\u7528 FastAPI \u6846\u67b6\u6784\u5efa\uff0c\u63d0\u4f9b RESTful API \u670d\u52a1\u3002\u4e3b\u8981\u804c\u8d23\u5305\u62ec\uff1a - \u7528\u6237\u8ba4\u8bc1\u548c\u6388\u6743 - \u96f7\u8fbe\u6570\u636e\u67e5\u8be2\u548c\u7ba1\u7406 - \u9759\u6001\u6587\u4ef6\u670d\u52a1 - \u6570\u636e\u5e93\u64cd\u4f5c</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_3","title":"\u6838\u5fc3\u6a21\u5757","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#1-api-api","title":"1. API \u8def\u7531\u6a21\u5757 (<code>api/</code>)","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#apiauthpy","title":"\u8ba4\u8bc1\u8def\u7531 (<code>api/auth.py</code>)","text":"<p>\u63d0\u4f9b\u7528\u6237\u8ba4\u8bc1\u76f8\u5173\u7684 API \u7aef\u70b9\uff1a</p> <p>POST <code>/api/login</code> - \u7528\u6237\u767b\u5f55</p> <pre><code>@auth_router.post(\"/login\", response_model=LoginResponse)\nasync def login(login_data: LoginRequest):\n    \"\"\"\u7528\u6237\u767b\u5f55\"\"\"\n    async with AsyncSessionLocal() as session:\n        user = await authenticate_user(session, login_data.username, login_data.password)\n\n        if not user:\n            logger.warning(f\"\u767b\u5f55\u5931\u8d25: \u7528\u6237 {login_data.username} \u8ba4\u8bc1\u5931\u8d25\")\n            raise HTTPException(\n                status_code=status.HTTP_401_UNAUTHORIZED,\n                detail=\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\"\n            )\n\n        # \u521b\u5efa\u8bbf\u95ee\u4ee4\u724c\uff0830\u5206\u949f\uff09\u548c\u5237\u65b0\u4ee4\u724c\uff087\u5929\uff09\n        access_token = create_access_token(data={\"sub\": user.username})\n        refresh_token = create_refresh_token(data={\"sub\": user.username})\n\n        logger.info(f\"\u7528\u6237 {user.username} \u767b\u5f55\u6210\u529f\")\n\n        return LoginResponse(\n            access_token=access_token,\n            refresh_token=refresh_token,\n            token_type=\"bearer\",\n            username=user.username\n        )\n</code></pre> <p>POST <code>/api/register</code> - \u7528\u6237\u6ce8\u518c</p> <pre><code>@auth_router.post(\"/register\", response_model=RegisterResponse)\nasync def register(register_data: RegisterRequest):\n    \"\"\"\u7528\u6237\u6ce8\u518c\"\"\"\n    # \u9a8c\u8bc1\u9a8c\u8bc1\u7801\n    if not verify_captcha(register_data.captcha_id, register_data.captcha_text):\n        raise HTTPException(\n            status_code=status.HTTP_400_BAD_REQUEST,\n            detail=\"\u9a8c\u8bc1\u7801\u9519\u8bef\u6216\u5df2\u8fc7\u671f\"\n        )\n\n    async with AsyncSessionLocal() as session:\n        # \u68c0\u67e5\u7528\u6237\u540d\u662f\u5426\u5df2\u5b58\u5728\n        stmt = select(UserModel).where(UserModel.username == register_data.username)\n        result = await session.execute(stmt)\n        existing_user = result.scalar_one_or_none()\n\n        if existing_user:\n            raise HTTPException(\n                status_code=status.HTTP_400_BAD_REQUEST,\n                detail=\"\u7528\u6237\u540d\u5df2\u5b58\u5728\"\n            )\n\n        # \u521b\u5efa\u65b0\u7528\u6237\uff08\u5bc6\u7801\u4f7f\u7528 bcrypt \u52a0\u5bc6\uff09\n        password_hash = get_password_hash(register_data.password)\n        new_user = UserModel(\n            username=register_data.username,\n            password_hash=password_hash,\n            is_active=True\n        )\n\n        session.add(new_user)\n        await session.commit()\n        return RegisterResponse(message=\"\u6ce8\u518c\u6210\u529f\", username=new_user.username)\n</code></pre> <p>POST <code>/api/change-password</code> - \u4fee\u6539\u5bc6\u7801\uff08\u9700\u8981\u8ba4\u8bc1\uff09</p> <p>GET <code>/api/captcha</code> - \u83b7\u53d6\u9a8c\u8bc1\u7801 ID</p> <p>GET <code>/api/captcha/{captcha_id}/image</code> - \u83b7\u53d6\u9a8c\u8bc1\u7801\u56fe\u7247</p> <p>POST <code>/api/refresh</code> - \u5237\u65b0 Token</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#apiroutespy","title":"\u96f7\u8fbe\u6570\u636e\u8def\u7531 (<code>api/routes.py</code>)","text":"<p>\u63d0\u4f9b\u96f7\u8fbe\u6570\u636e\u67e5\u8be2 API\uff0c\u6240\u6709\u63a5\u53e3\u90fd\u9700\u8981\u8ba4\u8bc1\uff1a</p> <p>\u96f7\u8fbe\u62fc\u56fe\u63a5\u53e3: - <code>GET /api/radar/latest</code>: \u83b7\u53d6\u6700\u65b0\u96f7\u8fbe\u56fe\u50cf - <code>GET /api/radar/list</code>: \u83b7\u53d6\u96f7\u8fbe\u56fe\u50cf\u5217\u8868\uff08\u652f\u6301\u5206\u9875\u3001\u65f6\u95f4\u8303\u56f4\u3001\u533a\u57df\u7b5b\u9009\uff09 - <code>GET /api/radar/timeline</code>: \u83b7\u53d6\u65f6\u95f4\u8f74\u6570\u636e\uff08\u6700\u8fd1 N \u5c0f\u65f6\uff09 - <code>GET /api/radar/time-range</code>: \u83b7\u53d6\u6570\u636e\u65f6\u95f4\u8303\u56f4 - <code>GET /api/radar/latest-by-region</code>: \u5feb\u901f\u83b7\u53d6\u6307\u5b9a\u533a\u57df\u6700\u65b0\u6570\u636e</p> <p>\u5355\u7ad9\u96f7\u8fbe\u63a5\u53e3: - <code>GET /api/radar/single/stations</code>: \u83b7\u53d6\u5355\u7ad9\u96f7\u8fbe\u7ad9\u70b9\u5217\u8868 - <code>GET /api/radar/single/list</code>: \u83b7\u53d6\u5355\u7ad9\u96f7\u8fbe\u56fe\u50cf\u5217\u8868 - <code>GET /api/radar/single/latest</code>: \u83b7\u53d6\u6307\u5b9a\u7ad9\u70b9\u6700\u65b0\u56fe\u50cf - <code>GET /api/radar/single/time-range</code>: \u83b7\u53d6\u5355\u7ad9\u6570\u636e\u65f6\u95f4\u8303\u56f4</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#2-database","title":"2. \u6570\u636e\u5e93\u6a21\u5757 (<code>database/</code>)","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#databasemodelspy","title":"\u6570\u636e\u6a21\u578b (<code>database/models.py</code>)","text":"<p>\u5b9a\u4e49\u4e86\u4e09\u4e2a\u4e3b\u8981\u6570\u636e\u6a21\u578b\uff1a</p> <p>RadarImageModel - \u96f7\u8fbe\u62fc\u56fe\u56fe\u50cf\u6a21\u578b</p> <pre><code>from datetime import datetime, timezone\nfrom sqlalchemy import Column, Integer, String, DateTime, BigInteger, Index\nfrom database.base import Base\n\nclass RadarImageModel(Base):\n    \"\"\"\u96f7\u8fbe\u56fe\u50cf\u6570\u636e\u6a21\u578b\"\"\"\n    __tablename__ = \"radar_images\"\n\n    id = Column(Integer, primary_key=True, autoincrement=True)\n    filename = Column(String(255), unique=True, nullable=False, index=True)\n    filepath = Column(String(512), nullable=False)\n    timestamp = Column(DateTime(timezone=True), nullable=False, index=True)\n    file_size = Column(BigInteger, nullable=False)\n    file_format = Column(String(50), nullable=True)\n    region = Column(String(50), nullable=True, index=True)  # \u533a\u57df\u5b57\u6bb5\n    created_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n    updated_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc), \n                       onupdate=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n\n    # \u521b\u5efa\u590d\u5408\u7d22\u5f15\u4ee5\u4f18\u5316\u67e5\u8be2\n    __table_args__ = (\n        Index('idx_timestamp_filename', 'timestamp', 'filename'),\n        Index('idx_region_timestamp', 'region', 'timestamp'),\n        Index('idx_region_timestamp_desc', 'region', 'timestamp', \n              postgresql_ops={'timestamp': 'DESC'}),\n    )\n</code></pre> <p>SingleRadarImageModel - \u5355\u7ad9\u96f7\u8fbe\u56fe\u50cf\u6a21\u578b</p> <pre><code>class SingleRadarImageModel(Base):\n    \"\"\"\u5355\u7ad9\u96f7\u8fbe\u56fe\u50cf\u6570\u636e\u6a21\u578b\"\"\"\n    __tablename__ = \"single_radar_images\"\n\n    id = Column(Integer, primary_key=True, autoincrement=True)\n    station_code = Column(String(50), nullable=False, index=True)\n    filename = Column(String(255), unique=True, nullable=False, index=True)\n    filepath = Column(String(512), nullable=False)\n    timestamp = Column(DateTime(timezone=True), nullable=False, index=True)\n    file_size = Column(BigInteger, nullable=False)\n    file_format = Column(String(50), nullable=True)\n    province = Column(String(100), nullable=True, index=True)\n    city = Column(String(100), nullable=True, index=True)\n    created_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n    updated_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc),\n                       onupdate=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n\n    __table_args__ = (\n        Index('idx_single_station_timestamp', 'station_code', 'timestamp'),\n        Index('idx_single_province_city', 'province', 'city'),\n    )\n</code></pre> <p>UserModel - \u7528\u6237\u6a21\u578b</p> <pre><code>from sqlalchemy import Boolean\n\nclass UserModel(Base):\n    \"\"\"\u7528\u6237\u6a21\u578b\"\"\"\n    __tablename__ = \"users\"\n\n    id = Column(Integer, primary_key=True, autoincrement=True)\n    username = Column(String(50), unique=True, nullable=False, index=True)\n    password_hash = Column(String(255), nullable=False)  # bcrypt\u52a0\u5bc6\u540e\u7684\u5bc6\u7801\n    is_active = Column(Boolean, default=True, nullable=False)\n    created_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n    updated_at = Column(DateTime(timezone=True), \n                       default=lambda: datetime.now(timezone.utc), \n                       onupdate=lambda: datetime.now(timezone.utc), \n                       nullable=False)\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#databaseconnectionpy","title":"\u6570\u636e\u5e93\u8fde\u63a5 (<code>database/connection.py</code>)","text":"<p>\u4f7f\u7528 SQLAlchemy \u5f02\u6b65\u5f15\u64ce\u548c\u8fde\u63a5\u6c60\uff1a</p> <pre><code>from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nimport os\n\n# \u521b\u5efa\u5f02\u6b65\u5f15\u64ce\nengine = create_async_engine(\n    os.getenv(\"DATABASE_URL\"),\n    pool_pre_ping=True,  # \u8fde\u63a5\u524d\u68c0\u67e5\u8fde\u63a5\u662f\u5426\u6709\u6548\n    pool_size=10,        # \u8fde\u63a5\u6c60\u5927\u5c0f\n    max_overflow=20      # \u6700\u5927\u6ea2\u51fa\u8fde\u63a5\u6570\n)\n\n# \u521b\u5efa\u5f02\u6b65\u4f1a\u8bdd\u5de5\u5382\nAsyncSessionLocal = sessionmaker(\n    engine, \n    class_=AsyncSession, \n    expire_on_commit=False\n)\n\nasync def init_database():\n    \"\"\"\u521d\u59cb\u5316\u6570\u636e\u5e93\uff08\u521b\u5efa\u8868\uff09\"\"\"\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#3-services","title":"3. \u4e1a\u52a1\u903b\u8f91\u670d\u52a1 (<code>services/</code>)","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#servicesradar_scannerpy","title":"\u96f7\u8fbe\u626b\u63cf\u670d\u52a1 (<code>services/radar_scanner.py</code>)","text":"<p>\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u7c7b <code>RadarScanner</code>\uff0c\u8d1f\u8d23\uff1a</p> <p>\u6570\u636e\u67e5\u8be2\uff08\u6838\u5fc3\u529f\u80fd\uff09</p> <ul> <li><code>get_latest_image()</code>: \u83b7\u53d6\u6700\u65b0\u56fe\u50cf</li> <li><code>get_image_list()</code>: \u83b7\u53d6\u56fe\u50cf\u5217\u8868\uff08\u652f\u6301\u5206\u9875\u3001\u7b5b\u9009\uff09</li> <li><code>get_time_range()</code>: \u83b7\u53d6\u65f6\u95f4\u8303\u56f4</li> <li><code>get_single_image_list()</code>: \u83b7\u53d6\u5355\u7ad9\u56fe\u50cf\u5217\u8868</li> <li><code>get_single_station_list()</code>: \u83b7\u53d6\u7ad9\u70b9\u5217\u8868</li> <li><code>get_single_time_range()</code>: \u83b7\u53d6\u5355\u7ad9\u65f6\u95f4\u8303\u56f4</li> </ul> <p>\u6570\u636e\u8f6c\u6362\uff08\u7ed3\u679c\u683c\u5f0f\u5316\uff09</p> <ul> <li><code>_image_to_dict()</code>: \u6a21\u578b\u8f6c\u5b57\u5178</li> <li><code>_single_image_to_dict()</code>: \u5355\u7ad9\u6a21\u578b\u8f6c\u5b57\u5178</li> <li>URL \u751f\u6210\uff08\u57fa\u4e8e\u914d\u7f6e\u7684\u8fdc\u7a0b\u57fa\u7840 URL\uff09</li> </ul> <p>\u6587\u4ef6\u540d\u65f6\u95f4\u6233\u89e3\u6790 (<code>parse_filename_timestamp</code>)\uff08\u5e95\u5c42\u5de5\u5177\uff09</p> <ul> <li>\u652f\u6301\u591a\u79cd\u65f6\u95f4\u683c\u5f0f</li> <li>\u4ece\u6587\u4ef6\u540d\u63d0\u53d6\u65f6\u95f4\u4fe1\u606f</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#4-utils","title":"4. \u5de5\u5177\u6a21\u5757 (<code>utils/</code>)","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#utilsauthpy","title":"\u8ba4\u8bc1\u5de5\u5177 (<code>utils/auth.py</code>)","text":"<ul> <li><code>authenticate_user()</code>: \u7528\u6237\u8ba4\u8bc1</li> <li><code>create_access_token()</code>: \u521b\u5efa\u8bbf\u95ee\u4ee4\u724c\uff0830\u5206\u949f\uff09</li> <li><code>create_refresh_token()</code>: \u521b\u5efa\u5237\u65b0\u4ee4\u724c\uff087\u5929\uff09</li> <li><code>get_password_hash()</code>: \u5bc6\u7801\u54c8\u5e0c\uff08bcrypt\uff09</li> <li><code>verify_password()</code>: \u5bc6\u7801\u9a8c\u8bc1</li> <li><code>decode_refresh_token()</code>: \u89e3\u7801\u5237\u65b0\u4ee4\u724c</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#utilscaptchapy","title":"\u9a8c\u8bc1\u7801\u5de5\u5177 (<code>utils/captcha.py</code>)","text":"<ul> <li><code>generate_captcha()</code>: \u751f\u6210\u9a8c\u8bc1\u7801\u56fe\u7247\u548c ID</li> <li><code>verify_captcha()</code>: \u9a8c\u8bc1\u9a8c\u8bc1\u7801</li> <li><code>cleanup_expired_captcha()</code>: \u6e05\u7406\u8fc7\u671f\u9a8c\u8bc1\u7801</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#utilsdependenciespy","title":"\u4f9d\u8d56\u6ce8\u5165 (<code>utils/dependencies.py</code>)","text":"<ul> <li><code>get_current_user_from_token()</code>: \u4ece Token \u83b7\u53d6\u5f53\u524d\u7528\u6237</li> <li><code>get_session()</code>: \u83b7\u53d6\u6570\u636e\u5e93\u4f1a\u8bdd</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#5-mainpy","title":"5. \u5e94\u7528\u5165\u53e3 (<code>main.py</code>)","text":"<p>FastAPI \u5e94\u7528\u914d\u7f6e\uff1a</p> <pre><code>from fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom fastapi.staticfiles import StaticFiles\nimport os\nfrom api.routes import radar_router\nfrom api.auth import auth_router\nfrom database.connection import init_database\n\napp = FastAPI(title=\"Radar Live CN API\", version=\"1.0.0\")\n\n# CORS \u914d\u7f6e\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=os.getenv(\"CORS_ORIGINS\", \"*\").split(\",\"),\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# \u6302\u8f7d\u9759\u6001\u6587\u4ef6\u76ee\u5f55\nradar_data_path = os.getenv(\"RADAR_DATA_PATH\", \"/mnt/data/radar/china/MOSAIC\")\nif os.path.exists(radar_data_path):\n    app.mount(\"/china\", StaticFiles(directory=radar_data_path, html=False), \n              name=\"radar-data\")\n\n# \u6ce8\u518c\u8def\u7531\napp.include_router(auth_router, prefix=\"/api\", tags=[\"auth\"])\napp.include_router(radar_router, prefix=\"/api\", tags=[\"radar\"])\n\n@app.on_event(\"startup\")\nasync def startup_event():\n    \"\"\"\u5e94\u7528\u542f\u52a8\u65f6\u521d\u59cb\u5316\u6570\u636e\u5e93\"\"\"\n    await init_database()\n\n@app.get(\"/\")\nasync def root():\n    \"\"\"\u5065\u5eb7\u68c0\u67e5\u63a5\u53e3\"\"\"\n    return {\n        \"status\": \"ok\",\n        \"service\": \"Radar Live CN\",\n        \"timestamp\": datetime.now(timezone.utc).isoformat()\n    }\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_4","title":"\u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u521b\u5efa\u4e86\u4ee5\u4e0b\u7d22\u5f15\uff1a</p> <p>RadarImageModel: - <code>idx_timestamp_filename</code>: (timestamp, filename) \u590d\u5408\u7d22\u5f15 - <code>idx_region_timestamp</code>: (region, timestamp) \u590d\u5408\u7d22\u5f15 - <code>idx_region_timestamp_desc</code>: (region, timestamp DESC) \u4f18\u5316\u6700\u65b0\u6570\u636e\u67e5\u8be2</p> <p>SingleRadarImageModel: - <code>idx_single_station_timestamp</code>: (station_code, timestamp) \u590d\u5408\u7d22\u5f15 - <code>idx_single_province_city</code>: (province, city) \u590d\u5408\u7d22\u5f15</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_5","title":"\u5b89\u5168\u673a\u5236","text":"<p>\u5bc6\u7801\u5b89\u5168: - \u4f7f\u7528 bcrypt \u52a0\u5bc6\u5b58\u50a8 - \u5bc6\u7801\u4e0d\u76f4\u63a5\u5b58\u50a8\u660e\u6587</p> <p>Token \u5b89\u5168: - JWT Token \u7b7e\u540d\u9a8c\u8bc1 - Token \u8fc7\u671f\u65f6\u95f4\u63a7\u5236 - Refresh Token \u673a\u5236</p> <p>\u9a8c\u8bc1\u7801: - \u6ce8\u518c\u65f6\u9a8c\u8bc1\u7801\u6821\u9a8c - \u9a8c\u8bc1\u7801\u8fc7\u671f\u65f6\u95f4\uff085\u5206\u949f\uff09 - \u5185\u5b58\u5b58\u50a8\uff0c\u81ea\u52a8\u6e05\u7406</p> <p>API \u8ba4\u8bc1: - \u96f7\u8fbe\u6570\u636e\u63a5\u53e3\u9700\u8981 Bearer Token - Token \u9a8c\u8bc1\u5931\u8d25\u8fd4\u56de 401</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_6","title":"\u65e5\u5fd7\u7cfb\u7edf","text":"<p>\u4f7f\u7528 Loguru \u8fdb\u884c\u65e5\u5fd7\u8bb0\u5f55\uff1a</p> <ul> <li>\u7528\u6237\u767b\u5f55/\u6ce8\u518c\u65e5\u5fd7</li> <li>API \u9519\u8bef\u65e5\u5fd7</li> <li>\u6570\u636e\u5e93\u64cd\u4f5c\u65e5\u5fd7</li> <li>\u65e5\u5fd7\u6587\u4ef6\u81ea\u52a8\u8f6e\u8f6c</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_7","title":"\u914d\u7f6e\u7ba1\u7406","text":"<p>\u901a\u8fc7\u73af\u5883\u53d8\u91cf\u914d\u7f6e\uff1a</p> <ul> <li><code>DATABASE_URL</code>: \u6570\u636e\u5e93\u8fde\u63a5\u5b57\u7b26\u4e32</li> <li><code>RADAR_DATA_PATH</code>: \u96f7\u8fbe\u6570\u636e\u6587\u4ef6\u8def\u5f84</li> <li><code>RADAR_REMOTE_BASE_URL</code>: \u8fdc\u7a0b\u57fa\u7840 URL\uff08\u7528\u4e8e\u751f\u6210\u56fe\u7247 URL\uff09</li> <li><code>CORS_ORIGINS</code>: CORS \u5141\u8bb8\u7684\u6e90</li> <li><code>SECRET_KEY</code>: JWT \u7b7e\u540d\u5bc6\u94a5</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_8","title":"\u6027\u80fd\u4f18\u5316","text":"<ol> <li>\u5f02\u6b65 I/O:</li> <li>\u4f7f\u7528 async/await \u5f02\u6b65\u64cd\u4f5c</li> <li> <p>\u6570\u636e\u5e93\u5f02\u6b65\u67e5\u8be2\uff08asyncpg\uff09</p> </li> <li> <p>\u67e5\u8be2\u4f18\u5316:</p> </li> <li>\u6570\u636e\u5e93\u7d22\u5f15</li> <li>\u5206\u9875\u67e5\u8be2</li> <li> <p>\u6761\u4ef6\u7b5b\u9009\u4f18\u5316</p> </li> <li> <p>\u9759\u6001\u6587\u4ef6:</p> </li> <li>FastAPI \u9759\u6001\u6587\u4ef6\u670d\u52a1</li> <li>\u76f4\u63a5\u6587\u4ef6\u8bbf\u95ee\uff0c\u51cf\u5c11\u540e\u7aef\u5904\u7406</li> </ol>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%90%8E%E7%AB%AF%E6%9E%B6%E6%9E%84%E8%AF%A6%E8%A7%A3/#_9","title":"\u9519\u8bef\u5904\u7406","text":"<p>\u7edf\u4e00\u7684\u5f02\u5e38\u5904\u7406\u548c\u9519\u8bef\u54cd\u5e94\uff1a</p> <pre><code>from fastapi import HTTPException, status\nfrom sqlalchemy.exc import SQLAlchemyError\n\n@radar_router.get(\"/radar/latest\")\nasync def get_latest_radar():\n    try:\n        scanner = get_scanner()\n        latest = await scanner.get_latest_image()\n        if not latest:\n            raise HTTPException(\n                status_code=status.HTTP_404_NOT_FOUND, \n                detail=\"No radar images found\"\n            )\n        return latest\n    except SQLAlchemyError as e:\n        logger.error(f\"Database error: {str(e)}\")\n        raise HTTPException(\n            status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,\n            detail=f\"Database error: {str(e)}\"\n        )\n    except ValueError as e:\n        raise HTTPException(\n            status_code=status.HTTP_400_BAD_REQUEST,\n            detail=str(e)\n        )\n</code></pre> <p>\u9519\u8bef\u54cd\u5e94\u683c\u5f0f: <pre><code>{\n  \"detail\": \"\u9519\u8bef\u63cf\u8ff0\u4fe1\u606f\"\n}\n</code></pre></p> <p>HTTP \u72b6\u6001\u7801\u89c4\u8303: - <code>200</code>: \u6210\u529f - <code>400</code>: \u8bf7\u6c42\u53c2\u6570\u9519\u8bef - <code>401</code>: \u672a\u8ba4\u8bc1\u6216 Token \u65e0\u6548 - <code>404</code>: \u8d44\u6e90\u4e0d\u5b58\u5728 - <code>500</code>: \u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/","title":"RadarLive-CN \u9879\u76ee\u5b66\u4e60\u6536\u83b7","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_1","title":"\u9879\u76ee\u7b80\u4ecb","text":"<p>RadarLive-CN \u662f\u4e00\u4e2a\u96f7\u8fbe\u6570\u636e\u5b9e\u65f6\u5c55\u793a\u7cfb\u7edf\uff0c\u7c7b\u4f3c\u4e2d\u592e\u6c14\u8c61\u53f0\u7684\u96f7\u8fbe\u6570\u636e\u5c55\u793a\u7f51\u7ad9\u3002\u5728\u5f00\u53d1\u8fd9\u4e2a\u9879\u76ee\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u5b66\u5230\u4e86\u5f88\u591a\u6280\u672f\u77e5\u8bc6\u548c\u5b9e\u8df5\u7ecf\u9a8c\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_2","title":"\u6280\u672f\u6808","text":"<ul> <li>\u540e\u7aef: FastAPI + PostgreSQL</li> <li>\u524d\u7aef: Vue 3 + Element Plus + Leaflet</li> <li>\u90e8\u7f72: Docker + Docker Compose</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_3","title":"\u4e3b\u8981\u6536\u83b7","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#fastapi","title":"FastAPI \u5f02\u6b65\u7f16\u7a0b","text":"<p>\u5b66\u4e60\u5185\u5bb9: \u638c\u63e1\u4e86 FastAPI \u7684\u5f02\u6b65\u7f16\u7a0b\u6a21\u5f0f\uff0c\u4f7f\u7528 <code>async/await</code> \u8bed\u6cd5\u8fdb\u884c\u5f02\u6b65 API \u5f00\u53d1\u3002</p> <p>\u5b9e\u8df5\u5fc3\u5f97: - \u5f02\u6b65\u7f16\u7a0b\u663e\u8457\u63d0\u9ad8\u4e86\u5e94\u7528\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff0c\u7279\u522b\u662f\u5728\u5904\u7406\u5927\u91cf\u6570\u636e\u5e93\u67e5\u8be2\u65f6 - \u4f7f\u7528 <code>asyncpg</code> \u4f5c\u4e3a PostgreSQL \u7684\u5f02\u6b65\u9a71\u52a8\uff0c\u907f\u514d\u4e86\u963b\u585e I/O - \u901a\u8fc7 <code>AsyncSessionLocal</code> \u7ba1\u7406\u6570\u636e\u5e93\u4f1a\u8bdd\uff0c\u786e\u4fdd\u6bcf\u4e2a\u8bf7\u6c42\u90fd\u6709\u72ec\u7acb\u7684\u6570\u636e\u5e93\u8fde\u63a5</p> <p>\u4ee3\u7801\u793a\u4f8b:</p> <pre><code>@radar_router.get(\"/radar/latest\")\nasync def get_latest_radar():\n    \"\"\"\u83b7\u53d6\u6700\u65b0\u96f7\u8fbe\u56fe\u50cf\uff08\u5f02\u6b65\uff09\"\"\"\n    try:\n        scanner = get_scanner()\n        latest = await scanner.get_latest_image()  # \u5f02\u6b65\u6570\u636e\u5e93\u67e5\u8be2\n        if not latest:\n            raise HTTPException(status_code=404, detail=\"No radar images found\")\n        return latest\n    except SQLAlchemyError as e:\n        logger.error(f\"Database error: {str(e)}\")\n        raise HTTPException(status_code=500, detail=f\"Database error: {str(e)}\")\n</code></pre> <p>\u6027\u80fd\u63d0\u5347: - \u76f8\u6bd4\u540c\u6b65\u7248\u672c\uff0c\u5f02\u6b65 API \u53ef\u4ee5\u540c\u65f6\u5904\u7406\u66f4\u591a\u5e76\u53d1\u8bf7\u6c42 - \u6570\u636e\u5e93\u67e5\u8be2\u4e0d\u4f1a\u963b\u585e\u5176\u4ed6\u8bf7\u6c42\u7684\u5904\u7406 - \u6574\u4f53\u54cd\u5e94\u65f6\u95f4\u964d\u4f4e\u7ea6 30-40%</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#vue-3-api","title":"Vue 3 \u7ec4\u5408\u5f0f API","text":"<p>\u5b66\u4e60\u5185\u5bb9: \u6df1\u5165\u7406\u89e3\u4e86 Vue 3 \u7684\u7ec4\u5408\u5f0f API\uff08Composition API\uff09\uff0c\u638c\u63e1\u4e86\u54cd\u5e94\u5f0f\u72b6\u6001\u7ba1\u7406\u548c\u903b\u8f91\u590d\u7528\u3002</p> <p>\u5b9e\u8df5\u5fc3\u5f97: - \u7ec4\u5408\u5f0f API \u8ba9\u4ee3\u7801\u7ec4\u7ec7\u66f4\u52a0\u7075\u6d3b\uff0c\u76f8\u5173\u903b\u8f91\u53ef\u4ee5\u96c6\u4e2d\u5728\u4e00\u8d77 - <code>ref</code> \u548c <code>reactive</code> \u7684\u4f7f\u7528\u573a\u666f\uff1a\u7b80\u5355\u503c\u7528 <code>ref</code>\uff0c\u590d\u6742\u5bf9\u8c61\u7528 <code>reactive</code> - <code>computed</code> \u8ba1\u7b97\u5c5e\u6027\u81ea\u52a8\u7f13\u5b58\uff0c\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u91cd\u590d\u8ba1\u7b97 - <code>watch</code> \u548c <code>watchEffect</code> \u7684\u533a\u522b\uff1a<code>watch</code> \u9700\u8981\u660e\u786e\u76d1\u542c\u6e90\uff0c<code>watchEffect</code> \u81ea\u52a8\u8ffd\u8e2a\u4f9d\u8d56</p> <p>\u4ee3\u7801\u793a\u4f8b:</p> <pre><code>import { ref, computed, onMounted, watch } from 'vue'\n\nexport default {\n  setup() {\n    // \u54cd\u5e94\u5f0f\u72b6\u6001\n    const imageList = ref([])\n    const currentIndex = ref(0)\n    const isPlaying = ref(false)\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u81ea\u52a8\u4ece\u7d22\u5f15\u83b7\u53d6\u5f53\u524d\u56fe\u50cf\n    const currentImage = computed(() =&gt; {\n      if (imageList.value.length === 0) return null\n      return imageList.value[currentIndex.value]\n    })\n\n    // \u8ba1\u7b97\u5c5e\u6027\uff1a\u65f6\u95f4\u5217\u8868\u9879\uff08\u81ea\u52a8\u683c\u5f0f\u5316\uff09\n    const timeListItems = computed(() =&gt; {\n      return imageList.value.map((item, index) =&gt; ({\n        index,\n        timestamp: item.timestamp,\n        display: formatTimestamp(item.timestamp)\n      })).reverse()\n    })\n\n    // \u76d1\u542c\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\n    watch(currentIndex, (newIndex) =&gt; {\n      preloadNearbyFrames(newIndex)\n    })\n\n    // \u7ec4\u4ef6\u6302\u8f7d\u65f6\u52a0\u8f7d\u6570\u636e\n    onMounted(() =&gt; {\n      loadData()\n    })\n\n    return { \n      imageList, \n      currentIndex, \n      currentImage,\n      timeListItems,\n      isPlaying\n    }\n  }\n}\n</code></pre> <p>\u4f18\u52bf\u4f53\u4f1a: - \u4ee3\u7801\u590d\u7528\u66f4\u5bb9\u6613\uff1a\u53ef\u4ee5\u5c06\u903b\u8f91\u63d0\u53d6\u5230 <code>composables</code> \u51fd\u6570\u4e2d - \u7c7b\u578b\u63a8\u5bfc\u66f4\u597d\uff1aTypeScript \u652f\u6301\u66f4\u5b8c\u5584 - \u903b\u8f91\u7ec4\u7ec7\u66f4\u6e05\u6670\uff1a\u76f8\u5173\u4ee3\u7801\u96c6\u4e2d\uff0c\u4e0d\u5206\u6563\u5728 <code>data</code>\u3001<code>methods</code>\u3001<code>computed</code> \u7b49\u9009\u9879\u4e2d</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#docker","title":"Docker \u5bb9\u5668\u5316\u90e8\u7f72","text":"<p>\u5b66\u4e60\u5185\u5bb9: \u638c\u63e1\u4e86 Docker \u548c Docker Compose \u7684\u4f7f\u7528\uff0c\u5b9e\u73b0\u4e86\u5e94\u7528\u7684\u5bb9\u5668\u5316\u90e8\u7f72\u3002</p> <p>\u5b9e\u8df5\u5fc3\u5f97: - \u591a\u9636\u6bb5\u6784\u5efa: \u524d\u7aef\u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\uff0c\u6784\u5efa\u9636\u6bb5\u5b89\u88c5\u4f9d\u8d56\uff0c\u8fd0\u884c\u9636\u6bb5\u53ea\u4fdd\u7559\u9759\u6001\u6587\u4ef6\uff0c\u5927\u5e45\u51cf\u5c0f\u955c\u50cf\u4f53\u79ef - \u73af\u5883\u53d8\u91cf\u7ba1\u7406: \u901a\u8fc7 <code>docker-compose.yml</code> \u7edf\u4e00\u7ba1\u7406\u73af\u5883\u53d8\u91cf\uff0c\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u914d\u7f6e\u5206\u79bb - \u7f51\u7edc\u914d\u7f6e: \u4f7f\u7528 Docker \u7f51\u7edc\u8ba9\u5bb9\u5668\u95f4\u53ef\u4ee5\u4e92\u76f8\u901a\u4fe1\uff0c\u540c\u65f6\u9694\u79bb\u5916\u90e8\u8bbf\u95ee - \u6570\u636e\u5377\u6302\u8f7d: \u96f7\u8fbe\u6570\u636e\u6587\u4ef6\u901a\u8fc7\u6570\u636e\u5377\u6302\u8f7d\uff0c\u907f\u514d\u6570\u636e\u4e22\u5931</p> <p>Docker Compose \u914d\u7f6e\u793a\u4f8b:</p> <pre><code>services:\n  backend:\n    build: ./backend\n    environment:\n      DATABASE_URL: postgresql+asyncpg://postgres:password@db:5432/postgres\n      RADAR_DATA_PATH: /mnt/data/radar/china/MOSAIC\n    volumes:\n      - /mnt/data/radar/china/MOSAIC:/mnt/data/radar/china/MOSAIC:ro\n    ports:\n      - \"8020:8000\"\n    networks:\n      - radarlive-net\n\n  frontend:\n    build: ./frontend\n    ports:\n      - \"3000:80\"\n    depends_on:\n      - backend\n    networks:\n      - radarlive-net\n\nnetworks:\n  radarlive-net:\n    driver: bridge\n</code></pre> <p>\u90e8\u7f72\u4f18\u52bf: - \u73af\u5883\u4e00\u81f4\u6027: \u5f00\u53d1\u3001\u6d4b\u8bd5\u3001\u751f\u4ea7\u73af\u5883\u5b8c\u5168\u4e00\u81f4\uff0c\u907f\u514d\"\u5728\u6211\u673a\u5668\u4e0a\u80fd\u8dd1\"\u7684\u95ee\u9898 - \u5feb\u901f\u90e8\u7f72: \u4e00\u6761\u547d\u4ee4\u542f\u52a8\u6574\u4e2a\u5e94\u7528\u6808 - \u6613\u4e8e\u6269\u5c55: \u53ef\u4ee5\u8f7b\u677e\u6dfb\u52a0\u65b0\u670d\u52a1\uff08\u5982 Redis\u3001Elasticsearch\uff09 - \u8d44\u6e90\u9694\u79bb: \u6bcf\u4e2a\u670d\u52a1\u8fd0\u884c\u5728\u72ec\u7acb\u5bb9\u5668\u4e2d\uff0c\u4e92\u4e0d\u5e72\u6270</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_4","title":"\u6027\u80fd\u4f18\u5316\u5b9e\u8df5","text":"<p>\u5b66\u4e60\u5185\u5bb9: \u5728\u9879\u76ee\u4e2d\u5b9e\u8df5\u4e86\u591a\u79cd\u524d\u7aef\u6027\u80fd\u4f18\u5316\u6280\u5de7\uff0c\u663e\u8457\u63d0\u5347\u4e86\u7528\u6237\u4f53\u9a8c\u3002</p> <p>\u4f18\u5316\u6280\u5de7\u603b\u7ed3:</p> <p>1. \u56fe\u7247\u9884\u52a0\u8f7d\u7b56\u7565: - \u53ea\u9884\u52a0\u8f7d\u5f53\u524d\u5e27\u9644\u8fd1\u7684\u56fe\u7247\uff0c\u907f\u514d\u4e00\u6b21\u6027\u52a0\u8f7d\u6240\u6709\u56fe\u7247 - \u6839\u636e\u64ad\u653e\u72b6\u6001\u52a8\u6001\u8c03\u6574\u9884\u52a0\u8f7d\u8303\u56f4\uff08\u64ad\u653e\u65f6\u8303\u56f4\u66f4\u5927\uff09 - \u4f7f\u7528 <code>Map</code> \u7f13\u5b58\u5df2\u52a0\u8f7d\u7684\u56fe\u7247\u5bf9\u8c61\uff0c\u907f\u514d\u91cd\u590d\u52a0\u8f7d</p> <p>2. \u6570\u636e\u7f13\u5b58\u673a\u5236: - \u4f7f\u7528 <code>Map</code> \u4f5c\u4e3a\u5185\u5b58\u7f13\u5b58\uff0c\u5feb\u901f\u8bbf\u95ee - \u4f7f\u7528 <code>localStorage</code> \u6301\u4e45\u5316\u7f13\u5b58\uff0c\u5237\u65b0\u9875\u9762\u540e\u4ecd\u53ef\u7528 - \u8bbe\u7f6e TTL\uff0815\u5206\u949f\uff09\uff0c\u81ea\u52a8\u6e05\u7406\u8fc7\u671f\u7f13\u5b58 - \u7f13\u5b58\u952e\u8bbe\u8ba1\uff1a<code>\u6a21\u5f0f-\u533a\u57df/\u7ad9\u70b9-\u65f6\u95f4\u8303\u56f4</code></p> <p>3. \u5206\u9875\u52a0\u8f7d: - \u5927\u6570\u636e\u91cf\u67e5\u8be2\u4f7f\u7528\u5206\u9875\u53c2\u6570\uff0c\u907f\u514d\u4e00\u6b21\u6027\u52a0\u8f7d\u8fc7\u591a\u6570\u636e - \u524d\u7aef\u5b9e\u73b0\u865a\u62df\u6eda\u52a8\uff08\u672a\u6765\u4f18\u5316\u65b9\u5411\uff09</p> <p>4. \u9632\u6296\u8282\u6d41: - \u7ad9\u70b9/\u533a\u57df\u5207\u6362\u4f7f\u7528\u9632\u6296\uff08300ms\uff09\uff0c\u907f\u514d\u9891\u7e41\u8bf7\u6c42 - \u4f7f\u7528 <code>AbortController</code> \u53d6\u6d88\u8fc7\u65f6\u8bf7\u6c42\uff0c\u8282\u7701\u8d44\u6e90</p> <p>\u6027\u80fd\u63d0\u5347\u6570\u636e: - \u5185\u5b58\u5360\u7528\u964d\u4f4e 80%+\uff08\u901a\u8fc7\u667a\u80fd\u9884\u52a0\u8f7d\uff09 - \u9996\u5c4f\u52a0\u8f7d\u65f6\u95f4\u7f29\u77ed 50%+\uff08\u901a\u8fc7\u7f13\u5b58\u673a\u5236\uff09 - API \u8bf7\u6c42\u51cf\u5c11 60%+\uff08\u901a\u8fc7\u9632\u6296\u548c\u7f13\u5b58\uff09 - \u64ad\u653e\u6d41\u7545\u5ea6\u63d0\u5347\uff0c\u65e0\u660e\u663e\u5361\u987f</p> <p>\u5b9e\u8df5\u5fc3\u5f97: - \u6027\u80fd\u4f18\u5316\u9700\u8981\u6839\u636e\u5b9e\u9645\u573a\u666f\u9009\u62e9\u7b56\u7565\uff0c\u4e0d\u662f\u6240\u6709\u4f18\u5316\u90fd\u9002\u5408 - \u7f13\u5b58\u7b56\u7565\u9700\u8981\u5e73\u8861\u5185\u5b58\u4f7f\u7528\u548c\u6570\u636e\u65b0\u9c9c\u5ea6 - \u76d1\u63a7\u548c\u6d4b\u91cf\u5f88\u91cd\u8981\uff0c\u4f18\u5316\u524d\u540e\u8981\u6709\u6570\u636e\u5bf9\u6bd4</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_5","title":"\u9047\u5230\u7684\u6311\u6218","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_6","title":"\u5927\u91cf\u56fe\u7247\u52a0\u8f7d\u4f18\u5316","text":"<p>\u95ee\u9898: \u96f7\u8fbe\u6570\u636e\u53ef\u80fd\u6709\u6570\u5343\u751a\u81f3\u4e0a\u4e07\u5f20\u56fe\u7247\uff0c\u5982\u679c\u4e00\u6b21\u6027\u52a0\u8f7d\u4f1a\u5bfc\u81f4\u6d4f\u89c8\u5668\u5361\u987f\u3001\u5185\u5b58\u5360\u7528\u8fc7\u9ad8\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u5b9e\u73b0\u667a\u80fd\u9884\u52a0\u8f7d\u548c\u7f13\u5b58\u673a\u5236</p> <p>\u6838\u5fc3\u601d\u8def: - \u53ea\u9884\u52a0\u8f7d\u5f53\u524d\u5e27\u9644\u8fd1\u7684\u56fe\u7247 - \u6839\u636e\u64ad\u653e\u72b6\u6001\u52a8\u6001\u8c03\u6574\u9884\u52a0\u8f7d\u8303\u56f4 - \u4f7f\u7528 Map \u7f13\u5b58\u5df2\u52a0\u8f7d\u7684\u56fe\u7247\u5bf9\u8c61 - \u6279\u91cf\u52a0\u8f7d\uff0c\u63a7\u5236\u5e76\u53d1\u6570\u91cf</p> <p>\u4ee3\u7801\u5b9e\u73b0:</p> <pre><code>// \u56fe\u7247\u7f13\u5b58\nconst imageCache = ref(new Map())\n\n// \u9884\u52a0\u8f7d\u5355\u5f20\u56fe\u7247\uff08\u5e26\u91cd\u8bd5\u673a\u5236\uff09\nconst preloadImage = (url, retryCount = 0) =&gt; {\n  return new Promise((resolve, reject) =&gt; {\n    // \u68c0\u67e5\u7f13\u5b58\n    if (imageCache.value.has(url)) {\n      resolve(imageCache.value.get(url))\n      return\n    }\n\n    const img = new Image()\n    img.onload = () =&gt; {\n      imageCache.value.set(url, img)  // \u5b58\u5165\u7f13\u5b58\n      resolve(img)\n    }\n    img.onerror = (error) =&gt; {\n      // \u5931\u8d25\u91cd\u8bd5\uff0c\u6700\u591a\u91cd\u8bd52\u6b21\n      if (retryCount &lt; 2) {\n        setTimeout(() =&gt; {\n          preloadImage(url, retryCount + 1).then(resolve).catch(reject)\n        }, 1000 * (retryCount + 1))\n      } else {\n        reject(error)\n      }\n    }\n    img.src = url\n  })\n}\n\n// \u667a\u80fd\u9884\u52a0\u8f7d\u9644\u8fd1\u5e27\uff08\u6839\u636e\u6570\u636e\u91cf\u52a8\u6001\u8c03\u6574\uff09\nconst preloadNearbyFrames = async (index) =&gt; {\n  if (imageList.value.length === 0) return\n\n  const totalImages = imageList.value.length\n  let range, batchSize, delay\n\n  // \u6839\u636e\u6570\u636e\u91cf\u548c\u64ad\u653e\u72b6\u6001\u8c03\u6574\u7b56\u7565\n  if (isPlaying.value) {\n    // \u64ad\u653e\u65f6\uff1a\u66f4\u5927\u8303\u56f4\uff0c\u66f4\u5feb\u901f\u5ea6\n    if (totalImages &gt; 10000) { range = 30; batchSize = 15; delay = 30 }\n    else if (totalImages &gt; 5000) { range = 40; batchSize = 20; delay = 25 }\n    else { range = 60; batchSize = 30; delay = 15 }\n  } else {\n    // \u6682\u505c\u65f6\uff1a\u8f83\u5c0f\u8303\u56f4\uff0c\u8f83\u6162\u901f\u5ea6\n    if (totalImages &gt; 10000) { range = 30; batchSize = 8; delay = 100 }\n    else if (totalImages &gt; 5000) { range = 40; batchSize = 10; delay = 80 }\n    else { range = 60; batchSize = 15; delay = 50 }\n  }\n\n  // \u8ba1\u7b97\u9884\u52a0\u8f7d\u8303\u56f4\n  const playMultiplier = isPlaying.value ? 3 : 1\n  const effectiveRange = Math.min(range * playMultiplier, totalImages)\n  const startIndex = Math.max(0, index - effectiveRange)\n  const endIndex = Math.min(totalImages - 1, index + effectiveRange)\n\n  // \u5206\u6279\u52a0\u8f7d\n  for (let i = startIndex; i &lt;= endIndex; i += batchSize) {\n    const batchEnd = Math.min(i + batchSize - 1, endIndex)\n    const batch = []\n    for (let j = i; j &lt;= batchEnd; j++) {\n      if (imageList.value[j]?.url &amp;&amp; !imageCache.value.has(imageList.value[j].url)) {\n        batch.push(preloadImage(imageList.value[j].url).catch(() =&gt; {}))\n      }\n    }\n    if (batch.length &gt; 0) {\n      await Promise.allSettled(batch)\n      // \u5ef6\u8fdf\uff0c\u907f\u514d\u963b\u585e\u4e3b\u7ebf\u7a0b\n      if (i + batchSize &lt;= endIndex) {\n        await new Promise(resolve =&gt; setTimeout(resolve, delay))\n      }\n    }\n  }\n}\n\n// \u76d1\u542c\u5f53\u524d\u7d22\u5f15\u53d8\u5316\uff0c\u81ea\u52a8\u9884\u52a0\u8f7d\nwatch(currentIndex, (newIndex) =&gt; {\n  preloadNearbyFrames(newIndex)\n})\n</code></pre> <p>\u6548\u679c:  - \u5185\u5b58\u5360\u7528\u964d\u4f4e 80%+ - \u64ad\u653e\u6d41\u7545\u5ea6\u63d0\u5347\uff0c\u65e0\u660e\u663e\u5361\u987f - \u9996\u6b21\u52a0\u8f7d\u65f6\u95f4\u7f29\u77ed</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_7","title":"\u56fe\u7247\u6bd4\u4f8b\u9002\u914d","text":"<p>\u95ee\u9898: \u4e0d\u540c\u533a\u57df\u548c\u7ad9\u70b9\u7684\u96f7\u8fbe\u56fe\u7247\u5bbd\u9ad8\u6bd4\u4e0d\u4e00\u81f4\uff08\u6709\u4e9b\u662f\u6a2a\u5411\u5bbd\u56fe\uff0c\u6709\u4e9b\u662f\u7eb5\u5411\u9ad8\u56fe\uff09\uff0c\u5982\u679c\u4f7f\u7528\u56fa\u5b9a\u6837\u5f0f\u4f1a\u5bfc\u81f4\u56fe\u7247\u53d8\u5f62\u6216\u663e\u793a\u4e0d\u5b8c\u6574\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u52a8\u6001\u68c0\u6d4b\u56fe\u7247\u5c3a\u5bf8\uff0c\u6839\u636e\u5bbd\u9ad8\u6bd4\u81ea\u9002\u5e94\u8c03\u6574\u663e\u793a\u6837\u5f0f</p> <p>\u6838\u5fc3\u601d\u8def: - \u56fe\u7247\u52a0\u8f7d\u65f6\u83b7\u53d6\u5b9e\u9645\u5bbd\u9ad8\uff08<code>naturalWidth</code> \u548c <code>naturalHeight</code>\uff09 - \u6839\u636e\u5bbd\u9ad8\u6bd4\u5224\u65ad\u662f\u6a2a\u5411\u8fd8\u662f\u7eb5\u5411\u56fe\u7247 - \u6a2a\u5411\u56fe\u7247\uff1a\u9650\u5236\u6700\u5927\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 - \u7eb5\u5411\u56fe\u7247\uff1a\u9650\u5236\u6700\u5927\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 - \u4e3a\u4e0d\u540c\u533a\u57df/\u7ad9\u70b9\u914d\u7f6e\u4e0d\u540c\u7684\u9ed8\u8ba4\u7f29\u653e\u6bd4\u4f8b</p> <p>\u4ee3\u7801\u5b9e\u73b0:</p> <pre><code>// \u5b58\u50a8\u5f53\u524d\u56fe\u7247\u7684\u5143\u6570\u636e\nconst currentImageMeta = ref({ width: 0, height: 0 })\n\n// \u56fe\u7247\u52a0\u8f7d\u65f6\u83b7\u53d6\u5b9e\u9645\u5c3a\u5bf8\nconst handleImageLoad = (event) =&gt; {\n  const target = event?.target\n  if (!target) return\n  const width = target.naturalWidth || target.width || 0\n  const height = target.naturalHeight || target.height || 0\n\n  // \u5e94\u7528\u56fe\u7247\u5143\u6570\u636e\n  applyImageMeta(width &amp;&amp; height ? { width, height } : null)\n\n  // \u540c\u65f6\u66f4\u65b0\u5230\u56fe\u50cf\u5217\u8868\u4e2d\n  if (currentIndex.value &gt;= 0 &amp;&amp; currentIndex.value &lt; imageList.value.length) {\n    imageList.value[currentIndex.value] = {\n      ...imageList.value[currentIndex.value],\n      width,\n      height\n    }\n  }\n}\n\n// \u5e94\u7528\u56fe\u7247\u5143\u6570\u636e\nconst applyImageMeta = (image) =&gt; {\n  if (image &amp;&amp; image.width &amp;&amp; image.height) {\n    currentImageMeta.value = {\n      width: image.width,\n      height: image.height\n    }\n  } else {\n    currentImageMeta.value = { width: 0, height: 0 }\n  }\n}\n\n// \u4e0d\u540c\u533a\u57df/\u7ad9\u70b9\u7684\u9ed8\u8ba4\u7f29\u653e\u914d\u7f6e\nconst mosaicScaleConfig = {\n  default: { wide: 75, tall: 70 },      // \u9ed8\u8ba4\uff1a\u5bbd\u5ea675%\uff0c\u9ad8\u5ea670vh\n  NATIONAL: { wide: 75, tall: 70 },\n  NORTH: { wide: 75, tall: 70 },\n  EAST: { wide: 75, tall: 70 },\n  // ... \u5176\u4ed6\u533a\u57df\n}\n\nconst singleScaleConfig = {\n  default: { wide: 75, tall: 70 },\n  HAINAN: { wide: 70, tall: 70 },      // \u6d77\u5357\uff1a\u6b63\u65b9\u5f62\n  TAIWAN: { wide: 70, tall: 70 },      // \u53f0\u6e7e\uff1a\u6b63\u65b9\u5f62\n}\n\n// \u7528\u6237\u53ef\u8c03\u8282\u7684\u7f29\u653e\u500d\u6570\uff0850%-140%\uff09\nconst imageScaleMultiplier = ref(100)  // \u9ed8\u8ba4100%\n\n// \u52a8\u6001\u8ba1\u7b97\u56fe\u7247\u6837\u5f0f\nconst radarImageStyle = computed(() =&gt; {\n  const { width, height } = currentImageMeta.value || {}\n\n  // \u6839\u636e\u6a21\u5f0f\u9009\u62e9\u914d\u7f6e\n  const modeConfig = isSingleMode.value ? singleScaleConfig : mosaicScaleConfig\n  const key = isSingleMode.value\n    ? (currentStation.value?.province || selectedProvince.value || 'default')\n    : (region.value || 'default')\n\n  // \u83b7\u53d6\u57fa\u7840\u7f29\u653e\u914d\u7f6e\n  const base = modeConfig[key] || modeConfig.default || { wide: 75, tall: 70 }\n\n  // \u5e94\u7528\u7528\u6237\u8bbe\u7f6e\u7684\u7f29\u653e\u500d\u6570\n  const multiplier = imageScaleMultiplier.value / 100\n  const widthPercent = Math.min(100, Math.max(25, (base.wide || 75) * multiplier))\n  const heightVh = Math.min(100, Math.max(25, (base.tall || 70) * multiplier))\n  const maxWidthPercent = `${Math.round(widthPercent)}%`\n  const maxHeightVh = `${Math.round(heightVh)}vh`\n\n  // \u6839\u636e\u56fe\u7247\u5bbd\u9ad8\u6bd4\u9009\u62e9\u4e0d\u540c\u7684\u6837\u5f0f\u7b56\u7565\n  if (!width || !height) {\n    // \u5c3a\u5bf8\u672a\u77e5\u65f6\uff1a\u4f7f\u7528\u9ed8\u8ba4\u6837\u5f0f\n    return { maxWidth: maxWidthPercent, maxHeight: maxHeightVh, height: 'auto' }\n  }\n\n  if (width &gt;= height) {\n    // \u6a2a\u5411\u56fe\u7247\uff08\u5bbd &gt;= \u9ad8\uff09\uff1a\u9650\u5236\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94\n    return { maxWidth: maxWidthPercent, maxHeight: maxHeightVh, height: 'auto' }\n  } else {\n    // \u7eb5\u5411\u56fe\u7247\uff08\u5bbd &lt; \u9ad8\uff09\uff1a\u9650\u5236\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94\n    return { maxHeight: maxHeightVh, maxWidth: maxWidthPercent, width: 'auto' }\n  }\n})\n</code></pre> <p>\u6a21\u677f\u4e2d\u7684\u4f7f\u7528:</p> <pre><code>&lt;template&gt;\n  &lt;div class=\"map-container\"&gt;\n    &lt;img\n      v-if=\"currentImage &amp;&amp; currentImage.url\"\n      :src=\"currentImage.url\"\n      class=\"radar-image\"\n      :style=\"radarImageStyle\"\n      alt=\"\u96f7\u8fbe\u4ea7\u54c1\u56fe\"\n      loading=\"lazy\"\n      @load=\"handleImageLoad\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n</code></pre> <p>\u76d1\u542c\u56fe\u7247\u53d8\u5316:</p> <pre><code>// \u5f53\u5207\u6362\u56fe\u7247\u65f6\uff0c\u81ea\u52a8\u5e94\u7528\u65b0\u7684\u5143\u6570\u636e\nwatch(currentImage, (img) =&gt; {\n  applyImageMeta(img)\n})\n\n// \u5207\u6362\u6a21\u5f0f\u6216\u533a\u57df\u65f6\uff0c\u91cd\u7f6e\u7f29\u653e\nwatch(radarMode, () =&gt; { resetImageScale() })\nwatch(region, () =&gt; { if (!isSingleMode.value) resetImageScale() })\nwatch(selectedStation, () =&gt; { if (isSingleMode.value) resetImageScale() })\n</code></pre> <p>\u6548\u679c:  - \u56fe\u7247\u6309\u539f\u59cb\u6bd4\u4f8b\u663e\u793a\uff0c\u4e0d\u4f1a\u53d8\u5f62 - \u6a2a\u5411\u548c\u7eb5\u5411\u56fe\u7247\u90fd\u80fd\u6b63\u786e\u9002\u914d\u5bb9\u5668 - \u4e0d\u540c\u533a\u57df/\u7ad9\u70b9\u53ef\u4ee5\u6709\u4e0d\u540c\u7684\u9ed8\u8ba4\u663e\u793a\u6bd4\u4f8b - \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u7f29\u653e\u63a7\u5236\u8c03\u6574\u663e\u793a\u5927\u5c0f\uff0850%-140%\uff09 - \u5207\u6362\u56fe\u7247\u65f6\u81ea\u52a8\u9002\u914d\u65b0\u7684\u5bbd\u9ad8\u6bd4</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_8","title":"\u8de8\u57df\u95ee\u9898","text":"<p>\u95ee\u9898: \u524d\u7aef\u8fd0\u884c\u5728 <code>http://localhost:3000</code>\uff0c\u540e\u7aef\u8fd0\u884c\u5728 <code>http://localhost:8000</code>\uff0c\u6d4f\u89c8\u5668\u963b\u6b62\u8de8\u57df\u8bf7\u6c42\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: \u914d\u7f6e FastAPI \u7684 CORS \u4e2d\u95f4\u4ef6</p> <p>\u4ee3\u7801\u5b9e\u73b0:</p> <pre><code>from fastapi import FastAPI\nfrom fastapi.middleware.cors import CORSMiddleware\nimport os\n\napp = FastAPI(title=\"Radar Live CN API\", version=\"1.0.0\")\n\n# CORS \u914d\u7f6e\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=os.getenv(\"CORS_ORIGINS\", \"*\").split(\",\"),  # \u5141\u8bb8\u7684\u6e90\n    allow_credentials=True,                                    # \u5141\u8bb8\u643a\u5e26\u51ed\u8bc1\n    allow_methods=[\"*\"],                                       # \u5141\u8bb8\u6240\u6709HTTP\u65b9\u6cd5\n    allow_headers=[\"*\"],                                       # \u5141\u8bb8\u6240\u6709\u8bf7\u6c42\u5934\n)\n</code></pre> <p>\u73af\u5883\u53d8\u91cf\u914d\u7f6e (<code>.env</code> \u6216 <code>docker-compose.yml</code>):</p> <pre><code># \u5f00\u53d1\u73af\u5883\uff1a\u5141\u8bb8\u6240\u6709\u6e90\nCORS_ORIGINS: \"*\"\n\n# \u751f\u4ea7\u73af\u5883\uff1a\u53ea\u5141\u8bb8\u7279\u5b9a\u57df\u540d\nCORS_ORIGINS: \"https://yourdomain.com,https://www.yourdomain.com\"\n</code></pre> <p>\u524d\u7aef\u8bf7\u6c42\u793a\u4f8b:</p> <pre><code>import axios from 'axios'\n\n// \u521b\u5efa axios \u5b9e\u4f8b\nconst api = axios.create({\n  baseURL: 'http://localhost:8000/api',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n\n// \u8bf7\u6c42\u62e6\u622a\u5668\uff1a\u81ea\u52a8\u6dfb\u52a0 Token\napi.interceptors.request.use(config =&gt; {\n  const token = localStorage.getItem('auth_token')\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`\n  }\n  return config\n})\n\n// \u4f7f\u7528\nconst response = await api.get('/radar/list')\n</code></pre> <p>\u6548\u679c:  - \u8de8\u57df\u8bf7\u6c42\u6b63\u5e38\u5de5\u4f5c - \u652f\u6301\u643a\u5e26\u8ba4\u8bc1 Token - \u751f\u4ea7\u73af\u5883\u53ef\u9650\u5236\u5141\u8bb8\u7684\u57df\u540d\uff0c\u63d0\u9ad8\u5b89\u5168\u6027</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E5%AD%A6%E4%B9%A0%E6%94%B6%E8%8E%B7/#_9","title":"\u9632\u6296\u8282\u6d41\u4f18\u5316","text":"<p>\u989d\u5916\u4f18\u5316: \u5728\u7ad9\u70b9/\u533a\u57df\u5207\u6362\u65f6\u4f7f\u7528\u9632\u6296\uff0c\u907f\u514d\u9891\u7e41\u8bf7\u6c42\u3002</p> <p>\u4ee3\u7801\u5b9e\u73b0:</p> <pre><code>// \u9632\u6296\u51fd\u6570\uff1a300ms \u5185\u53ea\u6267\u884c\u6700\u540e\u4e00\u6b21\nconst scheduleStationChange = (nextStation) =&gt; {\n  clearStationChangeTimer()  // \u6e05\u9664\u4e4b\u524d\u7684\u5b9a\u65f6\u5668\n  cancelStationRequests()    // \u53d6\u6d88\u4e4b\u524d\u7684\u8bf7\u6c42\n\n  stationChangeTimer = setTimeout(() =&gt; {\n    stationChangeTimer = null\n    runStationChange(nextStation)  // \u6267\u884c\u5207\u6362\n  }, 300)  // 300ms \u9632\u6296\u5ef6\u8fdf\n}\n\n// \u533a\u57df\u5207\u6362\u540c\u6837\u4f7f\u7528\u9632\u6296\nconst scheduleRegionChange = (nextRegion) =&gt; {\n  clearRegionChangeTimer()\n  regionChangeTimer = setTimeout(() =&gt; {\n    regionChangeTimer = null\n    runRegionChange(nextRegion)\n  }, 300)\n}\n\n// \u4f7f\u7528 AbortController \u53d6\u6d88\u8fc7\u65f6\u8bf7\u6c42\nconst cancelStationRequests = () =&gt; {\n  if (activeStationController.value) {\n    activeStationController.value.abort()  // \u53d6\u6d88\u8bf7\u6c42\n    activeStationController.value = null\n  }\n}\n</code></pre> <p>\u6548\u679c:  - \u51cf\u5c11\u4e0d\u5fc5\u8981\u7684 API \u8bf7\u6c42 - \u63d0\u5347\u7528\u6237\u4f53\u9a8c\uff0c\u907f\u514d\u754c\u9762\u95ea\u70c1 - \u8282\u7701\u670d\u52a1\u5668\u8d44\u6e90</p> <p>\u6700\u540e\u66f4\u65b0: November 18, 2025</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/","title":"RadarLive-CN \u9879\u76ee\u7ed3\u6784\u603b\u89c8","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_1","title":"\u9879\u76ee\u7b80\u4ecb","text":"<p>RadarLive-CN \u662f\u4e00\u4e2a\u96f7\u8fbe\u6570\u636e\u5b9e\u65f6\u5c55\u793a\u7cfb\u7edf\uff0c\u7c7b\u4f3c\u4e2d\u592e\u6c14\u8c61\u53f0\u7684\u96f7\u8fbe\u6570\u636e\u5c55\u793a\u7f51\u7ad9\u3002\u7cfb\u7edf\u652f\u6301\u96f7\u8fbe\u62fc\u56fe\u548c\u5355\u7ad9\u96f7\u8fbe\u4e24\u79cd\u6a21\u5f0f\uff0c\u63d0\u4f9b\u5b9e\u65f6\u6570\u636e\u5c55\u793a\u3001\u65f6\u95f4\u8f74\u64ad\u653e\u3001\u533a\u57df\u7b5b\u9009\u7b49\u529f\u80fd\u3002</p>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_2","title":"\u6280\u672f\u6808","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_3","title":"\u540e\u7aef\u6280\u672f\u6808","text":"<ul> <li>\u6846\u67b6: FastAPI (Python \u5f02\u6b65 Web \u6846\u67b6)</li> <li>\u6570\u636e\u5e93: PostgreSQL (\u4f7f\u7528 SQLAlchemy ORM)</li> <li>\u8ba4\u8bc1: JWT Token (\u8bbf\u95ee\u4ee4\u724c + \u5237\u65b0\u4ee4\u724c)</li> <li>\u65e5\u5fd7: Loguru</li> <li>\u90e8\u7f72: Docker + Uvicorn</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_4","title":"\u524d\u7aef\u6280\u672f\u6808","text":"<ul> <li>\u6846\u67b6: Vue.js 3 (\u7ec4\u5408\u5f0f API)</li> <li>UI \u7ec4\u4ef6\u5e93: Element Plus</li> <li>\u5730\u56fe\u5e93: Leaflet</li> <li>\u8def\u7531: Vue Router 4</li> <li>HTTP \u5ba2\u6237\u7aef: Axios</li> <li>\u6784\u5efa\u5de5\u5177: Vite</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_5","title":"\u90e8\u7f72\u6280\u672f\u6808","text":"<ul> <li>\u5bb9\u5668\u5316: Docker + Docker Compose</li> <li>Web \u670d\u52a1\u5668: Nginx (\u524d\u7aef\u9759\u6001\u6587\u4ef6)</li> <li>\u53cd\u5411\u4ee3\u7406: Nginx (\u53ef\u9009)</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_6","title":"\u9879\u76ee\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>radarlive-cn/\n\u251c\u2500\u2500 backend/                    # \u540e\u7aef\u670d\u52a1\n\u2502   \u251c\u2500\u2500 api/                    # API \u8def\u7531\u6a21\u5757\n\u2502   \u2502   \u251c\u2500\u2500 auth.py            # \u8ba4\u8bc1\u76f8\u5173\u8def\u7531\uff08\u767b\u5f55\u3001\u6ce8\u518c\u3001\u4fee\u6539\u5bc6\u7801\uff09\n\u2502   \u2502   \u2514\u2500\u2500 routes.py          # \u96f7\u8fbe\u6570\u636e\u76f8\u5173\u8def\u7531\n\u2502   \u251c\u2500\u2500 database/              # \u6570\u636e\u5e93\u6a21\u5757\n\u2502   \u2502   \u251c\u2500\u2500 base.py           # \u6570\u636e\u5e93\u57fa\u7c7b\n\u2502   \u2502   \u251c\u2500\u2500 connection.py     # \u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\n\u2502   \u2502   \u2514\u2500\u2500 models.py         # \u6570\u636e\u6a21\u578b\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 services/              # \u4e1a\u52a1\u903b\u8f91\u670d\u52a1\n\u2502   \u2502   \u2514\u2500\u2500 radar_scanner.py  # \u96f7\u8fbe\u6570\u636e\u626b\u63cf\u548c\u5904\u7406\u670d\u52a1\n\u2502   \u251c\u2500\u2500 utils/                 # \u5de5\u5177\u51fd\u6570\n\u2502   \u2502   \u251c\u2500\u2500 auth.py           # \u8ba4\u8bc1\u5de5\u5177\uff08JWT\u3001\u5bc6\u7801\u52a0\u5bc6\uff09\n\u2502   \u2502   \u251c\u2500\u2500 captcha.py        # \u9a8c\u8bc1\u7801\u751f\u6210\u548c\u9a8c\u8bc1\n\u2502   \u2502   \u2514\u2500\u2500 dependencies.py   # FastAPI \u4f9d\u8d56\u6ce8\u5165\n\u2502   \u251c\u2500\u2500 config.py             # \u914d\u7f6e\u6587\u4ef6\n\u2502   \u251c\u2500\u2500 main.py               # FastAPI \u5e94\u7528\u5165\u53e3\n\u2502   \u251c\u2500\u2500 requirements.txt      # Python \u4f9d\u8d56\n\u2502   \u2514\u2500\u2500 Dockerfile            # \u540e\u7aef Docker \u955c\u50cf\u914d\u7f6e\n\u2502\n\u251c\u2500\u2500 frontend/                  # \u524d\u7aef\u5e94\u7528\n\u2502   \u251c\u2500\u2500 src/\n\u2502   \u2502   \u251c\u2500\u2500 api/              # API \u8c03\u7528\u5c01\u88c5\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 radar.js      # \u96f7\u8fbe\u6570\u636e API\n\u2502   \u2502   \u251c\u2500\u2500 router/           # \u8def\u7531\u914d\u7f6e\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 index.js      # Vue Router \u914d\u7f6e\n\u2502   \u2502   \u251c\u2500\u2500 views/            # \u9875\u9762\u7ec4\u4ef6\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 LoginView.vue # \u767b\u5f55\u9875\u9762\n\u2502   \u2502   \u251c\u2500\u2500 App.vue           # \u6839\u7ec4\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 Login.vue         # \u767b\u5f55\u7ec4\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 Register.vue      # \u6ce8\u518c\u7ec4\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 RadarView.vue     # \u96f7\u8fbe\u5c55\u793a\u4e3b\u7ec4\u4ef6\uff08\u6838\u5fc3\uff09\n\u2502   \u2502   \u2514\u2500\u2500 main.js           # \u5e94\u7528\u5165\u53e3\n\u2502   \u251c\u2500\u2500 dist/                 # \u6784\u5efa\u8f93\u51fa\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 package.json          # Node.js \u4f9d\u8d56\n\u2502   \u251c\u2500\u2500 vite.config.js        # Vite \u914d\u7f6e\n\u2502   \u2514\u2500\u2500 Dockerfile            # \u524d\u7aef Docker \u955c\u50cf\u914d\u7f6e\n\u2502\n\u251c\u2500\u2500 blog/                      # \u535a\u5ba2\u548c\u6587\u6863\n\u2502   \u251c\u2500\u2500 docs/                 # Markdown \u6587\u6863\n\u2502   \u2502   \u251c\u2500\u2500 \u5b66\u4e60\u603b\u7ed3/         # \u5b66\u4e60\u603b\u7ed3\u6587\u7ae0\n\u2502   \u2502   \u251c\u2500\u2500 \u5f00\u53d1\u7ecf\u9a8c/         # \u5f00\u53d1\u7ecf\u9a8c\u5206\u4eab\n\u2502   \u2502   \u251c\u2500\u2500 \u6280\u672f\u6808\u5b66\u4e60/       # \u6280\u672f\u6808\u5b66\u4e60\u7b14\u8bb0\n\u2502   \u2502   \u2514\u2500\u2500 \u9879\u76ee\u5b9e\u6218/         # \u9879\u76ee\u5b9e\u6218\u6587\u6863\n\u2502   \u251c\u2500\u2500 mkdocs.yml            # MkDocs \u914d\u7f6e\n\u2502   \u2514\u2500\u2500 requirements.txt      # MkDocs \u4f9d\u8d56\n\u2502\n\u251c\u2500\u2500 docker-compose.yml        # Docker Compose \u914d\u7f6e\n\u251c\u2500\u2500 env.sh                    # \u73af\u5883\u53d8\u91cf\u811a\u672c\n\u251c\u2500\u2500 start_server.sh           # \u542f\u52a8\u811a\u672c\n\u2514\u2500\u2500 README.md                 # \u9879\u76ee\u8bf4\u660e\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_7","title":"\u6838\u5fc3\u529f\u80fd\u6a21\u5757","text":""},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#1","title":"1. \u7528\u6237\u8ba4\u8bc1\u6a21\u5757","text":"<ul> <li>\u7528\u6237\u6ce8\u518c\uff08\u5e26\u9a8c\u8bc1\u7801\uff09</li> <li>\u7528\u6237\u767b\u5f55\uff08JWT Token\uff09</li> <li>\u5bc6\u7801\u4fee\u6539</li> <li>Token \u5237\u65b0\u673a\u5236</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#2","title":"2. \u96f7\u8fbe\u6570\u636e\u6a21\u5757","text":"<ul> <li>\u96f7\u8fbe\u62fc\u56fe\u6a21\u5f0f:</li> <li>\u652f\u6301\u5168\u56fd\u3001\u534e\u5317\u3001\u4e1c\u5317\u3001\u534e\u4e1c\u3001\u534e\u4e2d\u3001\u534e\u5357\u3001\u897f\u5357\u3001\u897f\u5317\u7b49\u533a\u57df</li> <li>\u65f6\u95f4\u8f74\u64ad\u653e\u63a7\u5236</li> <li>\u65f6\u95f4\u8303\u56f4\u7b5b\u9009</li> <li> <p>\u56fe\u7247\u7f29\u653e\u529f\u80fd</p> </li> <li> <p>\u5355\u7ad9\u96f7\u8fbe\u6a21\u5f0f:</p> </li> <li>\u6309\u7701\u4efd/\u57ce\u5e02\u7b5b\u9009\u7ad9\u70b9</li> <li>\u5355\u7ad9\u96f7\u8fbe\u6570\u636e\u5c55\u793a</li> <li>\u65f6\u95f4\u8303\u56f4\u67e5\u8be2</li> <li>\u7ad9\u70b9\u4fe1\u606f\u5c55\u793a</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#3","title":"3. \u6570\u636e\u7ba1\u7406\u6a21\u5757","text":"<ul> <li>\u96f7\u8fbe\u56fe\u50cf\u5143\u6570\u636e\u5b58\u50a8\uff08PostgreSQL\uff09</li> <li>\u6587\u4ef6\u8def\u5f84\u7d22\u5f15</li> <li>\u65f6\u95f4\u6233\u89e3\u6790\u548c\u7d22\u5f15</li> <li>\u533a\u57df\u5206\u7c7b\u7d22\u5f15</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#4","title":"4. \u524d\u7aef\u4ea4\u4e92\u6a21\u5757","text":"<ul> <li>\u5b9e\u65f6\u6570\u636e\u52a0\u8f7d</li> <li>\u56fe\u7247\u9884\u52a0\u8f7d\u548c\u7f13\u5b58</li> <li>\u64ad\u653e\u63a7\u5236\uff08\u64ad\u653e/\u6682\u505c/\u5faa\u73af\uff09</li> <li>\u64ad\u653e\u901f\u5ea6\u8c03\u8282</li> <li>\u54cd\u5e94\u5f0f\u5e03\u5c40</li> </ul>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_8","title":"\u6570\u636e\u6d41","text":"<pre><code>\u96f7\u8fbe\u6570\u636e\u6587\u4ef6 (\u6587\u4ef6\u7cfb\u7edf)\n    \u2193\nRadarScanner \u626b\u63cf\u670d\u52a1\n    \u2193\nPostgreSQL \u6570\u636e\u5e93 (\u5143\u6570\u636e\u5b58\u50a8)\n    \u2193\nFastAPI \u540e\u7aef API\n    \u2193\nVue.js \u524d\u7aef\u5e94\u7528\n    \u2193\n\u7528\u6237\u6d4f\u89c8\u5668\u5c55\u793a\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_9","title":"\u90e8\u7f72\u67b6\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Nginx (80)    \u2502  \u2190 \u524d\u7aef\u9759\u6001\u6587\u4ef6\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502              \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Frontend       \u2502  \u2502  Backend        \u2502\n\u2502  (Vue.js)       \u2502  \u2502  (FastAPI:8000) \u2502\n\u2502  Docker         \u2502  \u2502  Docker         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   PostgreSQL      \u2502\n                    \u2502   (\u5916\u90e8\u6570\u636e\u5e93)     \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_10","title":"\u4e3b\u8981\u7279\u6027","text":"<ol> <li>\u9ad8\u6027\u80fd: </li> <li>\u5f02\u6b65 I/O (FastAPI + asyncpg)</li> <li>\u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316</li> <li> <p>\u524d\u7aef\u56fe\u7247\u9884\u52a0\u8f7d\u548c\u7f13\u5b58</p> </li> <li> <p>\u7528\u6237\u4f53\u9a8c:</p> </li> <li>\u54cd\u5e94\u5f0f\u8bbe\u8ba1</li> <li>\u6d41\u7545\u7684\u64ad\u653e\u63a7\u5236</li> <li> <p>\u667a\u80fd\u6570\u636e\u52a0\u8f7d</p> </li> <li> <p>\u5b89\u5168\u6027:</p> </li> <li>JWT Token \u8ba4\u8bc1</li> <li>\u5bc6\u7801\u52a0\u5bc6\u5b58\u50a8 (bcrypt)</li> <li> <p>\u9a8c\u8bc1\u7801\u9632\u5237</p> </li> <li> <p>\u53ef\u7ef4\u62a4\u6027:</p> </li> <li>\u6a21\u5757\u5316\u8bbe\u8ba1</li> <li>\u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784</li> <li>\u5b8c\u5584\u7684\u65e5\u5fd7\u8bb0\u5f55</li> </ol>"},{"location":"%E9%A1%B9%E7%9B%AE/RadarLive-CN/%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E6%80%BB%E8%A7%88/#_11","title":"\u76f8\u5173\u6587\u6863","text":"<ul> <li>\u540e\u7aef\u67b6\u6784\u8be6\u89e3</li> <li>\u524d\u7aef\u67b6\u6784\u8be6\u89e3</li> <li>API \u6587\u6863</li> <li>\u5b66\u4e60\u6536\u83b7</li> </ul>"}]}