# RadarLive-CN 项目结构总览

## 项目简介

RadarLive-CN 是一个雷达数据实时展示系统，类似中央气象台的雷达数据展示网站。系统支持雷达拼图和单站雷达两种模式，提供实时数据展示、时间轴播放、区域筛选等功能。

## 技术栈

### 后端技术栈
- **框架**: FastAPI (Python 异步 Web 框架)
- **数据库**: PostgreSQL (使用 SQLAlchemy ORM)
- **认证**: JWT Token (访问令牌 + 刷新令牌)
- **日志**: Loguru
- **部署**: Docker + Uvicorn

### 前端技术栈
- **框架**: Vue.js 3 (组合式 API)
- **UI 组件库**: Element Plus
- **地图库**: Leaflet
- **路由**: Vue Router 4
- **HTTP 客户端**: Axios
- **构建工具**: Vite

### 部署技术栈
- **容器化**: Docker + Docker Compose
- **Web 服务器**: Nginx (前端静态文件)
- **反向代理**: Nginx (可选)

## 项目目录结构

```
radarlive-cn/
├── backend/                    # 后端服务
│   ├── api/                    # API 路由模块
│   │   ├── auth.py            # 认证相关路由（登录、注册、修改密码）
│   │   └── routes.py          # 雷达数据相关路由
│   ├── database/              # 数据库模块
│   │   ├── base.py           # 数据库基类
│   │   ├── connection.py     # 数据库连接配置
│   │   └── models.py         # 数据模型定义
│   ├── services/              # 业务逻辑服务
│   │   └── radar_scanner.py  # 雷达数据扫描和处理服务
│   ├── utils/                 # 工具函数
│   │   ├── auth.py           # 认证工具（JWT、密码加密）
│   │   ├── captcha.py        # 验证码生成和验证
│   │   └── dependencies.py   # FastAPI 依赖注入
│   ├── config.py             # 配置文件
│   ├── main.py               # FastAPI 应用入口
│   ├── requirements.txt      # Python 依赖
│   └── Dockerfile            # 后端 Docker 镜像配置
│
├── frontend/                  # 前端应用
│   ├── src/
│   │   ├── api/              # API 调用封装
│   │   │   └── radar.js      # 雷达数据 API
│   │   ├── router/           # 路由配置
│   │   │   └── index.js      # Vue Router 配置
│   │   ├── views/            # 页面组件
│   │   │   └── LoginView.vue # 登录页面
│   │   ├── App.vue           # 根组件
│   │   ├── Login.vue         # 登录组件
│   │   ├── Register.vue      # 注册组件
│   │   ├── RadarView.vue     # 雷达展示主组件（核心）
│   │   └── main.js           # 应用入口
│   ├── dist/                 # 构建输出目录
│   ├── package.json          # Node.js 依赖
│   ├── vite.config.js        # Vite 配置
│   └── Dockerfile            # 前端 Docker 镜像配置
│
├── blog/                      # 博客和文档
│   ├── docs/                 # Markdown 文档
│   │   ├── 学习总结/         # 学习总结文章
│   │   ├── 开发经验/         # 开发经验分享
│   │   ├── 技术栈学习/       # 技术栈学习笔记
│   │   └── 项目实战/         # 项目实战文档
│   ├── mkdocs.yml            # MkDocs 配置
│   └── requirements.txt      # MkDocs 依赖
│
├── docker-compose.yml        # Docker Compose 配置
├── env.sh                    # 环境变量脚本
├── start_server.sh           # 启动脚本
└── README.md                 # 项目说明
```

## 核心功能模块

### 1. 用户认证模块
- 用户注册（带验证码）
- 用户登录（JWT Token）
- 密码修改
- Token 刷新机制

### 2. 雷达数据模块
- **雷达拼图模式**:
  - 支持全国、华北、东北、华东、华中、华南、西南、西北等区域
  - 时间轴播放控制
  - 时间范围筛选
  - 图片缩放功能

- **单站雷达模式**:
  - 按省份/城市筛选站点
  - 单站雷达数据展示
  - 时间范围查询
  - 站点信息展示

### 3. 数据管理模块
- 雷达图像元数据存储（PostgreSQL）
- 文件路径索引
- 时间戳解析和索引
- 区域分类索引

### 4. 前端交互模块
- 实时数据加载
- 图片预加载和缓存
- 播放控制（播放/暂停/循环）
- 播放速度调节
- 响应式布局

## 数据流

```
雷达数据文件 (文件系统)
    ↓
RadarScanner 扫描服务
    ↓
PostgreSQL 数据库 (元数据存储)
    ↓
FastAPI 后端 API
    ↓
Vue.js 前端应用
    ↓
用户浏览器展示
```

## 部署架构

```
┌─────────────────┐
│   Nginx (80)    │  ← 前端静态文件
└────────┬────────┘
         │
         ├──────────────┐
         │              │
┌────────▼────────┐  ┌──▼──────────────┐
│  Frontend       │  │  Backend        │
│  (Vue.js)       │  │  (FastAPI:8000) │
│  Docker         │  │  Docker         │
└─────────────────┘  └────────┬────────┘
                              │
                    ┌─────────▼─────────┐
                    │   PostgreSQL      │
                    │   (外部数据库)     │
                    └───────────────────┘
```

## 主要特性

1. **高性能**: 
   - 异步 I/O (FastAPI + asyncpg)
   - 数据库索引优化
   - 前端图片预加载和缓存

2. **用户体验**:
   - 响应式设计
   - 流畅的播放控制
   - 智能数据加载

3. **安全性**:
   - JWT Token 认证
   - 密码加密存储 (bcrypt)
   - 验证码防刷

4. **可维护性**:
   - 模块化设计
   - 清晰的代码结构
   - 完善的日志记录

## 相关文档

- [后端架构详解](后端架构详解.md)
- [前端架构详解](前端架构详解.md)
- [API 文档](API接口文档.md)
- [学习收获](学习收获.md)

